{"ID_DEFECT":"7441","DESCRIPTION":"RUNNING APACHE 2.0.28 SERVER ON REDHAT LINUXSET UP MACHINE, OS AND APACHE FOR IPV6 NETWORKINGTRIED TO DOWNLOAD HTTP CONTENT BY SPECIFYING THE IPV6 NUMERICAL IP ADDRESSTHE APACHE SERVER IS NOT FULLY HTTP 1.1 COMPLIANT.  THE SERVER INCORRECTLY EXPECTS A NON-EMPTY HOST HEADER EVEN WHEN THE SERVER IS SPECIFIED BY A NUMERIC IP ADDRESS E.G. 10.158.7.52. THE HOST HEADER SHOULD BE EMPTY WHEN THE SERVER IP ADDRESS IS SPECIFIED USING A NUMERICAL ADDRESS.SERVER INCORRECTLY RETURNS AND 400 HTTP SERVER CODE.RFC2616 - HYPERTEXT TRANSFER PROTOCOL -- HTTP1.1SECTION 14.23 HOSTIPV6 BROWSERS WILL NOT WORK ON APACHE IF THIS IS NOT FIXED.","SUMMARY":"RFC 2616 - APACHE INCORRECTLY EXPECTS A NON-EMPTY HOST HEADER","CLASS":1}
{"ID_DEFECT":"8014","DESCRIPTION":"FOR TESTING, I HAVE AN ALIAS CALLED C THAT POINTS TO C:DOCUMENTS AND SETTINGS. I KEEP MY PROFILE DIRECTORY ON A SEPARATE DISK THAT IS MOUNTED UNDER C:DOCUMENTS AND SETTINGSSAM. HOWEVER, THE SAM FOLDER DOES NOT APPEAR IN APACHES DIRECTORY LISTING. ADDITIONALLY, WHILE THE DIRECTORY LISTING IS BEING GENERATED, THIS APPEARS IN THE ERROR.LOG:[FRI APR 12 14:33:05 2002] [ERROR] [CLIENT 127.0.0.1] SYMLINK DOESNT POINT TO A FILE OR DIRECTORY: C:DOCUMENTS AND SETTINGSSAMASKING FOR ANYTHING UNDER HTTP:LOCALHOSTCDOCUMENTS AND SETTINGSSAM MANUALLY THROWS A 403 BACK TO THE CLIENT, WITH THE SAME ERROR IN THE EVENT LOG.IF I REMOVE THE FOLLOWSYMLINKS OPTION FOR THE DIRECTORY THEN THE ERROR MESSAGE IS INSTEAD:[FRI APR 12 14:41:29 2002] [ERROR] [CLIENT 127.0.0.1] SYMBOLIC LINK NOT ALLOWED: C:DOCUMENTS AND SETTINGSSAMAND A 403 IS STILL RETURNED TO THE BROWSER.","SUMMARY":"APACHE CANNOT HANDLE NTFS JUNCTIONS (SYMLINKS)","CLASS":1}
{"ID_DEFECT":"8234","DESCRIPTION":"ACCEPTPATHINFO SET TO ON OR DEFAULT DOES NOT APPEAR TO WORK AS EXPECTED (AT ALL) ON WIN322KXP THIS IS ON A DEFAULT WIN32 BINARY INSTALL WITH STANDARD CONFIGWHEREVER HOWEVER IT IS USED IT IS IGNORED A 404 IS GENERATED RATHER THAN THE EXPECTED LOOKBACK IN THE REQUEST_URI I.E.SOMEHOST.COMTHIS.HTMVAR1VAR2 RESULTS IN A 404 RATHER THAN THIS.HTM+PATH_INFO","SUMMARY":"ACCEPTPATHINFO IGNORED","CLASS":1}
{"ID_DEFECT":"8253","DESCRIPTION":"R->CONNECTION->ABORTED DOES NOT APPEAR TO BE SET TO 1 WHEN A CONNECTION IS ABORTED ON WIN32 (WORKS FINE ON LINUX AND SOLARIS).  IM TRYING TO CHECK FOR THIS IN A CUSTOM MODULE, BUT ALSO TESTED USING THE %X LOG FORMAT DIRECTIVE.  I RAN THE SAME TEST AGAINST APACHE 1.3.24 ON WIN32 (WITH THE %C LOG FORMAT DIRECTIVE), AND IT WORKS CORRECTLY IN APACHE 1.3.24 ON WIN32.","SUMMARY":"R->CONNECTION->ABORTED NOT SET ON WIN32, BREAKS %X LOG FORMAT","CLASS":1}
{"ID_DEFECT":"8760","DESCRIPTION":"THERE SEEMS TO BE AN ERROR IN THE HANDLING OF IF-MODIFIED-SINCE.STEPS TO REPRODUCE:1. SEND THE FOLLOWING REQUEST TO WWW.DAWNORCHID.COM:GET  HTTP1.1HOST: WWW.DAWNORCHID.COMRESULTING HEADER ISHTTP1.1 200 OKDATE: SAT, 04 MAY 2002 02:07:27 GMTSERVER: APACHE2.0.35 (WIN32) PHP4.2.0LAST-MODIFIED: MON, 29 APR 2002 07:58:14 GMT2. SEND ANOTHER REQUEST FOR THE SAME PAGE, USING THE ABOVE TIMESTAMP IN AN IF-MODIFIED-SINCE FIELD.GET  HTTP1.1HOST: WWW.DAWNORCHID.COMIF-MODIFIED-SINCE: MON, 29 APR 2002 07:58:14 GMTEXPECTED RESULT: A 304 NOT MODIFIED RESPONSE.ACTUAL RESULT: A 200 OK RESPONSE WITH THE FULL HTML PAGE.IF I CHANGE THE TIME IN THE IF-MODIFIED-SINCE FIELD TO ONE SECOND LATER (07:58:15 INSTEAD OF 07:58:14), THE EXPECTED 304 NOT MODIFIED RESPONSE IS RETURNED.","SUMMARY":"IF-MODIFIED-SINCE FIELD IN REQUEST NOT HANDLED CORRECTLY","CLASS":1}
{"ID_DEFECT":"9185","DESCRIPTION":"WHEN A BINARY FILE IS HOSTED BY APACHE 2.0.36 OR 1.3.24 COMPILED BY CYGWIN, THE DOWNLOADED FILE IS ALWAYS CORRUPTED. THE PRECOMPILED VERSION DOES NOT HAVE THE SAME PROBLEM BUT IT DOES NOT RESPOND WHEN A CLIENT TRIES TO DOWNLOAD A BIG FILE AFTER (SAY) HALF AN HOUR.","SUMMARY":"DOWNLOADED FILES ALWAYS CORRUPT ON CYGWIN","CLASS":1}
{"ID_DEFECT":"9673","DESCRIPTION":"APACHE2 DOES NOT PAY ATTENTION TO DYNAMIC PHP SCRIPTS CONFIGURED BY  SETINPUTFILTERSETOUTPUTFILTER PHP, AS IT STILL CHECKS THE MODIFICATION  DATE OF THE PLAIN .PHP FILE.    THIS LEADS TO CACHING PROBLEMS, WHEN THE USERS BROWSER SENDS A  IF-LAST-MODIFIED REQUEST. APACHE RETURNS 304 NOT MODIFIED, AS THE PHP FILE ITSELF HAS NOT CHANGED, ALTHOUGH THE DYNAMIC CONTENT MAY HAVE CHANGED!  THE PROBLEM IS IN MODULESHTTPHTTP_PROTOCOL.C, LINE 386+ HOTFIX: I HAVE COMMENTED OUT LINE 393 (RETURN HTTP_NOT_MODIFIED), SO THAT THIS FEATURE IS TOTALLY DISABLED.  IS THERE A CHANCE TO CHECK FOR AN INPUTOUTPUTFILTER SET? THAT WAY, WE COULD DEACTIVATE THE FEATURE FOR PHP PAGES ONLY.","SUMMARY":"CONDITIONAL GET REQUESTS NOT HANDLED PROPERLY WITH FILTERED CONTENT","CLASS":1}
{"ID_DEFECT":"9873","DESCRIPTION":"WHEN CONFIGURING WITH --WITH-PROGRAM-NAME= TO ANOTHER PROCESSNAME,APACHECTL CANNOT STOP THE SERVER, BECAUSE IT DOESNT FIND THE PID FILE.E.G.:   .CONFIGURE --WITH-PROGRAM-NAME=HTTPD-PROXY ...   APACHECTL  START     # WORKS, APACHE CREATES  ...LOGSHTTPD.PID   APACHECTL  STOP      # FAILS, BECAUSE SEEKING  ...LOGSHTTPD-PROXY.PID","SUMMARY":"PID FILE SEEMS TO DIFFER IN APACHECTL UND APACHE PROCESS","CLASS":1}
{"ID_DEFECT":"10095","DESCRIPTION":"IRIX APPEARS TO BE BRAIN DEAD IN ITS RESPONSES TO GETPWNAM_R CALLS.WITHIN USERINFO.C YOU ARE EXPECTING A NON-ZERO RETURN CODE IF IT FAILS.THIS IS A REASONABLE ASSUMPTION.  HOWEVER, UNDER IRIX YOU ALWAYS GETA ZERO RETURN CODE.  YOU NEED TO EXAMINE THE RETURNED VALUE OF PWPTRAND IF IT IS NULL, THEN THE CALL FAILED.  THE IRIX MAN PAGE ACTUALLYSAYS THAT YOU NEED TO CHECK THE POINTER - WHAT THEY DONT SAY IS THATTHE RETURNED VALUE IS ALWAYS ZERO.ALTERNATIVELY, YOU CAN TEST ERRNO.  IRIX APPEARS TO SET THIS CORRECTLY.I HAVE WORKED AROUND IT, BY ADDING THE TEST FOR A NULL POINTER RETURN.IT COULD ALSO BE HACKED BY UNDEFINING HAVE_GETPWNAM_R FOR IRIX BUILDS.","SUMMARY":"WITHIN USERINFO.C, GETPWNAM_R DOES NOT WORK AS EXPECTED ON IRIX","CLASS":1}
{"ID_DEFECT":"10146","DESCRIPTION":"HELLO.SOME TIME AGO IN DIFFERENT MAILLIST WAS POST:------------------------------------------------------DATE: WED, 19 JUN 2002 12:45:24 -0700FROM: GOBBLES@HUSHMAIL.COMTO: VULNDEV@VULNDEV.ORG, SUBMISSIONS@PACKETSTORMSECURITY.ORG,     BUGS@SECURITYTRACKER.NET, BUGTRAQ@SECURITYFOCUS.COM,     VULN-DEV@SECURITYFOCUS.COMSUBJECT: REMOTE APACHE 1.3.X EXPLOIT----------------------------------------------------------------MAIL HAS ATTACHMENT, WHICH EXPLOIT FOR OPENBSD CODE.BUT EXPLOIT HAS ONE SIDE EFFECT  - FOR APACHE 2.0.39IT MAKE DOS. CHILD EAT ALL MEMORY, SWAP AND DIE WITH DIAGNOSTIC.JUN 20 11:16:39 SOLO KERNEL: PID 49564 (HTTPD), UID 65534, WAS KILLED: OUT OFSWAP SPACEIN GDB WE CAN SEE, THAT CHILD LOOP IN MODULESHTTPHTTP_PROTOCOL.C IN FUNCTION:AP_DISCARD_REQUEST_BODY():1962         WHILE (!SEEN_EOS);(GDB) N1920            RV = AP_GET_BRIGADE(R->INPUT_FILTERS, BB, AP_MODE_READBYTES,(GDB) N1923            IF (RV != APR_SUCCESS) (GDB) N1939            APR_BRIGADE_FOREACH(BUCKET, BB) (GDB) N1961            APR_BRIGADE_CLEANUP(BB);(GDB) AND 2.0.40-DEV FROM CVS DOS-ED TOO.P.S. OS: FREEBSD 4.5 AND 4.6 RELEASESB.R. KOZIN MAXIM","SUMMARY":"2.0.39 DOS","CLASS":1}
{"ID_DEFECT":"10678","DESCRIPTION":"HELLO,I AM USING APACHE 2.0.39, BUT UNFORTUNATELY THE REMOTE_USER ENVIRONMENT VARIABLE GETS LOST, WHEN LIMITING ACCESS BY MEANS OF .HTACCESS. IN CONTRAST TO THIS IT IS POSSIBLE TO LIMIT THE ACCESS IN THE HTTPD.CONF FILE.WORKS:  VIRTUAL HOST CONFIG:    <LOCATION DIR>        AUTHTYPE BASIC        AUTHNAME TEST        AUTHUSERFILE PATHTOFILE        REQUIRE VALID-USER    <LOCATION>DOESNT WORK:  .HTACCESS:        AUTHTYPE BASIC        AUTHNAME TEST        AUTHUSERFILE PATHTOFILE        REQUIRE VALID-USERIS THERE A SPECIAL REASON, WHY THE REMOTE_USER VARIABLE IS DROPPED INTHE SECOND CASE AND HOW CAN I AVOID THIS BEHAVIOUR? WHEN TRYING TO ACCESSA DOCUMENT IN DIR ONE IS ASKED FOR PASSWORD AS USUAL, BUT EVEN A SIMPLESHELL-SCRIPT JUST WRITING THE ENVIRONMENT TO A FILE, DOES NOT SHOW THEREMOTE_USER VARIABLE. THE SCRIPT WAS CONFIGURED USING ADDHANDLER ANDACTION.ADDHANDLER TESTHANDLER .TESTACTION TESTHANDLER CGI-BINTESTSCRIPTTESTSCRIPT CONTAINS: #!BINSHECHO -E CONTENT-TYPE: TEXTPLAINHELLO WORLD;SET > TMPTESTSCRIPT-OUTPUTTHANKS IN ADVANCE!CIAO,THOMAS","SUMMARY":"SEVERAL .HTACCESS FILES ARE CONSULTED, REMOTE_USER GETS DROPPED","CLASS":1}
{"ID_DEFECT":"10946","DESCRIPTION":"TRYING TO RETRIEVE HTTP:FOO.XIMIAN.COMBAR.HTML WILL WORK, BUT TRYING TORETRIEVE HTTP:FOO.XIMIAN.COMBAR.HTML (NOTE THE REDUNDANT SLASHES) FAILS WITHA 403.  FOR WHAT ITS WORTH, HTTP:FOO.XIMIAN.COMBAZBAZ.HTML WORKS OK.  AS A WORKAROUND, I USED MOD_REWRITE IN A MANNER SIMILAR TO THIS:    REWRITEENGINE ON    REWRITERULE ^(.*$) PATHTODOCROOT$1THIS WORKS, AND THE PERFORMANCE HIT DOESNT SEEM TO BE ESPECIALLY GREAT, BUT ITISNT IDEAL.","SUMMARY":"REDUNDANT SLASHES IN URLS CAUSE 403 FORBIDDEN ERRORS","CLASS":1}
{"ID_DEFECT":"11030","DESCRIPTION":"`LISTEN IPADDR WORKS FINE; `LISTEN HOSTNAME NOT. IT SEEMS APACHE TRIES TO BIND TWICE IN THIS LAST CASE, AND CRASHES WITHOUT EVEN WRITING SOMETHING TO THE ERRORLOG (IT SEEMT TO TRY TO WRITE TO STDERR, THOUGH).SEE THE ATTACHED OUTPUT OF `TRUSS -F -A -E -VALL -RALL -WALL BINAPACHECTL START > TMPOUT.TXT 2>&1. LINE 1774 AND LINE 2989 TRY THE SAME BIND; THE SECOND ONE FAILS OF COURSE.WE USE SOLARIS 2.8 (IT ALSO OCCURRED FOR 2.0.36 IN SOLARIS 2.6); ETCNSSWITCH.CONF CONTAINS `HOSTS: FILES DNS AND THE PROBLEM OCCURS BOTH WHEN THE HOSTNAME APLUX11-A IS IN ETCHOSTS AND WHEN IT IS NOT (IT IS ALWAYS IN DNS).","SUMMARY":"LISTEN <HOSTNAME>: DOUBLE BIND","CLASS":1}
{"ID_DEFECT":"11213","DESCRIPTION":"THE VERSION NUMBER MESSAGE WHEN A MODULE IS REJECTED DUETO INCOMPATIBILITY SHOULD PRINT THE ACTUAL VERSION NUMBEROF THE FAILED MODULE AND THE SERVER.A PATCH WILL BE ATTACHED TO THIS BUG NUMBER.","SUMMARY":"INADEQUATE MESSAGE WHEN MODULE IS REJECTED. FIX ATTACHE; PLEASE COMMIT","CLASS":1}
{"ID_DEFECT":"11467","DESCRIPTION":"THE (DUTCH?) CONTENT IS INCORRECTLY ENCODED IN THE HTDOCSINDEX.HTML.VAR FILE ASURI: INDEX.HTML.NLCONTENT-LANGUAGE: NLCONTENTY-TYPE: TEXTHTMLTHE LAST LINE SHOULD, OF COURSE, BEGIN WITH CONTENT-TYPE:","SUMMARY":"TYPO IN HTDOCSINDEX.HTML.VAR","CLASS":1}
{"ID_DEFECT":"11601","DESCRIPTION":"IF I SEND A REQUEST FOR A NONEXISTENT FILE AS FOLLOWS:TGET NOSUCHFILEASTHIS HTTP1.0TRANGE: BYTES=122-240THOST: PERL.PLOVER.COMI SHOULD GET A 404 FILE NOT FOUND RESPONSE.  INSTEAD, HOWEVER, I GET THEFOLLOWING ERRONEOUS RESPONSE:THTTP1.1 206 PARTIAL CONTENTTDATE: SAT, 10 AUG 2002 01:13:53 GMTTSERVER: APACHE2.0.39 (UNIX)TCONTENT-RANGE: BYTES 122-240288TCONTENT-LENGTH: 119TCONTENT-TYPE: TEXTHTML; CHARSET=ISO-8859-1TH1>T<P>THE REQUESTED URL NOSUCHFILEASTHIS WAS NOT FOUND ON THIS SERVER.<P>T<HR >T<ADDRESS>APACHE2.0.39 SERVER AT PERFC2616 SAYS THAT THE 206 RESPONSE IS TO BE USED ONLY WHEN THE SERVER HASFULFILLED THE PARTIAL GET REQUEST.  AS YOU CAN SEE, THE BEHAVIOR HERE IS BIZARRE IN ANY CASE; WE SEEM TO HAVE BEEN GIVEN BYTES 122-240 OF THEINTERNALLY-GENERATED ERROR DOCUMENT.THE ERROR APPEARS IN 2.0.36 ALSO.","SUMMARY":"FAILED REQUEST WITH RANGE HEADER DOES NOT RETURN AN ERROR REPLY","CLASS":1}
{"ID_DEFECT":"11854","DESCRIPTION":"IM UNABLE TO START APACHE2 - IT EXISTS IN 12 SECOND AFTER I START IT !AND THIS IS WHAT IVE FOUND IN THE LOG :[TUE AUG 20 15:54:39 2002] [CRIT] (22)INVALID ARGUMENT: PARENT: FAILED TO CREATE THE CHILD PROCESS.[TUE AUG 20 15:54:39 2002] [CRIT] (22506)THE HANDLE IS INVALID.  : MASTER_MAIN: CREATE CHILD PROCESS FAILED. EXITING.[TUE AUG 20 15:54:39 2002] [NOTICE] PARENT: FORCING TERMINATION OF CHILD PROCESS 3121056 MY BOX IS A 950MHZ ATHLON W256MB RAM, RUNNING WIN2K.PROF WSP3 - AND NOT ANY FIREWALL.IF YOU NEED MY HTTPD.CONF OR ANY OTHER INFO. - JUST ASK !P.S. : APACHE2 (WITH THE CURRENT CONFIG.) USED TO RUN ON MY SYSTEM JUST 2 DAYS AGO !","SUMMARY":"UNABLE TO START APACHE2 (EXITS IN 12 SECOND AFTER START, LEAVING [CRIT] ERRORS IN LOG)","CLASS":1}
{"ID_DEFECT":"12207","DESCRIPTION":"IF APACHE HAS THE FILEETAG DIRECTIVE SET TO NONE AND AN IF-NONE-MATCH HEADER IS SENT IN A REQUEST, APACHE ALWAYS SENDS BACK A 304 NOT MODIFIED RESPONSE, REGARDLESS OF THE CONTENT OF THE ETAG(S) SENT IN THE IF-NONE-MATCH HEADER.THIS BUG IS PRETTY HIGH PRIORITY, BECAUSE IT MEANS THAT IF A SITE RUNNING APACHE NORMALLY SERVES ETAGS BUT THEN STOPS SERVING THEM BY SETTING FILEETAG NONE, ANY DOWNSTREAM CACHES WHICH UNDERSTAND ETAGS AND SEND IF-NONE-MATCH REQUESTS WILL STOP GETTING UPDATED CONTENT.HOW TO REPRODUCE:    1. MAKE A REGULAR HTTP REQUEST TO APACHE FOR ANY STATIC FILE,       AND NOTE ITS ETAG.    2. MAKE ANOTHER HTTP REQUEST FOR THAT FILE, SENDING AN IF-NONE-MATCH       HEADER (FOR EXAMPLE, IF THE ETAG FROM STEP 1 IS ABCDEF, SEND       THE HEADER IF-NONE-MATCH: ABCDEF). APACHE SHOULD CORRECTLY       RETURN A 304 NOT MODIFIED RESPONSE.    3. MAKE A NEW IF-NONE-MATCH REQUEST WITH A BOGUS ETAG, FOR EXAMPLE       BY SENDING IF-NONE-MATCH: XXX. APACHE SHOULD CORRECTLY RETURN       A 200 OK AND INCLUDE AN ENTITY BODY.    4. ADD A FILEETAG NONE DIRECTIVE TO THE APACHE CONFIGURATION,       AND RESTART APACHE.    5. MAKE THE SAME IF-NONE-MATCH REQUEST AS IN STEP 2. AGAIN, APACHE       SHOULD CORRECTLY RETURN A 304 NOT MODIFIED RESPONSE.    6. MAKE THE SAME BOGUS IF-NONE-MATCH REQUEST AS IN STEP 3 (OR ANY       OTHER IF-NONE-MATCH REQUEST WITH A BOGUS ETAG). APACHE WILL       INCORRECTLY RETURN A 304 NOT MODIFIED RESPONSE.STEPS 4 AND 6 ARE ENOUGH TO REPRODUCE THE BUG BUT THE OTHER STEPS GIVE A LITTLE CONTEXT BY SHOWING THE CORRECT BEHAVIOR.I HAVE REPRODUCED THIS BUG WITH APACHE 2.0.40 ON SOLARIS X86. I STRONGLY SUSPECT THE BUG TO BE PLATFORM INDEPENDENT, AS IT IS A SIMPLE MISSING CHECK IN HTTP_PROTOCOL.C FOR AN EMPTY ETAG. APACHE 1.3 HAS AN IDENTICAL BUG, FOR WHICH DETAILS CAN BE FOUND IN BUG 12202.","SUMMARY":"IF-NONE-MATCH REQUESTS ALWAYS RETURN 304 WITH FILEETAG NONE DIRECTIVE","CLASS":1}
{"ID_DEFECT":"12779","DESCRIPTION":"WHEN I TRIED TO BUILD MOD_FASTCGI FOR APACHE 2 I GOT A LINK ERRORCOULD NOT FIND SYMBOL _AP_LOAD_DLL_FUNC.I COULD SOLVE THIS PROBLEM BY CHANGING THE DECLARATION  FARPROC AP_LOAD_DLL_FUNC(...) TO:  AP_DECLARE(FARPROC) AP_LOAD_DLL_FUNC(...)IN UTIL_WIN32.C AND OS.HAS FAR AS I COULD SEE THIS DID NOT HURT THE REST OF APACHE,SO COULD YOU PLEASE MAKE THIS CHANGE IN THE NEXT RELEASE.","SUMMARY":"LINK ERROR FOR _AP_LOAD_DLL_FUNC","CLASS":1}
{"ID_DEFECT":"12893","DESCRIPTION":"I MAKE A SYMBOL LINK TO NTFS DIRECTORY,AND THEN REQUEST FILE UNDER THAT DIRECTORY.WHEN THE FILE SIZE SMALLER THAN 7169 BYTE,IT SUCCESSWHEN THE FILE SIZE LAGER   THAN 7788 BYTE,IT FAIL AND I GET AN LOG MESSAGE BELOW[SAT SEP 21 20:04:32 2002] [INFO] (22)INVALID ARGUMENT: CORE_OUTPUT_FILTER: WRITING DATA TO THE NETWORKIT WAS PRODUCE BY FUNCTION CORE_OUTPUT_FILTER() IN FILE SERVERCORE.C","SUMMARY":"INVALID ARGUMENT IN CORE WHEN ACCESS LARGE FILE IN NTFS PARTITION","CLASS":1}
{"ID_DEFECT":"14147","DESCRIPTION":"APACHE WILL, IN SOME CASES, TRUNCATE THE LAST CHARACTER OF A FILENAME CAUSINGIT TO EITHER NOT FIND THE FILE OR SERVE THE WRONG FILE.  BELOW ARE STEPS TOREPRODUCE THE BUG, PART OF A GDB DEBUGGING SESSION SHOWING THE CODE THATCAUSES THE BUG, AND A SMALL PATCH TO FIX THE BUG.THIS IS PROBABLY THE CAUSE FOR THE SYMPTOMS SEEN IN BUG #10687.  I FIRSTENCOUNTERED THE PROBLEM WHEN A CUSTOMER WAS TRYING TO DO A VIRTUAL INCLUDEOF A FILE VIA MOD_INCLUDE SSI.  THE ERROR LOG CONSISTENTLY SHOWED APACHEFAILING TO FIND A FILE WHOSE NAME WAS ONE CHARACTER SHORTER THAN THEDESIRED FILE.  HERE IS AN EXAMPLE.    $ CD ~USER04    $ CAT HTML1INDEX.SHTML    <HTML>    <BODY>    TEST<BR>    <!--#INCLUDE VIRTUAL=..2IN.HTML -->    <BODY>    <HTML>    $ CAT HTML2IN.HTML    THIS IS IN.HTML    $ WGET -Q -O - HTTP:SF1000.REGISTEREDSITE.COM~USER041    <HTML>    <BODY>    TEST<BR>    [AN ERROR OCCURRED WHILE PROCESSING THIS DIRECTIVE]    <BODY>    <HTML>    $ CAT USRAPACHELOGSERROR.LOG.1036095600     [THU OCT 31 15:20:12 2002] [USER04] [ERROR] [CLIENT 209.35.187.200]     (2)NO SUCH FILE OR DIRECTORY: FILE PERMISSIONS DENY SERVER ACCESS:     HOMERTUSER04HTML2IN.HTM    [THU OCT 31 15:20:12 2002] [USER04] [ERROR] [CLIENT 209.35.187.200]     UNABLE TO INCLUDE ..2IN.HTML IN PARSED FILE     HOMERTUSER04HTML1INDEX.SHTML    HERE IS PART OF A DEBUGGING SESSION WHERE THE CODE CAUSING THE BUG CANBE SEEN IN ACTION.  STARTING WITH LINE 1066 FROM SERVERREQUEST.C INAP_DIRECTORY_WALK, THE CODE REACHES A GOTO AT LINE 1100.  THIS JUMPSBACK INTO A LOOP THAT SPANS LINES 731-1057.  THE CODE PROCEEDS TOLINES 920 AND 921 WHERE THE LAST CHARACTER OF THE FILNAME IS TRUNCATED.LINES 920 AND 921 ORIGINALLY SERVED TO TAKE OFF A TEMPORARY SLASH ADDEDIN LINES 740-744 IN AN EARLIER PASS THROUGH THE LOOP, BUT THE BOOLEANVARIABLE TEMP_SLASH IS STILL TRUE WHEN THE GOTO JUMPS BACK INTO THE LOOP.(GDB) N1066            IF (SAVE_PATH_INFO) (GDB)1080            FOR (; SEC_IDX < NUM_SEC; ++SEC_IDX) (GDB)1083                ENTRY_CORE = AP_GET_MODULE_CONFIG(SEC_ENT[SEC_IDX],&CORE_MODULE);(GDB)1085                IF (!ENTRY_CORE->R) (GDB)1089                IF (AP_REGEXEC(ENTRY_CORE->R, R->FILENAME, 0, NULL,REG_NOTEOL)) (GDB)1095                IF (MATCHES) (GDB)1096                    IF (LAST_WALK->MATCHED == SEC_ENT[SEC_IDX]) (GDB)1097                        NOW_MERGED = LAST_WALK->MERGED;(GDB)1098                        ++LAST_WALK;(GDB)1099                        --MATCHES;(GDB)1100                        GOTO MINIMERGE;(GDB)813                     THIS_DIR = AP_GET_MODULE_CONFIG(SEC_ENT[SEC_IDX],&CORE_MODULE);(GDB)815                     IF (!THIS_DIR) (GDB)819                     IF (THIS_DIR->OPTS & OPT_UNSET) (GDB)827                         OPTS = THIS_DIR->OPTS;(GDB)828                         OPTS_ADD = THIS_DIR->OPTS_ADD;(GDB)829                         OPTS_REMOVE = THIS_DIR->OPTS_REMOVE;(GDB)832                     IF (!(THIS_DIR->OVERRIDE & OR_UNSET)) (GDB)835                 (GDB)751                     AP_CONF_VECTOR_T *ENTRY_CONFIG = SEC_ENT[SEC_IDX];(GDB)753                     ENTRY_CORE = AP_GET_MODULE_CONFIG(ENTRY_CONFIG,&CORE_MODULE);(GDB)758                     IF (ENTRY_CORE->R || ENTRY_CORE->D_COMPONENTS > SEG) (GDB)840                 IF (SEG >= STARTSEG && OVERRIDE) (GDB)841                     AP_CONF_VECTOR_T *HTACCESS_CONF = NULL;(GDB)843                     RES = AP_PARSE_HTACCESS(&HTACCESS_CONF, R, OVERRIDE,(GDB)846                     IF (RES) (GDB)850                     IF (HTACCESS_CONF) (GDB)920                 IF (TEMP_SLASH) (GDB)921                     R->FILENAME[--FILENAME_LEN] = 0;THE PATCH BELOW ENSURES THE BOOLEAN IS SET BACK TO FALSE WHEN ITHAS SERVED ITS PURPOSE, AND AS AN ADDED PRECAUTION, CHECKS THATTHE CHARACTER ABOUT TO BE TRUNCATED IS A SLASH.--- REQUEST.C.BAK       TUE OCT 22 10:20:09 2002+++ REQUEST.C   TUE OCT 22 10:20:11 2002@@ -918,6 +918,8 @@             * THAT TEMPORARY TRAILING SLASH WAS USEFUL, NOW DROP IT.              *             IF (TEMP_SLASH) +                TEMP_SLASH = 0;+                IF (R->FILENAME[FILENAME_LEN-1] == )                 R->FILENAME[--FILENAME_LEN] = 0;             ","SUMMARY":"PATCH FOR FILENAME TRUNCATION BUG IN AP_DIRECTORY_WALK","CLASS":1}
{"ID_DEFECT":"14376","DESCRIPTION":"IT APPEARS THAT MOD_PROXY OVERWRITES THE DATE HEADER WITH THE LOCAL DATE.MINE IS CONFIGURED AS A REVERSE PROXY (HAVE NOT TRIED THE OTHER WAY).THE DATE HEADER IS IN THE PROPER FORMAT (COMES FROM AN APACHE 1.3 SERVER).THIS SHOULD NOT HAPPEN BECAUSE THIS WAY THE CLIENT LOSES THE REFERENCE FORTHE EXPIRES HEADER (WHICH PASSES THROUGH UNMODIFIED).BELOW ARE TWO SETS OF RESPONSE HEADERS I TESTED WITH. THE FIRST ONE ISTHE BACKEND SERVER ACCESSED DIRECTLY, THE SECOND IS VIA THE PROXY, ATABOUT 20 SECONDS TIME DIFFERENCE. THE TIME ON THE PROXY IS 2-3 MINUTESBEHIND THE BACKENDS. THE FRONTEND ALWAYS SETS THE EXPIRATION DATE TO SAME VALUE AS DATE.HTTP1.1 200 OKDATE: THU, 07 NOV 2002 21:41:15 GMTSERVER: APACHE1.3.27 (UNIX)CACHE-CONTROL: NO-CACHECONTENT-LENGTH: 1924CONNECTION: CLOSECONTENT-TYPE: TEXTHTML; CHARSET=UTF-8EXPIRES: THU, 07 NOV 2002 21:41:15 GMTHTTP1.0 200 OKDATE: THU, 07 NOV 2002 21:38:31 GMTSERVER: APACHE1.3.27 (UNIX)CACHE-CONTROL: NO-CACHECONTENT-TYPE: TEXTHTML; CHARSET=UTF-8EXPIRES: THU, 07 NOV 2002 21:41:37 GMTVIA: 1.1 <PROXYHOSTNAME>CONNECTION: CLOSE","SUMMARY":"DATE HEADER OVERWRITTEN IN PROXIED REQUESTS","CLASS":1}
{"ID_DEFECT":"14861","DESCRIPTION":"WE ARE USING AN APACHE 2.0.43 AS A REVERSE PROXY WITH MANY VIRTUAL HOSTS AND WEARE USING MOD_SSL FOR SOME OF THEM. IT SEEMS TO WORK FINE, BUT ON EACH HTTPS REQUEST, WE HAVE THIS ERROR IN THEERROR LOG :[TUE NOV 26 15:19:43 2002] [ERROR] (20014)ERROR STRING NOT SPECIFIED YET: CANNOTSTORE SSL SESSION TO DBM FILE `VARLOGWWWPROTORUNSSL_SCACHETHE DIRECTORY VARLOGWWWPROTORUN EXISTS AND HAVE THE CORRECT RIGHTS, ITCANT FIGURE WHAT IS THIS ERROR ABOUT...HERE IS OUR CONFIGURATION FILE (ALMOST A STANDARD ONE) :ADDTYPE APPLICATIONX-X509-CA-CERT .CRTADDTYPE APPLICATIONX-PKCS7-CRL    .CRLSSLPASSPHRASEDIALOG  BUILTINSSLSESSIONCACHE         DBM:VARLOGWWWPROTORUNSSL_SCACHESSLSESSIONCACHETIMEOUT  300SSLMUTEX  FILE:VARLOGWWWPROTORUNSSL_MUTEXSSLRANDOMSEED STARTUP BUILTINSSLRANDOMSEED CONNECT BUILTINSSLCIPHERSUITE ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLV2:+EXP:+ENULLSSLCERTIFICATEFILE USRLOCALWWWPROTOCONFSSL.CRTSERVER.CRTSSLCERTIFICATEKEYFILE USRLOCALWWWPROTOCONFSSL.KEYSERVER.KEYSSLCERTIFICATECHAINFILE USRLOCALWWWPROTOCONFSSL.CRTVERISIGN.CRTCUSTOMLOG VARLOGWWWPROTOLOGSSSL_REQUEST.LOG           %T %H %SSL_PROTOCOLX %SSL_CIPHERX %R %BTHANK YOU FOR HELPING !THOMAS.","SUMMARY":"ERROR STRING NOT SPECIFIED YET ON EACH HTTPS REQUEST","CLASS":1}
{"ID_DEFECT":"15981","DESCRIPTION":"APACHE DOES NOT LIST OR SERVE THE FOLLOWING LARGE FILE THAT I HAVE ON MY HARD DISK. -RW-R--R--    1 AK       USERS    4552859648 NOV  9 12:10 TEMP.VOBWHEN TRYING TO ACCESS IT DIRECTLY, A 403 FORBIDDEN ERROR RESULTS, ALONG WITH THEFOLLOWING ENTRY IN THE ERROR LOG:[SAT JAN 11 00:03:30 2003] [ERROR] [CLIENT 127.0.0.1] (75)VALUE TOO LARGE FOR DEFINED DATA TYPE: ACCESS TO ~AKTEMP.VOB FAILEDFURTHER, WHEN LISTING THE DIRECTORY CONTAINING THE BIG FILE, THE LISTING STOPSAT THAT ENTRY, REGARDLESS OF FURTHER AVAILABLE ENTRIES.","SUMMARY":"LARGE FILE HANDLING","CLASS":1}
{"ID_DEFECT":"16533","DESCRIPTION":"APOLOGIES IF THIS HAS ALREADY BEEN REPORTED  FIXED.[WED JAN 29 15:11:09 2003] [NOTICE] CHILD PID 44946 EXIT SIGNAL SEGMENTATIONFAULT (11)[WED JAN 29 15:11:12 2003] [NOTICE] CHILD PID 52174 EXIT SIGNAL SEGMENTATIONFAULT (11)(DBX) WHEREAPR_POOL_CLEANUP_KILL(P = 0X3C68746D6C3E0A3C, DATA = 0X00000001102E5880,CLEANUP_FN = 0X09001000A02074C8), LINE 1926 IN APR_POOLS.CMMAP_BUCKET_DESTROY(DATA = 0X00000001102E5880), LINE 99 IN APR_BUCKETS_MMAP.CMMAP_BUCKET_SETASIDE(B = 0X00000001102DEA18, P = 0X00000001102EA8B8), LINE 167IN APR_BUCKETS_MMAP.CAP_SAVE_BRIGADE(F = 0X00000001102DCFE8, SAVETO = 0X00000001102DD058, B =0X0FFFFFFFFFFFF1D8, P = 0X00000001102EA8B8), LINE 560 IN UTIL_FILTER.CUNNAMED BLOCK $B319, LINE 3932 IN CORE.CCORE_OUTPUT_FILTER(F = 0X00000001102DCFE8, B = 0X00000001102EA920), LINE 3932 INCORE.CUNNAMED BLOCK $B263, LINE 540 IN UTIL_FILTER.CAP_PASS_BRIGADE(NEXT = 0X00000001102DCFE8, BB = 0X00000001102E54B8), LINE 540 INUTIL_FILTER.CAP_HTTP_HEADER_FILTER(F = 0X00000001102E1BC8, B = 0X00000001102E54B8), LINE 1716IN HTTP_PROTOCOL.CUNNAMED BLOCK $B263, LINE 540 IN UTIL_FILTER.CAP_PASS_BRIGADE(NEXT = 0X00000001102E1BC8, BB = 0X00000001102E54B8), LINE 540 INUTIL_FILTER.CAP_CONTENT_LENGTH_FILTER(0X1, 0X78280), LINE 1299 IN PROTOCOL.CUNNAMED BLOCK $B263, LINE 540 IN UTIL_FILTER.CAP_PASS_BRIGADE(NEXT = 0X00000001102E1BA0, BB = 0X00000001102E54B8), LINE 540 INUTIL_FILTER.CUNNAMED BLOCK $B125, LINE 2881 IN HTTP_PROTOCOL.CAP_BYTERANGE_FILTER(F = 0X00000001102E1B78, BB = 0X00000001102E54B8), LINE 2881IN HTTP_PROTOCOL.CUNNAMED BLOCK $B263, LINE 540 IN UTIL_FILTER.CAP_PASS_BRIGADE(NEXT = 0X00000001102E1B78, BB = 0X00000001102E54B8), LINE 540 INUTIL_FILTER.CDEFAULT_HANDLER(R = 0X00000001102E0880), LINE 3384 IN CORE.CAP_RUN_HANDLER(0X0), LINE 194 IN CONFIG.CAP_INVOKE_HANDLER(0X0), LINE 401 IN CONFIG.CAP_PROCESS_REQUEST(0X0), LINE 288 IN HTTP_REQUEST.CAP_PROCESS_HTTP_CONNECTION(0X1), LINE 293 IN HTTP_CORE.CAP_RUN_PROCESS_CONNECTION(0X1), LINE 85 IN CONNECTION.CAP_PROCESS_CONNECTION(0X0, 0X0), LINE 207 IN CONNECTION.CCHILD_MAIN(CHILD_NUM_ARG = 2), LINE 696 IN PREFORK.CMAKE_CHILD(S = 0X000000011022A168, SLOT = 2), LINE 790 IN PREFORK.CPERFORM_IDLE_SERVER_MAINTENANCE(P = 0X00000001102263B8), LINE 925 IN PREFORK.CAP_MPM_RUN(_PCONF = 0X00000001102263B8, PLOG = 0X0000000110252678, S =0X000000011022A168), LINE 1120 IN PREFORK.CMAIN(ARGC = 3, ARGV = 0X00000000200FE8D0), LINE 651 IN MAIN.C(DBX)INTERESTING ARGUMENT P = 0X3C68746D6C3E0A3C = <HTML>< :-)I MANAGED TO FIX THE COREDUMPS BY PATCHING LIKE SO, BUT IT DOES SEEM A LITTLETOO SIMPLE TO BE CORRECT.*** APR_BUCKETS_MMAP.C  WED JAN 29 17:59:09 2003--- APR_BUCKETS_MMAP.C.ORIG     WED JAN 29 17:58:50 2003****************** 164,170 ****            * DECREMENT REFCOUNT ON OLD APR_BUCKET_MMAP *!     MMAP_BUCKET_DESTROY(M);      * CREATE NEW APR_BUCKET_MMAP POINTING TO NEW APR_MMAP_T *      APR_BUCKET_MMAP_MAKE(B, NEW_MM, B->START, B->LENGTH);--- 164,170 ----            * DECREMENT REFCOUNT ON OLD APR_BUCKET_MMAP *!     MMAP_BUCKET_DESTROY(MM);      * CREATE NEW APR_BUCKET_MMAP POINTING TO NEW APR_MMAP_T *      APR_BUCKET_MMAP_MAKE(B, NEW_MM, B->START, B->LENGTH);","SUMMARY":"CHILD SEGFAULTS WHEN SERVICING A REQUEST, IN APR_POOL_CLEANUP_KILL","CLASS":1}
{"ID_DEFECT":"17093","DESCRIPTION":"I HAVE AN INCLUDED VHOST.CONF FILE, AND WHEN I LEFT OFF A <VIRTUALHOST> ENTRY NEAR THE END, BOTH APACHECTL AND HTTPD SEGFAULTED, EVEN ON APACHECTL CONFIGTEST. THIS IS HTTPD 2.0.44 (WITH MOD_PHP) ON FREEBSD 4.7-STABLE. ADDING THE MISSING <VIRTUALHOST> LINE CLEARED THE PROBLEM. HTTPD SHOULD PROVIDE AN ERROR MESSAGE IN THIS SITUATION.WWW# APACHECTL CONFIGTESTFATAL PROCESS EXCEPTION: PAGE FAULT, FAULT VA = 0X18SEGMENTATION FAULT (CORE DUMPED)DMESG SHOWS: PID 227 (HTTPD), UID 0: EXITED ON SIGNAL 11 (CORE DUMPED).HERES THE RELEVANT BIT OF VHOST.CONF (INCLUDED FROM HTTPD.CONF).NAMEVIRTUALHOST 66.92.104.200:80<VIRTUALHOST 66.92.104.200:80>    SERVERADMIN WEBMASTER@REPPEP.COM#   DOCUMENTROOT HOMEHTTPDHTML    DOCUMENTROOT HOMEAMYWWW    SERVERNAME WWW.REPPEP.COM:80    SERVERALIAS REPPEP.COM WWW    CUSTOMLOG |USRLOCALSBINCRONOLOG VARLOGHTTPDREPPEP-%Y-%M-ACCESS_LOG COMBINED    USERDIR DISABLED ROOT    REDIRECT PERMANENT MAIL HTTPS:WWW.REPPEP.COMMAIL<VIRTUALHOST>[SNIP]<VIRTUALHOST 66.92.104.200:80>    SERVERADMIN RACHEL@REPPEP.COM    DOCUMENTROOT HOMERACHELPUBLIC_HTML    SERVERNAME WWW.XANNY.NET:80    SERVERALIAS XANNY.NET    CUSTOMLOG |USRLOCALSBINCRONOLOG VARLOGHTTPDXANNY-%Y-%M-ACCESS_LOG COMBINED<VIRTUALHOST 66.92.104.200:80>    SERVERADMIN BJORN@REPPEP.COM    DOCUMENTROOT HOMEBJORNPUBLIC_HTML    SERVERNAME WWW.XOAUDIO.COM:80    SERVERALIAS XOAUDIO.COM WWW.XOXOAUDIO.COM XOXOAUDIO.COM    CUSTOMLOG |USRLOCALSBINCRONOLOG VARLOGHTTPDXOAUDIO-%Y-%M-ACCESS_LOG COMBINED<VIRTUALHOST>","SUMMARY":"MISSING <VIRTUALHOST> IN INCLUDED FILE CAUSES SEGFAULT","CLASS":1}
{"ID_DEFECT":"17206","DESCRIPTION":"WE UPDATED ONE OF OUR SERVERS FROM APACHE-2.0.39 TO APACHE-2.0.44 AND NOTICED THAT 2.0.44 FAILS TO CLOSE THE FILE HANDLES OF THE LOGFILES BEFORE EXECUTING CGI SCRIPTS.WE TEST BY RUNNING A PHP SCRIPT VIA THE CGI INTERFACE AND USING LSOF TO LIST THE OPEN FILE HANDLES. (SEE BELOW)THIS ENABLES CGIS TO ACCESS THE LOGS OF OTHER VIRTUAL HOSTS.WE CAN REPRODUCE THIS UNDER FREEBSD 4-STBALE AND 5.0 RELEASEUSING THE PREFORKED MPM AND APACHE-2.0.40, 2.0.43 AND 2.0.44.THE PROBLEM DOES NOT OCCUR ON APACHE-2.0.39.  WE THINK THIS BUG MIGHT BE RELATED TO BUG 12774 WHICH WAS CLOSEDDUE TO LACK OF RESPONSE FROM THE ORIGINAL POSTER.  THIS WAS ALSO OING FROM 2.0.39 TO 2.0.40.THIS COULD ALSO BE RELATED TO THE CHANGES IN APRFILE_IOSRCUNIXFILE_DUP.CFROM 1.48 TO 1.49 AND THE INTRODUCTION OF APR_FILE_SETASIDE().   THESE CHANGES WERE AFTER 2.0.39 AND BEFORE 2.0.40.GREETINGSCHRISTIAN KRATZERCK SOFTWARE GMBH--SNIPP--COMMAND  PID    USER   FD   TYPE     DEVICE SIZEOFF    NODE NAMEPHP     3308 WEBMAIL  CWD   VDIR 151,131079      512 1474242U1JAILSJAIL-WEBMAILWWWSERVERSWEBMAILHTDOCSPHP     3308 WEBMAIL  RTD   VDIR 151,131079      512 1291924 U1JAILSJAIL-WEBMAILPHP     3308 WEBMAIL  TXT   VREG 151,131079  1343042 1473554U1JAILSJAIL-WEBMAILWWWCGI-PHPPHPPHP     3308 WEBMAIL  TXT   VREG 151,131079    80080 1293805U1JAILSJAIL-WEBMAILUSRLIBEXECLD-ELF.SO.1PHP     3308 WEBMAIL  TXT   VREG 151,131079   749398 1473486U1JAILSJAIL-WEBMAILUSRLOCALLIBLIBC-CLIENT4.SO.8PHP     3308 WEBMAIL  TXT   VREG 151,131079   126427 1452224U1JAILSJAIL-WEBMAILUSRLOCALLIBLIBEXPAT.SO.4PHP     3308 WEBMAIL  TXT   VREG 151,131079    19544 1292898U1JAILSJAIL-WEBMAILUSRLIBLIBHISTORY.SO.4PHP     3308 WEBMAIL  TXT   VREG 151,131079   147000 1292903U1JAILSJAIL-WEBMAILUSRLIBLIBREADLINE.SO.4PHP     3308 WEBMAIL  TXT   VREG 151,131079   258872 1292446U1JAILSJAIL-WEBMAILUSRLIBLIBNCURSES.SO.5PHP     3308 WEBMAIL  TXT   VREG 151,131079    85712 1473115U1JAILSJAIL-WEBMAILUSRLOCALLIBLIBPQ.SO.3PHP     3308 WEBMAIL  TXT   VREG 151,131079   132379 1473270U1JAILSJAIL-WEBMAILUSRLOCALLIBMYSQLLIBMYSQLCLIENT.SO.10PHP     3308 WEBMAIL  TXT   VREG 151,131079    51156 1292749U1JAILSJAIL-WEBMAILUSRLIBLIBZ.SO.2PHP     3308 WEBMAIL  TXT   VREG 151,131079    28480 1292428U1JAILSJAIL-WEBMAILUSRLIBLIBCRYPT.SO.2PHP     3308 WEBMAIL  TXT   VREG 151,131079   192724 1452773U1JAILSJAIL-WEBMAILUSRLOCALLIBLIBLDAP.SO.2PHP     3308 WEBMAIL  TXT   VREG 151,131079    47937 1452770U1JAILSJAIL-WEBMAILUSRLOCALLIBLIBLBER.SO.2PHP     3308 WEBMAIL  TXT   VREG 151,131079    38500 1292702U1JAILSJAIL-WEBMAILUSRLIBLIBPAM.SO.1PHP     3308 WEBMAIL  TXT   VREG 151,131079   908698 1473181U1JAILSJAIL-WEBMAILUSRLOCALLIBLIBICONV.SO.3PHP     3308 WEBMAIL  TXT   VREG 151,131079   211156 1473420U1JAILSJAIL-WEBMAILUSRLOCALLIBLIBGD.SO.4PHP     3308 WEBMAIL  TXT   VREG 151,131079   340310 1473287U1JAILSJAIL-WEBMAILUSRLOCALLIBLIBFREETYPE.SO.9PHP     3308 WEBMAIL  TXT   VREG 151,131079   139364 1472995U1JAILSJAIL-WEBMAILUSRLOCALLIBLIBPNG.SO.5PHP     3308 WEBMAIL  TXT   VREG 151,131079   135696 1473155U1JAILSJAIL-WEBMAILUSRLOCALLIBLIBJPEG.SO.9PHP     3308 WEBMAIL  TXT   VREG 151,131079   117736 1292433U1JAILSJAIL-WEBMAILUSRLIBLIBM.SO.2PHP     3308 WEBMAIL  TXT   VREG 151,131079   762896 1293883U1JAILSJAIL-WEBMAILUSRLIBLIBCRYPTO.SO.2PHP     3308 WEBMAIL  TXT   VREG 151,131079   181720 1293903U1JAILSJAIL-WEBMAILUSRLIBLIBSSL.SO.2PHP     3308 WEBMAIL  TXT   VREG 151,131079   575584 1292596U1JAILSJAIL-WEBMAILUSRLIBLIBC.SO.4PHP     3308 WEBMAIL    0U  PIPE 0XF08BB4E0    16384PHP     3308 WEBMAIL    1U  PIPE 0XEBA05BC0    16384         ->0XF08BB760PHP     3308 WEBMAIL    2U  PIPE 0XEBCB63A0    16384         ->0XEBA03960PHP     3308 WEBMAIL    4U  PIPE 0XEBA03A00    16384         ->0XEB666A00PHP     3308 WEBMAIL    5U  PIPE 0XEB666A00    16384         ->0XEBA03A00PHP     3308 WEBMAIL    6U  VREG 151,131079     4519 1474234U1JAILSJAIL-WEBMAILWWWLOGSHTTPD-ERROR.LOGPHP     3308 WEBMAIL    7U  VREG 151,131079        0 1474628U1JAILSJAIL-WEBMAILWWWSERVERSWEBMAIL109LOGSHTTPD-ERROR.LOGPHP     3308 WEBMAIL    8U  VREG 151,131079        0 1474629U1JAILSJAIL-WEBMAILWWWSERVERSWEBMAIL108LOGSHTTPD-ERROR.LOGPHP     3308 WEBMAIL    9U  VREG 151,131079        0 1474630U1JAILSJAIL-WEBMAILWWWSERVERSWEBMAIL107LOGSHTTPD-ERROR.LOGPHP     3308 WEBMAIL   10U  VREG 151,131079        0 1474631U1JAILSJAIL-WEBMAILWWWSERVERSWEBMAIL106LOGSHTTPD-ERROR.LOGPHP     3308 WEBMAIL   11U  VREG 151,131079        0 1474632U1JAILSJAIL-WEBMAILWWWSERVERSWEBMAIL105LOGSHTTPD-ERROR.LOGPHP     3308 WEBMAIL   12U  VREG 151,131079        0 1474633U1JAILSJAIL-WEBMAILWWWSERVERSWEBMAIL104LOGSHTTPD-ERROR.LOGPHP     3308 WEBMAIL   13U  VREG 151,131079        0 1474634U1JAILSJAIL-WEBMAILWWWSERVERSWEBMAIL103LOGSHTTPD-ERROR.LOGPHP     3308 WEBMAIL   14U  VREG 151,131079        0 1474635U1JAILSJAIL-WEBMAILWWWSERVERSWEBMAIL102LOGSHTTPD-ERROR.LOGPHP     3308 WEBMAIL   15U  VREG 151,131079        0 1474636U1JAILSJAIL-WEBMAILWWWSERVERSWEBMAIL101LOGSHTTPD-ERROR.LOGPHP     3308 WEBMAIL   16U  VREG 151,131079        0 1474637U1JAILSJAIL-WEBMAILWWWSERVERSWEBMAIL100LOGSHTTPD-ERROR.LOGPHP     3308 WEBMAIL   17U  VREG 151,131079     2109 1474254U1JAILSJAIL-WEBMAILWWWSERVERSWEBMAILLOGSHTTPD-ERROR.LOGPHP     3308 WEBMAIL   18W  VREG 151,131079      675 1474236U1JAILSJAIL-WEBMAILWWWLOGSHTTPD-ACCESS.LOGPHP     3308 WEBMAIL   19W  VREG 151,131079        0 1474638U1JAILSJAIL-WEBMAILWWWSERVERSWEBMAIL109LOGSHTTPD-ACCESS.LOGPHP     3308 WEBMAIL   20W  VREG 151,131079        0 1474639U1JAILSJAIL-WEBMAILWWWSERVERSWEBMAIL108LOGSHTTPD-ACCESS.LOGPHP     3308 WEBMAIL   21W  VREG 151,131079        0 1474640U1JAILSJAIL-WEBMAILWWWSERVERSWEBMAIL107LOGSHTTPD-ACCESS.LOGPHP     3308 WEBMAIL   22W  VREG 151,131079        0 1474641U1JAILSJAIL-WEBMAILWWWSERVERSWEBMAIL106LOGSHTTPD-ACCESS.LOGPHP     3308 WEBMAIL   23W  VREG 151,131079        0 1474642U1JAILSJAIL-WEBMAILWWWSERVERSWEBMAIL105LOGSHTTPD-ACCESS.LOGPHP     3308 WEBMAIL   24W  VREG 151,131079        0 1474643U1JAILSJAIL-WEBMAILWWWSERVERSWEBMAIL104LOGSHTTPD-ACCESS.LOGPHP     3308 WEBMAIL   25W  VREG 151,131079        0 1474644U1JAILSJAIL-WEBMAILWWWSERVERSWEBMAIL103LOGSHTTPD-ACCESS.LOGPHP     3308 WEBMAIL   26W  VREG 151,131079        0 1474645U1JAILSJAIL-WEBMAILWWWSERVERSWEBMAIL102LOGSHTTPD-ACCESS.LOGPHP     3308 WEBMAIL   27W  VREG 151,131079        0 1474646U1JAILSJAIL-WEBMAILWWWSERVERSWEBMAIL101LOGSHTTPD-ACCESS.LOGPHP     3308 WEBMAIL   28W  VREG 151,131079        0 1474647U1JAILSJAIL-WEBMAILWWWSERVERSWEBMAIL100LOGSHTTPD-ACCESS.LOGPHP     3308 WEBMAIL   29W  VREG 151,131079     7821 1474255U1JAILSJAIL-WEBMAILWWWSERVERSWEBMAILLOGSHTTPD-ACCESS.LOG--SNIPP--","SUMMARY":"FILEHANDLES OF LOGS NOT CLOSED BEFORE EXEC OF CGI SCRIPTS","CLASS":1}
{"ID_DEFECT":"18170","DESCRIPTION":"THIS ERROR IS IN HTTPD-2.0.44SERVERPROTOCOL.C, IN AP_GET_MIME_HEADERS_CORE().IT APPEARS TO BE NON-PLATFORM AND NON-OS SPECIFIC.WHEN SENDING A REQUEST OF THE FORMGET EXAMPLESSERVLETREQUESTHEADEREXAMPLE HTTP1.0CONTENT-TYPE: MULTIPARTRELATED; TYPE=TEXTXML;        BOUNDARY=----=_PART_9_24374438.1048047839137SOAPACTION: EBXMLHOST: CHMEEE...WHERE THE HEADER IS WRAPPED, AND IS A MULTIPLE OF EIGHT BYTES LONG WHENUNWRAPPED (AS IN THE CONTENT-TYPE HEADER HERE, WHICH HAS A TRAILING SPACE ON THEFIRST LINE AND A LEADING TAB ON THE SECOND LINE), THE CODE APPENDS THE SECONDLINE TO THE FIRST LINE. HOWEVER, THE MEMORY ALLOCATION DOES NOT ALLOW FOR THETRAILING 0 IN THE NEW STRING, SO ONE LESS BYTE IS ALLOCATED THAN SHOULD BE.WHEN THE NEXT HEADER IS READ, AND MEMORY IS ALLOCATED FOR IT, IT THEREFOREOVERWRITES THE 0 AT THE END OF THE CONTENT-TYPE VALUE, MAKING IT BECOMEMULTIPARTRELATED; TYPE=TEXTXML;     BOUNDARY=----=_PART_9_24374438.1048047839137SOAPACTIONBECAUSE APR_PALLOC ALLOCATES MEMORY IN SIZES OF MULTIPLES OF 8 (SEEAPR_ALIGN_DEFAULT), THIS BUG DOES NOT SHOW UP IF THE WRAPPED VALUE IS NOT AMULTIPLE OF 8, SINCE THE PADDING PROVIDES SPACE FOR THE TRAILING 0.THIS BUG CANNOT BE WORKED AROUND, SINCE THE HEADERS IN THIS CASE ARE GENERATEDBY SUNS SAAJ CLASSES AND CANNOT BE MODIFIED TO AVOID TRIGGERING THIS BUG, HENCETHE BLOCKER SEVERITY.TESTED PATCH:$ DIFF ORIGINAL-PROTOCOL.C HTTPD-2.0.44SERVERPROTOCOL.C807,808C807,808<                     IF (LAST_LEN + LEN > ALLOC_LEN) <                         ALLOC_LEN = LAST_LEN + LEN;--->                     IF (LAST_LEN + LEN + 1 > ALLOC_LEN) >                         ALLOC_LEN = LAST_LEN + LEN + 1;","SUMMARY":"MEMORY ALLOCATION FOR WRAPPED HTTP HEADER IS INCORRECT","CLASS":1}
{"ID_DEFECT":"19175","DESCRIPTION":"MINOR TYPO FOUND IN HTTPD.CONFERRORCODES 415 AND 503 POINTS TO SAME FILE.#    ERRORDOCUMENT 415 ERRORHTTP_SERVICE_UNAVAILABLE.HTML.VAR#    ERRORDOCUMENT 503 ERRORHTTP_SERVICE_UNAVAILABLE.HTML.VAR","SUMMARY":"TWO ERRORCODES POINT TO SAME ERRORDOCUMENT","CLASS":1}
{"ID_DEFECT":"19207","DESCRIPTION":"HTTP:[3FFE:B00:4041:ACE0:260:F8FF:FE03:BC9]RESOURCES SHOULD REDIRECT TOHTTP:[3FFE:B00:4041:ACE0:260:F8FF:FE03:BC9]RESOURCES  (ADD SLASH).INTSTEAD IT SEEMS TO REDIRECT TO:HTTP:3FFE:B00:4041:ACE0:260:F8FF:FE03:BC9RESOURCES  (REMOVE SQUARE BRACKETSAND ADD SLASH).THIS, OF COURSE, DOES NOT RESOLVE.","SUMMARY":"REDIRECTION BROKEN UNDER IPV6","CLASS":1}
{"ID_DEFECT":"19611","DESCRIPTION":"THE GENERATED SSL.CONF AND HTTPD.CONF FILES EACH DEFINE DOCUMENTROOT,BUT THEY DO IT DIFFERENTLY, AND UNLESS THE INSTALLATION IS BUILTTO MAKE THE DOCUMENTROOT BE SERVERROOTHTDOCS, THEY WILL NOT MATCH.UNTIL ONE OF THEM IS HAND-EDITED.APPARENT FIXES WOULD BE TO EITHER GENERATE DOCUMENTROOT IN SSL.CONFTO BE THE SAME AS IN HTTPD.CONF, OR PERHAPS BETTER, TO OMIT THEDOCUMENTROOT LINE ENTIRELY FROM SSL-STD.CONF.CRIS@CRISP4 HTTPD-2.0.45]$ GREP DOCUMENTROOT DOCSCONFSSL-STD.CONFDOCUMENTROOT @@SERVERROOT@@HTDOCS[CRIS@CRISP4 HTTPD-2.0.45]$ GREP DOCUMENTROOT DOCSCONFHTTPD-STD.CONF.INDOCUMENTROOT @EXP_HTDOCSDIR@","SUMMARY":"SSL.CONF DOCUMENTROOT DOES NOT MATCH HTTPD.CONF","CLASS":1}
{"ID_DEFECT":"24884","DESCRIPTION":"I MADE A LOT OF TEST WITH APACHE 2.0.48 COMPILED ON HP-UX 11.00 AND WITH THEAPACHE INCLUDED IN MANDRAKELINUX 9.1.WHEN I DO A GET AND OBTAIN A 200 IN THE REPLY THERE ARE THE CACHE HEADERS, BUTWHEN THE REPLY IS 304 THERE IS NO WAY HAVE THEESE HEADERS. SO WHEN THE BROWSERSCACHE EXPIRES, THE EXPIRE-DATE IS NOT UPDATED MORE. FOR EACH PAGE I OBTAIN A 304FOR EACH ELEMENT FOR EVER...EXAMPLE:THE REQUEST:GET TEST.HTML HTTP1.1ACCEPT: **ACCEPT-LANGUAGE: ITACCEPT-ENCODING: GZIP, DEFLATEIF-MODIFIED-SINCE: THU, 20 NOV 2003 11:54:42 GMTIF-NONE-MATCH: 12A-A0006480USER-AGENT: MOZILLA4.0 (COMPATIBLE; MSIE 6.0)HOST: 10.254.3.20CONNECTION: KEEP-ALIVETHE 304 (EXPIRE-DATE IS NOT UPDATED):HTTP1.1 304 NOT MODIFIEDDATE: FRI, 21 NOV 2003 09:40:43 GMTSERVER: APACHECONNECTION: KEEP-ALIVEKEEP-ALIVE: TIMEOUT=10, MAX=8ETAG: 12A-A0006480THE 200 (THE CACHE IS UPDATED):HTTP1.1 200 OKDATE: FRI, 21 NOV 2003 09:40:43 GMTSERVER: APACHELAST-MODIFIED: THU, 20 NOV 2003 11:54:42 GMTETAG: 12A-A0006480ACCEPT-RANGES: BYTESCONTENT-LENGTH: 298CACHE-CONTROL: MAX-AGE=86400EXPIRES: SAT, 22 NOV 2003 09:40:33 GMTKEEP-ALIVE: TIMEOUT=10, MAX=10CONNECTION: KEEP-ALIVECONTENT-TYPE: TEXTHTML; CHARSET=ISO-8859-1DATA (298 BYTES)I THINK THERE IS A PROBLEM IN MOD_EXPIRES...THANKSFABIO","SUMMARY":"WHEN THE RESPONSE IS 304 APACHE DOESNT INCLUDE CACHE HEADERS","CLASS":1}
{"ID_DEFECT":"25414","DESCRIPTION":"<LIMIT> AND <LIMITEXCEPT> DO NOT REQUIRE A CLOSING > IN THE INITIAL CONTAINER. THAT IS<LIMIT GET POST...<LIMIT>IS CURRENTLY ACCEPTED AS VALID.  PATCHAVAILABLE.INDEX: SERVERCORE.C===================================================================RCS FILE: HOMECVSPUBLICHTTPD-2.0SERVERCORE.C,VRETRIEVING REVISION 1.252DIFF -U -R1.252 CORE.C--- SERVERCORE.C       21 NOV 2003 15:02:04 -0000      1.252+++ SERVERCORE.C       10 DEC 2003 17:16:59 -0000@@ -1552,11 +1552,21 @@     RETURN NULL;   +*+ * REPORT A MISSING-> SYNTAX ERROR.+ *+STATIC CHAR *UNCLOSED_DIRECTIVE(CMD_PARMS *CMD)++    RETURN APR_PSTRCAT(CMD->POOL, CMD->CMD->NAME,+                       > DIRECTIVE MISSING CLOSING >, NULL);++ AP_CORE_DECLARE_NONSTD(CONST CHAR *) AP_LIMIT_SECTION(CMD_PARMS *CMD,                                                       VOID *DUMMY,                                                       CONST CHAR *ARG) -    CONST CHAR *LIMITED_METHODS = AP_GETWORD(CMD->POOL, &ARG, >);+    CONST CHAR *ENDP = AP_STRRCHR_C(ARG, >);+    CONST CHAR *LIMITED_METHODS;     VOID *TOG = CMD->CMD->CMD_DATA;     APR_INT64_T LIMITED = 0;     CONST CHAR *ERRMSG;@@ -1566,6 +1576,12 @@         RETURN ERR;       +    IF (ENDP == NULL) +        RETURN UNCLOSED_DIRECTIVE(CMD);+    ++    LIMITED_METHODS = APR_PSTRNDUP(CMD->POOL, ARG, ENDP - ARG);+     WHILE (LIMITED_METHODS[0])          CHAR *METHOD = AP_GETWORD_CONF(CMD->POOL, &LIMITED_METHODS);         INT METHNUM;@@ -1609,15 +1625,6 @@ #ELSE #DEFINE USE_ICASE 0 #ENDIF--*- * REPORT A MISSING-> SYNTAX ERROR.- *-STATIC CHAR *UNCLOSED_DIRECTIVE(CMD_PARMS *CMD)--    RETURN APR_PSTRCAT(CMD->POOL, CMD->CMD->NAME,-                       > DIRECTIVE MISSING CLOSING >, NULL);-   STATIC CONST CHAR *DIRSECTION(CMD_PARMS *CMD, VOID *MCONFIG, CONST CHAR *ARG) ","SUMMARY":"CAPTURE MALFORMED <LIMIT DIRECTIVES","CLASS":1}
{"ID_DEFECT":"25460","DESCRIPTION":"THIS WAS FIRST POSTED ON HTTPD-DEVHTTP:MARC.THEAIMSGROUP.COM?T=107089936600004&R=1&W=2CURRENTLY, ALL CORE CONTAINER DIRECTIVES HAVE AN ISSUE (ALBEIT A MINOR ONE)- THEY REQUIRE AN ARGUMENT IN PRACTICE BUT ARE ALLOWED TO PROCEED WITHOUTONE DURING CONFIGURATION.FOR EXAMPLE<IFMODULE >DOES NOT CURRENTLY THROW AN ERROR.  INSTEAD, THE CONFIG IS ALLOWED TOPROCEED, SOAKING UP THE CONTAINER.  MORE DETAILS ARE AVAILABLE WITHIN THE THREAD.THERE HAS BEEN DISCUSSION ON HTTPD-DEV WHETHER <IFDEFINE > SHOULD BE ALLOWED,EQUALLY SPLIT BETWEEN THE TWO PEOPLE WHO VOICED THEIR OPINION.THIS PATCH ATTEMPTS TO BRIDGE THE GAP, REQUIRING THAT CORE CONTAINERS SPECIFYARGUMENTS, WHILE <IFDEFINE 0> IS GUARANTEED TO NEVER BE TRUE (-D0 BECOMESINVALID, SIMILAR TO -D), THUS PROVIDING A MIGRATION PATH AWAY FROM <IFDEFINE >.","SUMMARY":"<IFDEFINE >, <IFMODULE > ARE VALID SYNTAX","CLASS":1}
{"ID_DEFECT":"27189","DESCRIPTION":"SPECIFYING A SCOREBOARDFILE CAUSES APACHE TO EXIT WITH THE FOLLOWING IN THEERROR_LOG:[TUE FEB 24 09:09:01 2004] [CRIT] (17)FILE EXISTS: UNABLE TO CREATE SCOREBOARDUSRLOCALAPACHE2LOGSAPACHE_RUNTIME_STATUS (NAME-BASED SHARED MEMORY FAILURE)THE RELEVANT SECTION FROM MY HTTPD.CONF:  <IFMODULE !PERCHILD.C>    SCOREBOARDFILE LOGSAPACHE_RUNTIME_STATUS  <IFMODULE>LOOKING AT SERVERSCOREBOARD.C, THERES A COMMENT:    * THE SHARED MEMORY FILE MUST NOT EXIST BEFORE WE CREATE THE     * SEGMENT. *THE SCOREBOARD FILE HAS DEFINITELY BEEN CREATED AT THIS POINT THOUGH -- I TRIEDDELETING IT JUST BEFORE STARTING THE SERVER, AND THE CRASH STILL OCCURS, WITH ANEW SCOREBOARD IN LOGSAPACHE_RUNTIME_STATUS.IF I COMMENT OUT THE SCOREBOARDFILE DIRECTIVE, THE SERVER STARTS FINE, AND NOSCOREBOARD FILE IS CREATED (AS EXPECTED).INFO FROM MY BUILD:# CD USRLOCALAPACHE2# .BINHTTPD -VSERVER VERSION: APACHE2.0.48SERVER BUILT:   FEB 19 2004 11:07:53SERVERS MODULE MAGIC NUMBER: 20020903:4ARCHITECTURE:   32-BITSERVER COMPILED WITH.... -D APACHE_MPM_DIR=SERVERMPMPREFORK -D APR_HAS_SENDFILE -D APR_HAS_MMAP -D APR_HAVE_IPV6 (IPV4-MAPPED ADDRESSES ENABLED) -D APR_USE_SYSVSEM_SERIALIZE -D APR_USE_PTHREAD_SERIALIZE -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT -D APR_HAS_OTHER_CHILD -D AP_HAVE_RELIABLE_PIPED_LOGS -D HTTPD_ROOT=USRLOCALAPACHE2 -D SUEXEC_BIN=USRLOCALAPACHE2BINSUEXEC -D DEFAULT_PIDLOG=LOGSHTTPD.PID -D DEFAULT_SCOREBOARD=LOGSAPACHE_RUNTIME_STATUS -D DEFAULT_LOCKFILE=LOGSACCEPT.LOCK -D DEFAULT_ERRORLOG=LOGSERROR_LOG -D AP_TYPES_CONFIG_FILE=CONFMIME.TYPES -D SERVER_CONFIG_FILE=CONFHTTPD.CONF# .BINHTTPD -LCOMPILED IN MODULES:  CORE.C  MOD_ACCESS.C  MOD_AUTH.C  MOD_AUTH_DIGEST.C  MOD_INCLUDE.C  MOD_LOG_CONFIG.C  MOD_ENV.C  MOD_SETENVIF.C  MOD_SSL.C  PREFORK.C  HTTP_CORE.C  MOD_MIME.C  MOD_DAV.C  MOD_STATUS.C  MOD_AUTOINDEX.C  MOD_ASIS.C  MOD_CGI.C  MOD_DAV_FS.C  MOD_DIR.C  MOD_ACTIONS.C  MOD_USERDIR.C  MOD_ALIAS.C  MOD_REWRITE.C  MOD_SO.C","SUMMARY":"SPECIFYING SCOREBOARDFILE CAUSES EXIT IN 2.0.48","CLASS":1}
{"ID_DEFECT":"27649","DESCRIPTION":"WHEN REQUESTING A BYTE RANGE WHICH STARTS AT A BIGGER OFFSET THAN 2GB ITS DENIED WITH 403.ERROR.LOG STATES:[<DATE>] [ERROR] [CLIENT <IP>] (75)VALUE TOO LARGE FOR DEFINED DATA TYPE: ACCESS TO <FILENAME> FAILEDPROBABLY AN INT32 NEEDS TO CONVERTED TO INT64.","SUMMARY":"NO RESUME AFTER 2GB","CLASS":1}
{"ID_DEFECT":"27927","DESCRIPTION":"WHEN MULTIPLE FILE BUCKETS EXIST IN A BRIGADE THAT IS TO BE SENT OUT ANDEMULATE_SENDFILE() IS USED TO DO IT, SOME BUCKETS MAY BE MISALIGNED (I.E. THEOUTPUT WILL APPEAR GARBLED). THE ISSUE IS RELATED TO A MISSING APR_FILE_SEEK()CALL WHEN OFFSET IS 0 (I.E. EMULATE_SENDFILE() INCORRECTLY ASSUMES THAT IT IS ATTHE BEGINNING OF THE FILE).THE PATCH THAT FIXES THAT PROBLEM IS ATTACHED.","SUMMARY":"MULTIPLE FILE BUCKETS DELIVERED INCORRECTLY BY EMULATE_SENDFILE","CLASS":1}
{"ID_DEFECT":"28063","DESCRIPTION":"* KILL REMAINING THREADS OFF THE HARD WAY *    IF (THREADS_CREATED)         AP_LOG_ERROR(APLOG_MARK,APLOG_NOTICE, APR_SUCCESS, AP_SERVER_CONF,                      CHILD %D: TERMINATING %D THREADS THAT FAILED TO EXIT.,MY_PID);SHOULD BE ==>>>      CHILD %D: TERMINATING %D THREADS THAT FAILED TO EXIT.,MY_PID, THREADS_CREATED);        FOR (I = 0; I < THREADS_CREATED; I++)         INT *SCORE_IDX;        TERMINATETHREAD(CHILD_HANDLES[I], 1);        CLOSEHANDLE(CHILD_HANDLES[I]);        * RESET THE SCOREBOARD ENTRY FOR THE THREAD WE JUST WHACKED *        SCORE_IDX = APR_HASH_GET(HT, &CHILD_HANDLES[I], SIZEOF(HANDLE));SHOULD INSERT ===> IF (SCORE_IDX != NULL)        AP_UPDATE_CHILD_STATUS_FROM_INDEXES(0, *SCORE_IDX, SERVER_DEAD, NULL);           ","SUMMARY":"MISSING PARAMETER IN AP_LOG_ERROR AND LACK OF NULL CHECKING IN CHILD.C:1051","CLASS":1}
{"ID_DEFECT":"28459","DESCRIPTION":"FIRST I MUST ADMIT THAT ITS VERY SURPRISING TO ME, CONSIDERING THERE ARE MORETHAN 400 MILLION POTENTIONAL USERS, THAT NOBODY HAS REPORTED THIS ISSUE.NONE OF MOZILLA 1.5, MOZILLA 1.6, AND KONQUEROR 3.1.3 (WHICH TO MY KNOWLEDGE ISNOT GECKO BASED AND THUS MAKES ME BELIEVE THAT THIS ACTUALLY IS AN ERROR INAPACHE) DO RENDER &EXCL; AS !. SEE TITLE OF SPANISH (ES) TRANSLATIONS. IS &EXCL; REALLY AN ACKNOWLEDGED NAME FOR REPRESENTING A ! (I.E. &#033;)?OTHER LANGUAGES USE THE EXCLAMATION MARK ! EXPLICITLY IN THEIR TRANSLATIONS,E.G. GERMAN, FRENCH, SWEDISH, ETC.THEREFORE AN EXPLICIT EXCLAMATION MARK ! SHOULD BE FINE FOR SPANISH TOO.BEST REGARDS,ROLF SPONSEL","SUMMARY":"CUSTOMIZABLE ERROR DOCUMENTS; SPANISH TRANSLATIONS USE &EXCL; INSTEAD OF ! TO REPRESENT AN EXCLAMATION MARK.","CLASS":1}
{"ID_DEFECT":"28523","DESCRIPTION":"THE CORE FUNCTION AP_SET_SUB_REQ_PROTOCOL IS NOT EXPORTED FOR WIN32 BUILDS OFAPACHE 2, BUT IS ON UNIX BUILDS.AP_DECLARE SHOULD BE WRAPPED AROUND THE VOID ON LINE 983 OF SERVERPROTOCOL.C-AP_SET_SUB_REQ_PROTOCOL(REQUEST_REC *RNEW, CONSTREQUEST_REC *R)+AP_DECLARE(VOID) AP_SET_SUB_REQ_PROTOCOL(REQUEST_REC *RNEW, CONSTREQUEST_REC *R)I AM USING THIS FUNCTION IN MY MOD_FTPD MODULE AT THE URL IN THE BUG REPORT. SVNREPOSITORY IS HERE.. HTTP:SVN.OUTOFORDER.CCSVNMOD_FTPDTRUNK WHERE I HAVEMY *QUICK HACK* TO GET IT COMPILING ON WIN32 BY INCLUDING THAT FUNCTION IN ASEPARATE FILE (WIN32.C).","SUMMARY":"AP_SET_SUB_REQ_PROTOCOL NOT EXPORTED ON WIN32","CLASS":1}
{"ID_DEFECT":"29106","DESCRIPTION":"HI.IM USING APACHE 2.0.49 WITH MOD_PHP 4.3.4 ON GENTOO LINUX (X86).MY CONFMODULES.D70_MOD_PHP.CONF DEFINES LIMITREQUESTBODY AS FOLLOWS:--- CUT HERE ---    # FIX SOME BUGS    <FILES *.PHP>          LIMITREQUESTBODY 524288        REQUESTHEADER UNSET IF-MODIFIED-SINCE    <FILES>    <FILES *.PHP3>          LIMITREQUESTBODY 524288        REQUESTHEADER UNSET IF-MODIFIED-SINCE    <FILES>    <FILES *.PHP4>          LIMITREQUESTBODY 524288        REQUESTHEADER UNSET IF-MODIFIED-SINCE    <FILES>    <FILES *.PHPS>          LIMITREQUESTBODY 524288        REQUESTHEADER UNSET IF-MODIFIED-SINCE    <FILES>    <FILES *.PHTML>          LIMITREQUESTBODY 524288        REQUESTHEADER UNSET IF-MODIFIED-SINCE    <FILES>--- CUT HERE ---IT IS NOT SET ELSEWHERE. NOW I WANT TO ALLOW UPLOAD OF ARBITRARILY LARGE FILESIN ONE DIRECTORY ON ONE VIRTUAL HOST (THERE IS A PHP APPLICATION (EGROUPWARE)RUNNING IN THIS DIRECTORY) BUT SETTING LIMITREQUESTBODY TO 0 JUST DOESNT WORK.ASTRID KEU00DFLER TOLD ME ON USERS-DE@HTTPD.APACHE.ORG [1] THAT THIS IS A BUG IN APACHE.[1] HTTP:MARC.THEAIMSGROUP.COM?L=APACHE-HTTPD-USERS-DE&M=108500058222033&W=2","SUMMARY":"RESETTING LIMITREQUESTBODY TO 0 (NO LIMIT) DOESNT WORK","CLASS":1}
{"ID_DEFECT":"29503","DESCRIPTION":"HTTPD 2.0.49 WILL SEGFAULT IF YOU DO NOT SPECIFY A LISTEN DIRECTIVE IN THE CONFIGURATION FILE.  IN PREVIOUS VERSIONS THERE WAS A NICE ERROR MESSAGE THAT WARNED YOU OF THIS AND THEN EXITED.  THE SEGFAULT OCCURS IN THE FUNCTION AP_LISTEN_OPEN IN SERVERLISTEN.C, LINE 338.  IF THERE IS NO LISTEN STATEMENT IN THE CONFIG FILE, THEN AP_LISTEN_OPEN TRIES TO WALK THRU THE LINKED LIST OF LISTENERS ANYWAYS.  PLEASE ADD ERROR HANDLING FOR THE CASE THAT THIS DIRECTIVE ISNT SPECIFIED AND ADD AN ASSERT TO THE FUNCTION OR CHANGE LINE 338 TO IF (AP_LISTENERS && AP_LISTENERS->NEXT) ","SUMMARY":"HTTPD SEGFAULT DUE TO BAD CONFIG FILE ERROR HANDLING","CLASS":1}
{"ID_DEFECT":"30732","DESCRIPTION":"IF YOU RUN ANY OF THE DEFAULT ERROR PAGES THROUGH THE W3CS VALIDATOR YOU WILLFIND THEY ARE NOT VALID.","SUMMARY":"DEFAULT ERROR PAGES ARE NOT VALID HTML","CLASS":1}
{"ID_DEFECT":"31226","DESCRIPTION":"I USE APACHE 2.0 TO HAVE A REVERSE PROXY WEB SERVER THATCOMPRESS WITH MOD_DEFLATE THE WEB PAGES IN DIRECTION OF THE USERS.APPLICATIONS BEHIND (ON APPLICATION PROXIFIED SERVER) GENERATE :- TEXTHTML DOCUMENT- APPLICATIONPDF OR OTHERS LIKE JPG DOCUMENT BOTH USING AN URL SUCH AS HTTP:MYREVERSEPROXYAPPLICATIONAPPLICATION.EXEOR APPLICATION.PHP WHATEVER LIKE THIS.THE URL IS ALWAYS THE SAME FOR ONE APPLICATION, ONLY THE CONTEXT (SESSION)IMPLIES THE ANSWEAR (HTML OR PDF DOCUMENT).WE WANT TO COMPRESS DOCUMENT WITH TYPE MIME = TEXT, BUT NOT THOSEWITH JPG OR PDF TYPE MIME.BUT HERE IS THE PROBLEM, WITH PROXYPASS AND PROXYPASSREVERSE :1) USING SETOUTPUTFILTER DEFLATE IMPLIES THAT EVERYTHING IS COMPRESSEDEVEN IF THE MIME TYPE IS A PDF OR JPG SINCE THE EXCLUSION CAN BE BASED ONLY ON URL, WHICH IS NOT POSSIBLE HERE.WE CAN EXCLUDE FILES LIKE HTTP:MYREVERSEPROXYAPPLICATIONIMAGE.JPGBUT NOT THE SAME JPG CREATE DYNAMICALLY BY HTTP:MYREVERSEPROXYAPPLICATIONAPPLICATION.EXE2) USING ADDOUTPUTFILTERBYTYPE DEFLATE TEXTHTML TEXTPLAINCOMPRESSED NOTHING AT ALL, NEITHER HTML NEITHER PDF OR JPG.AND ACCORDINGLY TO THE DOCUMENTATION AND SOURCES ON THE WEB,THIS SECOND SOLUTION SHOULD BE THE CORRECT ONE.EVERY MIME TYPES ARE DEFINED AND OK, THE RETURNED DOCUMENTSARE USING THE CORRECT MIME TYPE (TEXTHTML, APPLICATIONPDF, ...).I FOUND NOT MUCH INFORMATION ON THE WEB ON A REVERSE PROXY WITHCOMPRESSION AT THE SAME TIME.IT IS QUITE A BIG PROBLEM FOR US SINCE WE CANNOT USETHE WEB COMPRESSION IN THIS CONDITIONS.HAS SOMEONE HAVE THIS PROBLEM TOO ?WHAT CAN I DO TO CORRECT THIS ?THANK YOU FOR YOUR HELP","SUMMARY":"ADDOUTPUTFILTERBYTYPE DEFLATE NOT ACTIVE WITH MOD_PROXY","CLASS":1}
{"ID_DEFECT":"33454","DESCRIPTION":"AP_LOG_ERROR NOW ESCAPES ESCAPE SEQUENCES SUCH AS NEWLINE AND TAB SO THAT THEYAPPEAR AS THE TWO-CHARACTER STRINGS T OR  IN ERROR_LOG (UNLESS HTTPD WASBUILT WITH -DAP_UNSAFE_ERROR_LOG_UNESCAPED).SOME CALLERS THROUGHOUT THE CODE STILL SEND  WITHIN THE STRING ARGUMENT SENTTO AP_LOG_ERROR, TRIVIAL PATCH ATTACHED REMOVES THE FORMATTING FROM THESE CALLS(ESCAPED FORMATTING WOULD OBSCURE THINGS VS. MAKE THEM STAND OUT AS I PRESUMETHE FORMATTING WAS INTENDED FOR)","SUMMARY":"ESCAPE SEQUENCES PASSED TO AP_LOG_ERROR","CLASS":1}
{"ID_DEFECT":"8174","DESCRIPTION":"NOT SURE IF THIS IS OPERATOR ERROR OR A BUG, BUT IT APPEARS TO BE A BUG. UNDER 1.3, USING PROXYPASS AND PROXYREVERSE WITHIN AN SSL VIRTUALHOST, ONE COULDADD AN SSL FRONT-END TO A SECOND SERVER THAT MAY NOT SUPPORT SSL. THISCONFIGURATION DOESNT SEEM TO WORK UNDER 2.0.35.ON MY CONFIGURATION, SSL VIRTUAL HOSTS WORK FINE, AND BOTH FORWARD AND REVERSEPROXY VIRTUAL HOSTS WORK FINE WHEN THEY ARE NOT SSL. AN SSL VIRTUAL HOST WITH AREVERSE PROXY, HOWEVER, CONNECTS (VERIFIED USING OPENSSLS S_CLIENT COMMAND),BUT NEVER RESPONDS. COMMENTING OUT THE REVERSE PROXY LINES ON THAT EXACT VIRTUALHOST CAUSES THE DEFAULT APACHE HTML PAGES TO COME UP, SO THE SSL ISNT THE PROBLEM.ALSO, THE REMOTE SERVER DOES SEE THE SOCKET OPENED BY THE PROXY, BUT DOES NOTRECEIVE ANY DATA. (VERIFIED BY POINTING THE REVERSE PROXY AT A DUMMY JAVA HTTPSERVER -- PROXY CONNECTS, NO DATA COMES THROUGH)","SUMMARY":"USING MOD_PROXY REVERSE PROXY WITH MOD_SSL CAUSES HANG","CLASS":1}
{"ID_DEFECT":"8597","DESCRIPTION":"THE HTTP INPUT FILTER IN HTTP_PROTOCOL.C DOESNT CORRECTLY HANDLE RESPONSES USING THE CHUNKED TRANSFER ENCODING. IT DOESNT READ THE CRLF AFTER THE 0 CHUNK THAT TERMINATED THE RESPONSE. THIS IS NOT A PROBLEM EXCEPT WHEN A KEEPALIVE CONNECTION IS BEING USED. THAT LAST CRLF IS READ AS THE FIRST LINE OF THE NEXT RESPONSE WHICH CAUSED ALL KINDS OF PROBLEMS FOR MOD_PROXY.ON THE FIRST REQUEST OF A PAGE THROUGH MOD_PROXY THE PAGE WILL RETURN PROPERLY, ON THE NEXT (IF A KEEPALIVE CONNECTION IS IN USE) IT WILL READ THE CRLF AS THE FIRST LINE OF THE RESPONSE AND FAIL. THE NEXT LOAD AFTER THAT WILL RECONNECT AND IT WILL THEN WORK AGAIN. SO RESPONSES USING CHUNKED TRANSFER ENCODING END UP WORKING THROUGH MOD_PROXY EVERY OTHER TIME.","SUMMARY":"HTTP_PROTOCOL.C DOESNT HANDLE CHUNKED TRANSFER ENCODING RIGHT","CLASS":1}
{"ID_DEFECT":"8903","DESCRIPTION":"I HAVE INSTALED THE PRECOMPILED VERSION OF APACHE WEB SERVER 2.0.36. THE ONLY CONFIGURATION MODIFICATIONS MADE ARE:- UNCOMMENT USE OF PROXY MODULESLOADMODULE PROXY_MODULE MODULESMOD_PROXY.SOLOADMODULE PROXY_CONNECT_MODULE MODULESMOD_PROXY_CONNECT.SOLOADMODULE PROXY_HTTP_MODULE MODULESMOD_PROXY_HTTP.SO- USE OF PROXY DIRECTIVES## PROXY SERVER DIRECTIVES. UNCOMMENT THE FOLLOWING LINES TO# ENABLE THE PROXY SERVER:#<IFMODULE MOD_PROXY.C>PROXYREQUESTS ONALLOWCONNECT  443 4081<PROXY *>    ORDER DENY,ALLOW#    DENY FROM ALL#    ALLOW FROM .TID    ALLOW FROM ALL<PROXY>## ENABLEDISABLE THE HANDLING OF HTTP1.1 VIA: HEADERS.# (FULL ADDS THE SERVER VERSION; BLOCK REMOVES ALL OUTGOING VIA: HEADERS)# SET TO ONE OF: OFF | ON | FULL | BLOCK#PROXYVIA ON## TO ENABLE THE CACHE AS WELL, EDIT AND UNCOMMENT THE FOLLOWING LINES:# (NO CACHEING WITHOUT CACHEROOT)##CACHEROOT C:ARCHIVOS DE PROGRAMAAPACHE GROUPAPACHE2PROXY#CACHESIZE 5#CACHEGCINTERVAL 4#CACHEMAXEXPIRE 24#CACHELASTMODIFIEDFACTOR 0.1#CACHEDEFAULTEXPIRE 1#NOCACHE A-DOMAIN.COM ANOTHER-DOMAIN.EDU JOES.GARAGE-SALE.COM<IFMODULE># END OF PROXY DIRECTIVES.HTTP PROXY WORKS FINE, BUT I SEEM UNABLE TO ACCESS HTTPS PAGES VIA PROXY. WHEN ACCESING A VALID HTTPS URL INSIDE MY DOMAIN (HTTPS:BRISA.TID:4081) THE WEB BROWSER (NETSCAPE 4.7 OR IE 5.5) HANGS FOR A WHILE BEFORE INFORMING THAT THE DOCUMENT ACCESED IS EMPTY.ACCESS LOG SHOWS:1.0.25.254 - - [08MAY2002:10:29:49 +0100] CONNECT BRISA.TID:4081 HTTP1.0 200 -1.0.25.254 - - [08MAY2002:10:40:53 +0100] CONNECT BRISA.TID:4081 HTTP1.0 200 -1.0.25.254 - - [08MAY2002:11:22:12 +0100] CONNECT BRISA.TID:443 HTTP1.0 200 -","SUMMARY":"CONNECT PROXY NOT WORKING","CLASS":1}
{"ID_DEFECT":"12911","DESCRIPTION":"WITH PROXYERROROVERRIDE ON, MOD_PROXY INCORRECTLY FAILS TO PASS THE WWW-AUTHENTICATE HEADER THROUGH TO THE CLIENT ON 401 RESPONSES FROM THE ORIGIN SERVER.IT SEEMS THE PROBLEM IS THAT AP_SEND_ERROR_RESPONSE() CLEARS R->HEADERS_OUT, WHILE AP_PROXY_HTTP_PROCESS_RESPONSE() DOES NOT COPY THE WWW-AUTHENTICATE HEADER INTO R->ERR_HEADERS_OUT.A PATCH WHICH FIXES THIS FOLLOWS.(NOTE RE THE SECOND PASSAGE OF THE PATCH: IF WE DONT DISCARD THE REQUEST BODY THAT ACCOMPANIED THE 401 RESPONSE, IT IS STILL THERE ON THE SOCKET WHEN AUTH SUCCEEDS... AND IS THEREFORE PREPENDED, IN ITS RAW CHUNKED GLORY, WHEN THE ACTUAL CONTENT PAGE FROM THE ORIGIN SERVER IS SERVED TO THE CLIENT.  THUS WE MUST DISCARD THE REQUEST BODY PRIOR TO EXITING FROM AP_PROXY_HTTP_PROCESS_RESPONSE() ON 401 RESPONSES WITH PROXYERROROVERRIDE ON.NOTE THAT THIS PATCH APPEARS TO CORRECT THE PROBLEM, BUT HAS NOT YET RECEIVED EXTENSIVE TESTING.*** MODULESPROXYPROXY_HTTP.C.ORIG     THU SEP 19 14:47:51 2002--- MODULESPROXYPROXY_HTTP.C  THU SEP 19 17:38:36 2002****************** 863,868 ****--- 863,879 ----                          +       IF ((R->STATUS == 401) && (CONF->ERROR_OVERRIDE != 0)) +           CONST CHAR *BUF;+           CONST CHAR *WA = WWW-AUTHENTICATE;+           IF (BUF = APR_TABLE_GET(R->HEADERS_OUT, WA)) +               APR_TABLE_SET(R->ERR_HEADERS_OUT, WA, BUF);+            ELSE +               AP_LOG_ERROR(APLOG_MARK, APLOG_DEBUG, 0, R->SERVER,+                            PROXY: ORIGIN SERVER SENT 401 WITHOUT W-A HEADER);+           +       +           R->SENT_BODYCT = 1;          * IS IT AN HTTP0.9 RESPONSE? IF SO, SEND THE EXTRA DATA *          IF (BACKASSWARDS) ****************** 969,974 ****--- 980,986 ----               *              INT STATUS = R->STATUS;              R->STATUS = HTTP_OK;+           AP_DISCARD_REQUEST_BODY(RP);              RETURN STATUS;                 ELSE","SUMMARY":"WWW-AUTHENTICATE HEADER LOST WHEN REVERSE-PROXYING WITH PROXYERROROVERRIDE ON","CLASS":1}
{"ID_DEFECT":"13945","DESCRIPTION":"TARGET:  IBM-HTTP-SERVER (APACHE 1.3.XX) FLOW:1- BROWSER SENDS REQUEST TO PROXY2- PROXY PASSES REQUEST FOR PDF DOC TO IBM3- IBM WS STARTS RETURNING THE DATA TO THE PROXY USING CONTENT-LENGTH HEADERS (HTTP1.1)4- WHEN THE COMPLETE DOCUMENT IS RETRIEVED TO THE PROXY (THIS IS ALSO A BIT CONFUSING BUT NEVER MIND) THE 200 OK REPLY FROM THE PROXY TO THE BROWSER IS RETURNED WITH THE FOLLOWING HEADERS:HTTP1.1 200 OKDATE: (CORRECT DATE)SERVER: IBM_HTTP_SERVER1.3.19.2 APACHE1.3.20 (UNIX)LAST-MODIFIED: (LAST MODIFIED DATE)ETAG: 21ACA-49.........ACCEPT-RANGES: BYTESCONTENT-TYPE: APPLICATIONPDFCONNECTION: CLOSEDATA....NOW IE EITHER CLOSES THE CONNECTION AND RE-TRIES (USER STILL DONT HAVE THE DOCUMENT) THE GET, OR SENDS A (RESET) ON TCP LEVEL AND RETRIES THE GET.MY GUESS IS THAT IE 5 DOES NOT UNDERSTAND THAT IT IS A CHUNCKED ENCODING APACHE WANTS TO PERFORM BECAUSE THE TRANSFER-ENCODING: CHUNKED HEADER IS MISSING.I WILL SEND THE COMPLETE SNIFFER FILE IN ANY FORMAT (ETHEREAL  TCPDUMP SNOOP ..) ON REQUEST FOR FURTHER ANALYSIS.REGARDS,DARIO.","SUMMARY":"MISSING TRANSFER-ENCODING: CHUNKED HEADER FROM PROXY.","CLASS":1}
{"ID_DEFECT":"14385","DESCRIPTION":"TO BE REALLY CLEAR, HERE IS OUR ARCHITECTURE :         +---------+   +---------+   +---------+         |MOD_PROXY|   |MOD_PROXY|   |         |CLIENT---|  2.0.43 |---|MOD_CACHE|---|   IIS   |         |         |   |  2.0.43 |   |         |         +---------+   +---------+   +---------+                A             B             CWITH MOD_CACHE DISABLED ON B---------------------------- 1) WHEN B REQUESTS A FILE ON THE IIS SERVER, IIS SPECIFIES IN THE RESPONSE THE ACCEPT-RANGE: BYTES DIRECTIVE AND THE CONTENT-LENGTH.2) WHEN B SENDS THE RESPONSE TO A, ACCORDING TO THE RFC 2616, IT REMOVES THE CONTENT-LENGTH FROM HEADER AND ADD A TRANSFER-ENCODING: CHUNKED DIRECTIVE.3) THEN, A DELIVERS THE SAME RESPONSE TO THE CLIENT.4) EVERYTHING SEEMS OK IN THIS CASE.WITH MOD_CACHE ENABLED ON B---------------------------1) FIRST REQUEST, THE FILE IS NOT ON THE CACHE. SO B REQUESTS A FILE ON THE IIS SERVER, IIS SPECIFIES IN THE RESPONSE THE ACCEPT-RANGE: BYTES DIRECTIVE AND THE CONTENT-LENGTH.2) ON B, MOD_PROXY REMOVES THE CONTENT-LENGTH HEADER AS SAID BEFORE, AND PASS THE RESPONSE TO MOD_CACHE.3) ON B, MOD_CACHE DOESNT SEE ANY CONTENT-LENGTH, SO IT CONSIDERS THE RESPONSE AS A STREAM (SEE BUG 14364). IT CACHES THE RESPONSE ON THE DISK, AND LET MOD_PROXY DELIVER THE RESPONSE, AS BEFORE.4) A DELIVERS TO THE CLIENT AS RECEIVED FROM B.5) SECOND REQUEST, THE FILE IS ON THE CACHE. SO ON B, MOD_CACHE DELIVERS IT TO A WITH A TRANSFER-ENCODING: CHUNKED DIRECTIVE BUT ALSO ADD THE INITIAL CONTENT-LENGTH. WHY ?6) WHEN A RESPONDS TO THE CLIENT, IT PUTS THE CONTENT-LENGTH VALUE TO ZERO, REMOVES THE TRANSFER-ENCODING: CHUNKED DIRECTIVE AND DOESNT DELIVER THE FILE.7) IF, IN THE SAME HTTP1.1 SESSION, THE CLIENT ASK ONCE MORE FOR THE FILE, THEN AFTER A LONG TIME (15 SECONDS !) A DELIVERS A 2-CHUNKS RESPONSE, THE SECOND ONE CONTAINING THE RESPONSE (HEADER+FILE) RECEIVED FROM B.NETWORK TRACES TO ILLUSTRATE----------------------------REQUEST:GET IMAGESLOGOGFA.GIF HTTP1.1HOST: WWW.LEA.GENERALI.FR1) RECEIVED BY B FROM IISHTTP1.1 200 OKSERVER: MICROSOFT-IIS5.0DATE: FRI, 08 NOV 2002 11:53:10 GMTCONTENT-TYPE: IMAGEGIFACCEPT-RANGES: BYTESLAST-MODIFIED: THU, 04 APR 2002 11:53:18 GMTETAG: 0CB674FCFDBC11:ABFCONTENT-LENGTH: 2011...(DATA)2-3) RECEIVE BY A FROM B (DELIVERED BY MOD_PROXY BECAUSE IMAGE IS NOT IN THE CACHE)HTTP1.1 200 OKDATE: FRI, 08 NOV 2002 12:00:12 GMTSERVER: MICROSOFT-IIS5.0CONTENT-TYPE: IMAGEGIFACCEPT-RANGES: BYTESLAST-MODIFIED: THU, 04 APR 2002 11:53:18 GMTETAG: 0CB674FCFDBC11:ABFTRANSFER-ENCODING: CHUNKED...(DATA)  4) SAME RESPONSE AS 2-3) DELIVERED BY A TO THE CLIENT5) SECOND REQUEST FOR THIS FILE. RECEIVED BY A FROM B (DELIVERED BY MOD_CACHE BECAUSE IT IS IN THE CACHE)HTTP1.1 200 OKDATE: FRI, 08 NOV 2002 12:02:33 GMTSERVER: APACHEACCEPT-RANGES: BYTESETAG: 0CB674FCFDBC11:ABFLAST-MODIFIED: THU, 04 APR 2002 11:53:18 GMTTRANSFER-ENCODING: CHUNKEDCONTENT-TYPE: IMAGEGIFAGE: 147959900CONTENT-LENGTH: 2011X-PAD: AVOID BROWSER BUG...(DATA)6) RECEIVED BY THE CLIENT FROM A (ONLY HEADER, NO DATA)HTTP1.1 200 OKDATE: FRI, 08 NOV 2002 12:04:48 GMTSERVER: APACHEACCEPT-RANGES: BYTESETAG: 0CB674FCFDBC11:ABFLAST-MODIFIED: THU, 04 APR 2002 11:53:18 GMTCONTENT-TYPE: IMAGEGIFAGE: 282918407X-PAD: AVOID BROWSER BUGCONTENT-LENGTH: 07) RECEIVED BY THE CLIENT FROM A, AFTER A NEW REQUEST FOR THE SAME FILE IN THE SAME HTTP1.1 SESSION THAN 6). IT TAKES 15 SECONDS FOR THE RESPONSE TO BE DELIVERED BY A.HTTP1.1 200 OKDATE: FRI, 08 NOV 2002 12:08:24 GMTSERVER: APACHETRANSFER-ENCODING: CHUNKEDCONTENT-TYPE: IMAGEGIF734 (1ST CHUNK SIZE)...(1ST CHUNK DATA)5B4 (2ND CHUNK SIZE FOLLOWED BY 2ND CHUNK DATA)HTTP1.1 200 OKDATE: FRI, 08 NOV 2002 12:08:30 GMTSERVER: APACHEACCEPT-RANGES: BYTESETAG: 0CB674FCFDBC11:ABFLAST-MODIFIED: THU, 04 APR 2002 11:53:18 GMTTRANSFER-ENCODING: CHUNKEDCONTENT-TYPE: IMAGEGIFAGE: 498052908CONTENT-LENGTH: 2011X-PAD: AVOID BROWSER BUG...(DATA)0 (LAST CHUNK)","SUMMARY":"MOD_PROXY DOESNT DELIVER FILES COMING FROM A REMOTE MOD_CACHE PROXY","CLASS":1}
{"ID_DEFECT":"16812","DESCRIPTION":"AP_PROXY_LOCATION_REVERSE_MAP() IS DOING A CASE SENSITIVE COMPARISION.HOWEVER, ACCORDING TO RFC2396 SECTION 6:...THE HOST NAMES USED IN URL ARE ACTUALLY CASE INSENSITIVE...SO, AP_PROXY_LOCATION_REVERSE_MAP() SHOULD BE DOING A CASE INSENSITIVE COMPARISON.  AT LEAST ON THE HOSTNAME PART.","SUMMARY":"REVERSEPROXY NOT REWRITING LOCATION HEADER DUE DO CASE SENSITIVITY","CLASS":1}
{"ID_DEFECT":"17928","DESCRIPTION":"WHEN WORKING IN REVERSE PROXY MODE, APACHE DOES RETURN A 304 CODE TO THE FRONTEND CLIENT *ONLY WHEN* THE BACKEND CONNECTION CLOSES.CONDITIONS:- APACHE 2.0.44- MOD_PROXY CONFIGURED IN REVERSE PROXY MODE- HTTP1.1 ON FRONTEND AND BACKEND- KEEPALIVE ON FOR BOTH FRONTEND AND BACKEND CONNECTION- PROXYERROROVERRIDE ON- BACKEND SERVER SENDS A 304 NOT MODIFIED CODE.WHEN THE CLIENT REFRESHES THE PAGE, THE BACKEND RESPONDS WITH 304 NOT MODIFIED, AND KEEPS THE CONNECTION ALIVE (THATU2019S NORMAL BEHAVIOR). INSTEAD OF SENDING THE RESPONDS FRONT TO THE CLIENT, MOD_PROXY WAITS UNTIL KEEPALIVETIMEOUT OF THE BACKEND CONNECTION EXPIRES, THE SEND THE RESPONSE TO THE FRONT CLIENT.  NOTE: YOU CAN MAKE THE PROBLEM WORST BY INCREASING KEEPALIVETIMEOUT ON THE BACKEND WEBSERVER.A WORKAROUND IS TO SET KEEPALIVE OFF ON THE BACKEND. HOWEVER, IT DOESNU2019T ADDRESS THE PROBLEM ON MOD_PROXY BOX.THE ISSUE MANIFESTS WHEN YOU SET PROXYERROROVERRIDE ON.","SUMMARY":"MOD_PROXY HANGS WHEN BACKEND SERVER RETURNS A 304","CLASS":1}
{"ID_DEFECT":"18573","DESCRIPTION":"YAHOOGROUPS RETURN RESPONSE LINES AS  HTTP1.1 200THAT MAKE THE PROXY FAIL, THE PATCH BELOW FAKES A REASON PHRASEBYE,  - SALVA--- PROXY_HTTP.C~       FRI NOV  8 10:24:00 2002+++ PROXY_HTTP.C        TUE APR  1 18:10:14 2003@@ -766,7 +766,13 @@             R->STATUS = ATOI(&BUFFER[9]);              BUFFER[12] = KEEPCHAR;-            R->STATUS_LINE = APR_PSTRDUP(P, &BUFFER[9]);+            +            IF (KEEPCHAR) +               R->STATUS_LINE = APR_PSTRDUP(P, &BUFFER[9]);+            +            ELSE +               R->STATUS_LINE = APR_PSTRCAT(P, &BUFFER[9],  UNKNOW REASON, NULL);+                                       * READ THE HEADERS. *","SUMMARY":"HTTP PROXY DOESNT HANDLE RESPONSES WO REASON PHRASE","CLASS":1}
{"ID_DEFECT":"19023","DESCRIPTION":"SET UP APACHE 2.0.45 OR EARLIER TO FUNCTION AS A PROXY SERVER.BLOCK MORE THAN ONE SITE WITH THE NOPROXY DIRECTIVE.MAKE THE PROXY SERVE A URL WHICH DOES NOT MATCH THE BLOCKED SITES.OBSERVE APACHE DIE.THE PROBLEM WAS IDENTIFIED TO ROUTINE AP_PROXY_CHECKPROXYBLOCK. IT HAS 3 NESTEDLOOPS. IF THE INNERMOST LOOP IS RUN TO COMPLETION, URI_ADDR IS SET TO NULL,WHICH IS THEN USED ON THE NEXT ITERATION OF THE OUTER LOOP. THE PATCH BELOWFIXES THE PROBLEM.--- PROXY_UTIL.CT14 APR 2003 09:49:53 -0000T1.3+++ PROXY_UTIL.CT14 APR 2003 14:21:42 -0000T1.4@@ -1015,10 +1015,12 @@                              APR_SOCKADDR_T *URI_ADDR)      INT J;+TAPR_SOCKADDR_T * SRC_URI_ADDR = URI_ADDR;     * XXX FIXME: CONF->NOPROXIES->ELTS IS PART OF AN OPAQUE STRUCTURE *     FOR (J = 0; J < CONF->NOPROXIES->NELTS; J++)          STRUCT NOPROXY_ENTRY *NPENT = (STRUCT NOPROXY_ENTRY *)CONF->NOPROXIES->ELTS;         STRUCT APR_SOCKADDR_T *CONF_ADDR = NPENT[J].ADDR;+TTURI_ADDR = SRC_URI_ADDR;         AP_LOG_ERROR(APLOG_MARK, APLOG_DEBUG, 0, R->SERVER,                      PROXY: CHECKING REMOTE MACHINE [%S] AGAINST [%S],URI_ADDR->HOSTNAME, NPENT[J].NAME);         IF ((NPENT[J].NAME && AP_STRSTR_C(URI_ADDR->HOSTNAME, NPENT[J].NAME))","SUMMARY":"MULTIPLE PROXYBLOCK ENTRIES WILL CRASH APACHE","CLASS":1}
{"ID_DEFECT":"19317","DESCRIPTION":"CONFIGURE MOZILLA TO USE APACHE AS A PROXY. ACCESS THE URL. MOZILLA MAKESREPEATED REQUESTS AND FINALLY POPS UP A DIALOG SAYING: REDIRECTION LIMIT FORTHIS URL EXCEEDED. UNABLE TO LOAD THE REQUESTED PAGE.I SUSPECT THE PROBLEM IS CAUSED BY MOD_PROXY ENCODING THE TILDE CHARACTERS INTHE URL. WATCHING THE HTTP TRAFFIC WITH AND WITHOUT THE PROXY REVEALS THATMOZILLA SENDS THE TILDE UNENCODED AND APACHE ENCODES IT WITH THE CORRESPONDINGPERCENT SEQUENCE, WHICH THE REMOTE WEBSITE SEEMS TO FIND CONFUSING. THE WEBSITEKEEPS SENDING REDIRECTIONS TO THE BROWSER UNTIL THE BROWSER GIVES UP.I BELIEVE APACHE PROXY SHOULD SEND THE URL IN EXACTLY THE SAME FORMAT ITRECEIVED IT. THIS MIGHT VIOLATE THE RFC, BUT IT WOULD MINIMIZE INTEROPERABILITYPROBLEMS LIKE THIS.","SUMMARY":"PROXY MAKES BROWSER REPORT REDIRECTION LIMIT EXCEEDED","CLASS":1}
{"ID_DEFECT":"19405","DESCRIPTION":"LOOKS LIKE A POSSIBLE RFC 2616 MUST VIOLATION.  A MULTILINERESPONSE HEADER IS GETTING CORRUPTED BY THE PROXY WHENFORWARDED TO THE CLIENT. THE HEADER IS USING CRLF SP ORCRLF HT LWS SEQUENCES TO MARK THE START OF THE NEXT LINE.SEE X-MULTILINE RESPONSE HEADER IN THE ATTACHED TRACE.FWIW, SIMILAR REQUEST HEADERS ARE HANDLED CORRECTLY, ONLYRESPONSE HEADERS SEEM TO BE CORRUPTED. ALSO, RESPONSEHEADERS WITH JUST TWO LINES ARE HANDLED CORRECTLY, ONLY LONGHEADERS ARE CORRUPTED.SEE ATTACHED TRACE(S) FOR DETAILS AND WAYS TO REPRODUCETHE VIOLATION MENTIONED ABOVE.TEST CASE IDS IN THE TRACE LINK TO HUMAN-ORIENTED TEST CASEDESCRIPTION AND RFC QUOTES, IF AVAILABLE.","SUMMARY":"CORRUPTION OF MULTILINE RESPONSE HEADERS","CLASS":1}
{"ID_DEFECT":"20183","DESCRIPTION":"HI!IN MY PROJECT WE USE APACHE 2.0.45 AS FRONT-END TO PROXY CERTAIN REQUESTS TO A BACKEND HTTP SERVER. WE ALSO USE THE ERRORDOCUMENT FEATURE OF APACHE FOR PREDEFINED ERROR PAGES. WHEN USING RANGE REQUESTS AND ERRORDOCUMENT IN CONJUNCTION WE SEE SOME STRANGE BEHAVIOUR, ALL 20* RESPONSES FROM THE BACKEND HTTP SERVER OTHER THAN 200 OK ARE HANDLED AS ERRORS BY APACHE. WHEN THE BACKEND HTTP SERVER FOR EXAMPLE RETURNS A 206 PARTIAL CONTENT THE APACHE RETURNS THE ERRORDOCUMENT TO THE USER.THIS BEHAVIOUR HAS BEEN VERIFIED BY RUNNING TELNET TO PORT 80 ON BOTH APACHE AND THE HTTP BACKEND SERVER.I HAD A QUICK PEEK IN THE CODE FOR PROXY_HTTP.C AND I THINK I FOUND WHATS CAUSING THIS PROBLEM:(LINE 984-987)..IF ( CONF->ERROR_OVERRIDE )     * THE CODE ABOVE THIS CHECKS FOR OK WHICH IS WHAT THE HOOK EXPECTS *    IF ( R->STATUS == HTTP_OK)        RETURN OK;..I CHANGED THE R->STATUS == HTTP_OK TO CHECK FOR 200-206 HTTP RESPONSES, COMPILED AND IT SEEMS TO WORK NOW. CHEERSMARCUS JANSON<-- TRE.SE -->","SUMMARY":"ERRORDOCUMENT SCREWS UP PROXIED RESPONSES OTHER THAN 200 OK","CLASS":1}
{"ID_DEFECT":"23998","DESCRIPTION":"SITUATION:CLIENT REQUESTS JSP PAGE TO LOCAL APACHE SERVER (2.0.47). LOCAL APACHE SERVER FORWARDS MOD_PROXY) THIS REQUEST TO A CENTRAL APACHE SERVER (2.0.47) WHICH IS CONNECTED BY MOD_JK2 (2.0.2) TO TOMCAT 4.1.24.WHEN THE LOCAL APACHE SERVER RECEIVES ITS RESPONSE, THE REQUEST-RESPONSE STATUS LINE IS MALFORMED AND A WARNING IS GENERATED IN THE APACHE ERROR LOG FILE. THE JSP APPLICATION WORKS FINE, BUT OUR LOG FILES ARE CLOGGED WITH THESE WARNINGS AS EVERY JSP REQUEST GENERATES ONE. WE ARE TALKING ABOUT A MAJOR ENTERPRISE-WIDE GLOBAL SYSTEM.EXAMINING THIS PROBLEM SHOWED THAT THE ERROR IS CAUSED BY THE FACT THAT MOD_PROXY IS CLEANING UPIGNORING THE TRAILING SPACE IN THE STATUS LINE:HTTP1.1 200 . IT ONLY SEEMS TO SEE OR EVALUATE HTTP1.1 200. I READ THAT MOD_JK OMITS THE REPONSE-PHRASE (OK IN THIS CASE) BUT THIS SHOULD (ACCORDING TO STANDARDS) NOT BE A PROBLEM WHEN AT LEAST A TRAILING SPACE IS ADDED. BY TRACING THE CONNACTIONS I CAN SEE THE SPACE IN THE RESPONSE STATUS LINE BEFORE IT ENTERS APACHE.EITHER MOD_PROXY FILTERS OUT THE SPACE OR THE INCOMING STATUS LINE IS INCORRECTLY EVALUATED.THE ERROR MESSAGE IS GENERATED IN HTTPD-2.0.47MODULESPROXYPROXY_HTTP.C   LINE 761FOR MORE INFORMATION, PLEASE CHECK HTTP:ARTICLE.GMANE.ORGGMANE.COMP.APACHE.MOD-PROXY561","SUMMARY":"MOD_PROXY TRUNCATES STATUS LINE HEADER CAUSING WARNING IN LOG FILES","CLASS":1}
{"ID_DEFECT":"24922","DESCRIPTION":"HELLO.IM TRYING TO FORWARD REQUESTS TO REMOTE FTP-SERVER WITH SIMPLE HTACCESS(LOCATED IN FTP DIR):REWRITEENGINE ONREWRITERULE (.*).TXT$ FTP:123.123.123.123$1.TXT [P]BUT APACHE (2.0.48) RETURNS SUCH ERROR:PROXY ERRORTHE PROXY SERVER RECEIVED AN INVALID RESPONSE FROM AN UPSTREAM SERVER.THE PROXY SERVER COULD NOT HANDLE THE REQUEST GET FTPFILE.TXT.REASON: COULD NOT CONNECT TO REMOTE MACHINE: (NULL) PORT 80IVE TESTED SAME HTACCESS WITH HTTP FORWARD AND IT JUST WORKS FINE. INERROR.LOG (DEBUG MODE) IM GETTING SUCH MESSAGES:PROXY_FTP.C(824): PROXY: FTP: SERVING URL FTP:123.123.123.123PROXY_FTP.C(917): PROXY: FTP: CONNECTING FTP:123.123.123.123 TO (NULL):80PROXY_FTP.C(995): PROXY: FTP: FAM 2 SOCKET CREATED, TRYING TO CONNECT TO0.0.0.0:80 ((NULL))...(OS 10049)THE REQUESTED ADDRESS IS NOT VALID IN ITS CONTEXT.  : PROXY: FTP:ATTEMPT TO CONNECT TO 0.0.0.0:80 ((NULL)) FAILEDSOME MORE INFO: IVE TESTED IT UNDER FREEBSD AND WINXP, GOT SAME RESULT,ALSO IF THERES LOCAL FTP-SERVER RUNNING (LISTENING TO 0.0.0.0, NOT127.0.0.1), THEN APACHE CONNECTS TO IT SUCCESSFULLY.ALSO, IVE TRIED DIFFERENT URI SCHEMES, BECAUSE I THINK THAT MODULE JUST CANT PARSE IT CORRECTLY, BUT NO WAY..FTP:123.123.123.123FTP:123.123.123.123FTP:123.123.123.123:21FTP:123.123.123.123:21FTP:ANONYMOUS:PASSWORD@123.123.123.123ETC, ALL FAILED.ALSO, IVE TRIED TO BIND REMOTE FTP WITH PROXYPASS DIRECTIVE -- SAME RESULT (AND AGAIN -- BINDING HTTP SERVER WAS SUCCESSFUL)PLEASE HELP, I DONT LIKE SQUID FOR SOME REASONS AND REALLY WOULD LIKE TO HAVE FTP-PROXY WITH APACHE RUNNING.THANKS A LOT IN ADVANCE.","SUMMARY":"FTP PROXY CONNECTS TO 0.0.0.0","CLASS":1}
{"ID_DEFECT":"25198","DESCRIPTION":"I CONFIGURED HTTPD-2.0.48 WITH MOD_PROXY AS INTRANET PROXY SERVER. WHENCONNECTING TO HTTP:WWW.MYDRIVE.NETAPP-WEB.COM HTTPD CHILD COREDUMPS ON EVERYGRAPHIC LOAD ATTEMPT. GRAPHICS FROM OTHER SITES ARE WORKING.IM USING SUNOS 5.9 (SOLARIS9) ON AN E2SPARC.GCC -V:READING SPECS FROM USRLOCALLIBGCC-LIBSPARC-SUN-SOLARIS2.93.2.2SPECSCONFIGURED WITH: ..CONFIGURE --DISABLE-NLS --WITH-LD=USRCCSBINLD--WITH-AS=USRCCSBINASTHREAD MODEL: POSIXGCC VERSION 3.2.2HTTPD CONFIGURE COMMAND:.CONFIGURE --ENABLE-MODS-SHARED=ALL --ENABLE-FILE-CACHE=SHARED--ENABLE-CACHE=SHARED --ENABLE-DISK-CACHE=SHARED --ENABLE-MEM-CACHE=SHARED--ENABLE-EXT-FILTER=SHARED --ENABLE-DEFLATE=SHARED --ENABLE-LOGIO=SHARED--ENABLE-UNIQUE-ID=SHARED --ENABLE-PROXY=SHARED --ENABLE-PROXY-CONNECT=SHARED--ENABLE-PROXY-FTP=SHARED --ENABLE-PROXY-HTTP=SHARED --ENABLE-SSL=SHARED--ENABLE-CGI=SHARED --ENABLE-DAV-FS=SHARED --ENABLE-VHOST-ALIAS=SHARED--ENABLE-REWRITE=SHARED --WITH-MPM=WORKER GDB BACKTRACE:TLIN@SHGATE: $ GDB USRLOCALAPACHE2BINHTTPD CORE GNU GDB 5.0[..]THIS GDB WAS CONFIGURED AS SPARC-SUN-SOLARIS2.8...CORE WAS GENERATED BY `USRLOCALAPACHE2BINHTTPD -F HOMETLIN.AP2PROXY.CONF.PROGRAM TERMINATED WITH SIGNAL 9, KILLED.[..]#0  0XFECF1934 IN MEMCMP () FROM USRPLATFORMSUNW,ULTRA-2LIBLIBC_PSR.SO.1(GDB) BT#0  0XFECF1934 IN MEMCMP () FROM USRPLATFORMSUNW,ULTRA-2LIBLIBC_PSR.SO.1#1  0XFEB8279C IN PROXY_FIXUP (R=0X173250) AT MOD_PROXY.C:279#2  0X4966C IN AP_RUN_FIXUPS (R=0X173250) AT REQUEST.C:114#3  0X49E74 IN AP_PROCESS_REQUEST_INTERNAL (R=0X173250) AT REQUEST.C:286#4  0X2F378 IN AP_PROCESS_REQUEST (R=0X173250) AT HTTP_REQUEST.C:286#5  0X2A844 IN AP_PROCESS_HTTP_CONNECTION (C=0X14F548) AT HTTP_CORE.C:293#6  0X3DEB4 IN AP_RUN_PROCESS_CONNECTION (C=0X14F548) AT CONNECTION.C:85#7  0X30690 IN PROCESS_SOCKET (P=0X14F420, SOCK=0X14F458, MY_CHILD_NUM=0,MY_THREAD_NUM=8, BUCKET_ALLOC=0X171210) AT WORKER.C:632#8  0X30DD4 IN WORKER_THREAD (THD=0X11ADA0, DUMMY=0X14F420) AT WORKER.C:946#9  0XFF0546B8 IN DUMMY_WORKER (OPAQUE=0X11ADA0) AT THREAD.C:127ERROR_LOG:[THU DEC 04 12:12:14 2003] [NOTICE] CHILD PID 2943 EXIT SIGNAL SEGMENTATIONFAULT (11)[THU DEC 04 12:12:14 2003] [NOTICE] CHILD PID 2942 EXIT SIGNAL SEGMENTATIONFAULT (11)[THU DEC 04 12:12:15 2003] [NOTICE] CHILD PID 2945 EXIT SIGNAL SEGMENTATIONFAULT (11)[THU DEC 04 12:12:15 2003] [NOTICE] CHILD PID 2944 EXIT SIGNAL SEGMENTATIONFAULT (11)THERE ARE NO CORRESPONDIG ACCESS LOG ENTRIES.KIND REGARDS, TOM","SUMMARY":"MOD_PROXY COREDUMPS IN PROXY_FIXUP(), MOD_PROXY.C:279","CLASS":1}
{"ID_DEFECT":"34512","DESCRIPTION":"FILE: PROXY_FTP.C +90STATIC INT FTP_CHECK_GLOBBINGCHARS(CONST CHAR *PATH)    FOR ( ; *PATH; ++PATH)         IF (*PATH == )        ++PATH; * BUG, SHOULD BE *PATH *  !!!!  IF (PATH != 0 && STRCHR(FTP_GLOBBING_CHARS, *PATH) != NULL)            RETURN TRUE;        RETURN FALSE;SHOULD BE IF ( *PATH != 0 ...","SUMMARY":"COMPARISON ERROR","CLASS":1}
{"ID_DEFECT":"8004","DESCRIPTION":"SERVER ERROR!ERROR MESSAGE: COULDNT CREATE CHILD PROCESS: 22502: C:SERVERHTDOCSINDEX.PL IF YOU THINK THIS IS A SERVER ERROR, PLEASE CONTACT THE WEBMASTER ERROR 500LOCALHOST 041202 03:28:12 APACHE2.0.35 (WIN32)","SUMMARY":"CGI NOT WORKING PROPERLY.","CLASS":1}
{"ID_DEFECT":"8387","DESCRIPTION":"INVOKING A CGI SCRIPT (SUCH AS A PERL SCRIPT) CAUSES A BLANK COMMAND WINDOW TO POPUP ON THE WIN2K CONSOLE.  THIS BEHAVIOR IS DIFFERENT FROM THAT OF 1.3 ON WIN2K, BUT IS SIMILAR TO 1.3 ON WIN98.  SINCE OUR APPLICATION IS BASED ON CGI SCRIPTS, HAVING BLANK WINDOWS POPPING UP FOR EACH CLICK IN THE BROWSER MAKES THE APPLICATION UNUSABLE.","SUMMARY":"INVOKING CGI SCRIPT CAUSES A CONSOLE WINDOW TO OPEN","CLASS":1}
{"ID_DEFECT":"8388","DESCRIPTION":"WHEN A CGI SCRIPT RUNS FOR A LONG TIME AND THE USER CLICKS THE STOP OR BACK BUTTON IN THE BROWSER BEFORE IT ENDS, THE SERVER FAILS TO TERMINATE THE CGI PROCESS ON THE SERVER, EVEN IF THE CGI SCRIPT IS FREQUENTLY WRITING BACK LINES.  HERES A SAMPLE PARTIAL CGI SCRIPT:$| = 1;PRINT <PRE>:FOREACH (1 .. 50)    PRINT LINE $_;    SLEEP (1);THIS SCRIPT CONTINUES TO RUN EVEN IF THE USER HAS CLICKED STOP IN THE BROWSER 5 SECONDS INTO THE PROCESS.I REMEMBER FIXING THIS PROBLEM IN APACHE 1.3 BY CLOSING THE RIGHT PROCESS HANDLE.  BUT SINCE 1.3 WAS NOT ABLE TO HAVE UNBUFFERED IO TO WRITE BACK TO THE HTTP SERVER PROCESS IMMEDIATELY, THE FIX WAS NOT USEFUL FOR 1.3 ANYWAY.  NOW THAT 2.0 SEEMS TO BE ABLE TO HAVE UNBUFFERED IO FOR CGI OUTPUT (FINALLY!), FIXING THIS BUG WOULD BE EXTREMELY HELPFUL, ESPECIALLY IN DEFEATING MS.  THIS IS A KILLER SHORTCOMING OF IIS WHERE A RUN-AWAY CGI SCRIPT CAN NEVER BE TERMINATED EXCEPT THE PRE-DEFINED CUT-OFF TIME FOR ALL SCRIPTS.","SUMMARY":"LONG RUNNING CGI SCRIPT CANNOT TERMINATED BY BROWSER","CLASS":1}
{"ID_DEFECT":"8482","DESCRIPTION":"IM USING A NPH- CGI, WHICH ISNT WORKING PROPERLY WITH APACHE 2.0.35, ALTHOUGH THE CHANGELOG SAYS, THAT NPH- IS WORKING AGAIN!DESCRIPTION:AFTER STARTING THE NPH- CGI, ANY BROWSER RECEIVES SOME DATA (NO PROB SO FAR)BUT AFTER A CERTAIN (ALMOST EVERYTIME THE SAME) AMOUNT, THE BROWERS STOPS GETTING DATA.THE MORE STRANGE THING IS .. THE CGI (CGI-IRC) STILL WORKS!AND AFTER QUITING THAT CGI, THE BROWERS RECEIVES THE REST OF THE DATA-PACKETS.SO I ASSUME, THAT THE SERVER-PUSHED METHOD GETS A KIND OF OVERFLOW ..","SUMMARY":"NPH- CGIS ANDOR SERVER-PUSHED METHODES NOT WORKING PROPERLY","CLASS":1}
{"ID_DEFECT":"9223","DESCRIPTION":"ON WINDOWS PLATFORM  HTTP:WIN2K-HOSTCGI-BINPRINTENV.PL?%82%D9%82%B0DOES NOT WORK.ERROR.LOG CLAIMS (22)INVALID ARGUMENT: COULDNT SPAWN CHILD PROCESS: C:PROGRAM   FILESAPACHE GROUPAPACHE2CGI-BINPRINTENV.PLWHILE APACHE 1.3.24 ON MY LINUX BOX RETURNS EXPECTED RESULT LIKE,QUERY_STRING=%82%D9%82%B0IT COMES TO PROBLEM WITH WIKI(HTTP:C2.COMCGIWIKI) LIKE SYSTEMS,WITH MULTIBYTE(IE. JAPANESE) WIKI-NAME.","SUMMARY":"EXECUTION OF CGI WITH MULTIBYTE QUERY STRING FAILS WITH 500.","CLASS":1}
{"ID_DEFECT":"10573","DESCRIPTION":"THE SERVER SEND THE NEXT MESSAGE WHEN I TRY TO CALL A CGI WITH A PARAM WITH SPECIAL CARACTERS (U00E1).EXAMPLE:  HTTP:AA.BB.CCINDEX.ACT?B=U00E1RESULT:SERVER ERROR!EL SERVIDOR ENCONTRO UN ERROR INTERNO Y FUE IMPOSIBLE COMPLETAR SU SOLICITUD. MENSAJE DE ERROR: COULDNT CREATE CHILD PROCESS: 20508: C:VARWWWUDEPORTESHTMLINDEX.ACT FAVOR DE CONTACTAR AL WEBMASTER EN CASO DE QUE USTED CREA QUE EXISTE UN ERROR EN EL SERVIDOR. ERROR 500","SUMMARY":"COULDNT CREATE CHILD PROCESS ERROR WHEN PASS SPECIAL CARACTERS.","CLASS":1}
{"ID_DEFECT":"11178","DESCRIPTION":"THESE ARE POINTS NOT YET SEEN IN THE FEW BUG REPORTS ON THIS SUBJECT.MOD_CGID DOES NOT SEEM TO FLUSH BUFFERS UNTIL THE CGI PROGRAM ENDS, AND MOD_CGI FOLLOWS SOME UNHELPFUL RULES IN FLUSHING BUFFERS.  THIS STRONGLY AFFECTS TABULAR DATA SENT FROM CGI PROGRAMS.  MOD_CGI SEEMS TO FLUSH BUFFERS WHEN AN HTML <BR> LINE BREAK IS DETECTED, BUT NOT NECESSARILY A LINE TERMINATOR , AND POSSIBLY WHEN THE CHARACTER COUNT REACHES 80.  A <BR> CHARACTER IS NOT THE ONLY DISPLAY LINE ENDING, SO ARE <TR> IN A TABLE, AND <LI> IN LIST ITEMS.  IT WOULD BE VERY MUCH BETTER IF THE MODULE ONLY DETECTED CONTROL CHARACTERS, WHICH ARE NOT DISPLAYED IN A PAGE, AND DID NOT DEPEND ON PAGE CONTENT TO DETERMINE TRANSMISSION CONTROLS.THE EFFECTS ARE SUCH THAT NOTHING IS DISPLAYED IN A BROWSER UNTIL A COMPLETE PAGE IS GENERATED BY A CGI PROGRAM, MEANING THE USER CANNOT SEE PUSHED MATERIAL UNTIL HIS SESSION ENDS.  MOD_CGI AND MOD_CGID SHOULD DISPLAY THE SAME BEHAVIOURS REGARDING DATA HANDLING.  THEIR DIFFERENCE IS IN THREADING, NOT AS ALTERNATE PAGE DISPLAY METHODS.  TO HAVE THEM DISSIMILAR WOULD FORCE A GOOD DEAL OF SOFTWARE TO BECOME UTTERLY UNPORTABLE.  ALREADY I HAVE HAD TO DERIVE 3 VERSIONS OF SOME CGI PROGRAMS TO ALLOW THEM TO WORK (HOPEFULLY) ON MOD_CGI, MOD_CGID, AND APACHE 1.3.  ONE HAS NOT BEEN PORTABLE AT ALL TO MOD_CGID SO FAR.","SUMMARY":"MOD_CGI AND MOD_CGID DO NOT HANDLE BUFFER FLUSHING WELL","CLASS":1}
{"ID_DEFECT":"13914","DESCRIPTION":"CGI SCRIPT COMMAND LINE IS BROKEN IN 2.0.40, THE QUERY STRING IS *ALWAYS* PASSEDTO ALL CGI SCRIPTS AS THE FIRST ARGUMENT, WHETHER IT CONTAINS = OR NOT.I TOOK A LOOK AND THE PATCH IM ATTACHING TO THIS REPORT SEEMS OBVIOUSLY CORRECTTO ME (ITS AGAINST CVS HEAD), BUT I HAVENT TESTED IT.  PLEASE TAKE A LOOKASAP, THIS PREVENTS RUNNING EG. THE W3C CHECKLINK,<HTTP:VALIDATOR.W3.ORGCHECKLINK>.FOR MORE INFO, SEE THE CGI SPEC AT<HTTP:CGI-SPEC.GOLUX.COMDRAFT-COAR-CGI-V11-03-CLEAN.HTML#5.0>.","SUMMARY":"CGI SCRIPT COMMAND LINE BROKEN","CLASS":1}
{"ID_DEFECT":"14550","DESCRIPTION":"WHILE SENDING PARAMTERS OF CALLED CGI SCRIPT FROM WORKING THRAD TO CGID SERWERBY SOCKET  CHAR IS USED TO SEPARATE EACH PART. IF IN SENDING ENVIROMENT CHAR WILL BE USED, ALL PARAMETERS WILL BE SEND BAD, SOME ENVIROMENT ELEMENTS AND- WHAT WORST - EVERY PUT VARIABLE WILL BE LOST. THIS BUG MAKING CGI SCRIPTSWHICH ARE WORKING IN SSL ENVIROMEND AND WHICH NEED SSL INFORMATION UNUSABLE. MAYBE THIS PATCH TO MOD-CGID.C WILL HELP:284,287D283<     RC = READ(FD, &J, SIZEOF(INT));<     IF (RC != SIZEOF(INT)) <         RETURN 1;<     303A300,303>     RC = READ(FD, &J, SIZEOF(INT));>     IF (RC != SIZEOF(INT)) >         RETURN 1;>     305,307C305,313<     I = 0; <     FOR (I = 0; I < J; I++)  <         ENVIRON[I] = AP_GETWORD(R->POOL, (CONST CHAR **)&DATA, ); --->     FOR(I=0;I<J;I++)>     TRC = READ(FD, &LEN, SIZEOF(INT));>     TIF (RC != SIZEOF(INT)) > T    RETURN 1;> T> TENVIRON[I] = APR_PCALLOC(R->POOL,LEN+1);> TRC = READ(FD,ENVIRON[I],LEN);> TIF (RC != LEN)> T    RETURN 1;308A315,316>     > 310C318,331<     R->ARGS = AP_GETWORD(R->POOL, (CONST CHAR **)&DATA, ); ---> >     RC = READ(FD, &LEN, SIZEOF(INT));>     IF (RC != SIZEOF(INT)) > TRETURN 1;>     >     IF(RC!=0)>     TR->ARGS = APR_PCALLOC(R->POOL,LEN+1);>     TRC = READ(FD,R->ARGS,LEN);>     TIF (RC != LEN)> T     TRETURN 1;>     T>      ELSE >     TR->ARGS=NULL;>     T399A421,425>     * WRITE THE REQUEST TYPE (SSI EXEC CMD OR CGI). *>     IF (WRITE(FD, &R_TYPE, SIZEOF(INT)) < 0) > TAP_LOG_RERROR(APLOG_MARK, APLOG_ERR, ERRNO, R,> TT     WRITE TO CGI DAEMON PROCESS);>     403,404C429,432<     FOR (I =0; ENV[I]; I++)  <         CONTINUE; --->     LEN=STRLEN(DATA);>     IF (WRITE(FD, &LEN, SIZEOF(INT))<0)>         AP_LOG_RERROR(APLOG_MARK, APLOG_ERR, ERRNO, R,> TT     WRITE TO CGI DAEMON PROCESS);407,408C435<     * WRITE THE REQUEST TYPE (SSI EXEC CMD OR CGI). *<     IF (WRITE(FD, &R_TYPE, SIZEOF(INT)) < 0) --->     IF(WRITE(FD,DATA,LEN)<0)412A440,444>    FOR (I =0; ENV[I]; I++)  > TCONTINUE; >      > > 420C452,465<         DATA = APR_PSTRCAT(R->POOL, DATA, ENV[I], , NULL); --->         LEN=STRLEN(ENV[I]); > TIF(WRITE(FD,&LEN,SIZEOF(INT)) < 0) > TTAP_LOG_RERROR(APLOG_MARK, APLOG_ERR, ERRNO, R,> TTT      WRITE TO CGI DAEMON PROCESS);> T> TIF(WRITE(FD,ENV[I],LEN) < 0)> TTAP_LOG_RERROR(APLOG_MARK, APLOG_ERR, ERRNO, R,> TT             WRITE TO CGI DAEMON PROCESS);> TTT>     >     IF(R->ARGS!=NULL) >     TLEN=STRLEN(R->ARGS);>      ELSE > TLEN=0;422,424C467<     DATA = APR_PSTRCAT(R->POOL, DATA, R->ARGS, NULL); <     LEN = STRLEN(DATA); <     * WRITE THE LENGTH OF THE CONCATENATED ENV STRING. *---> 429,430C472,473<     * WRITE THE CONCATTED ENV STRING. *     <     IF (WRITE(FD, DATA, LEN) < 0) --->     IF( LEN!=0)>    TIF (WRITE(FD,R->ARGS,LEN)<0)433A477,478>     >","SUMMARY":"BUG IN SERVER-CLIENT COMUNICATION WHILE SENDING ENVIROMENT VARIABLES","CLASS":1}
{"ID_DEFECT":"16687","DESCRIPTION":"WHEN SAVING A FILE AS UTF-8 WITH NOTEPAD UNDER XP, NOTEPAD WILL INSERT A BYTEORDER MARK BEFORE THE FIRST CHARACTER OF THE FIRST LINE.APACHE THEN CANT SERVE THE SCRIPT AS IT CANT PARSE THE MAGIC FIRST LINE, ANDCANT FIND PERL (OR WHATEVER)WORKAROUND IS NOT TO SAVE IN UTF-8, OR NOT TO USE NOTEPAD, BUT APACHE SHOULD BEABLE TO RECOGNIZE BYTE ORDER MARKS.(RELATED BUG #11847, BUT THAT SEEMS TO BE CONCERED WITH XML)","SUMMARY":"APACHE SHOULD RECOGNIZE UTF BYTE ORDER MARK (BOM) IN CGI SCRIPTS","CLASS":1}
{"ID_DEFECT":"18348","DESCRIPTION":"NON PARSED HEADER SCRIPTS ARE NOT ABLE TO LOG ANY ERRORS OR WARNINGS TO THE ERRORLOG, WHILE (ALMOST) THE SAME NON-NPH SCRIPT WILL GENERATE ERRORS AND WARNINGS FOR THE SAME SCRIPT.EXAMPLE:#!USRBINPERL -WUSE STRICT;$|=1;WARN ME;PRINT $ENVSERVER_PROTOCOL 204 NO CONTENT;PRINT SERVER: $ENVSERVER_SOFTWARE;PRINT DATE: $DATE;EXIT;WILL NOT LOG ANYTHING, WHILE IT SHOULD DUE TO THE WARN IN LINE 4.","SUMMARY":"ERRORLOGGING  STDERR FROM NPH-CGI-SCRIPTS BROKEN","CLASS":1}
{"ID_DEFECT":"19849","DESCRIPTION":"SYSTEM, SUN NETRA T1, SOLARIS 7, APACHE 2.0.45 WITH WORKER MPM.WHEN STRESS TESTING A BINARY CGI THE MOD_CGID DAEMON WOULD DIE.AFTER IT HAD DIED APACHE WOULD DETECT AND LOG THAT IT HAD DIED WITHTHIS MESSAGE IN THE ERROR_LOG,NO SUCH PROCESS: CGID DAEMON IS GONE; IS APACHE TERMINATING?.IT DOES NOT ATTEMPT TO RESTART THE CGI DAEMON PROCESS AGAIN SO ALLSUBSEQUENT CGI REQUESTS FAIL.APACHE 2 WITH THE WORKER MPM FOR CGI WOULD BE MORE ROBUST IF MOD_CGIDCOULD RESTART ITS CHILD DAEMON PROCESS IF IT DIES.","SUMMARY":"IF THE MOD_CGID DAEMON PROCESS DIES IT IS NEVER RESTARTED","CLASS":1}
{"ID_DEFECT":"27886","DESCRIPTION":"I JUST NOTICED FOR APACHE 2.0.49, RUNNING ON SPARCSOLARIS, THAT IF I CHANGE THESERVERROOT DIRECTIVE OF MY DEFAULT SERVER IN HTTPD.CONF, WHILEST LEAVING THEDEFAULT (I.E. COMMENTED OUT) FOR THE SCRIPTSOCK DIRECTIVE UNCHANGED, THE HTTPDDAEMON CONTINUES TO CREATE A CGISOCK SOCKET IN THE DEFAULT APACHE2LOGSDIRECTORY, EVEN THOUGH ALL OTHER ENTRIES (LIKE LOGFILES, ETC) ARE CREATEDRELATIVE TO THE NEW DEFINITION OF SERVERROOT.I HAVE VERIFIED THIS WITH TO A MINIMUM A MODIFIED HTTPD.CONF FILE THAT I STARTMANUALLY WITH USRLOCALAPACHE2BINHTTPD -FPATHTOALTERNATECONFHTTPD.CONF -K START.ALTHOUGH THIS CAN EASILY BE SOLVED BY EXPLICITLY ADDING THE DIRECTIVESCRIPTSOCK PATHTOALTERNATELOGSCGISOCK TO THE HTTPD.CONF FILE, IMHO ICONSIDER THIS BEING A BUG.","SUMMARY":"DEFAULT FOR CONFIG DIRECTIVE SCRIPTSOCK DOESNT SEEM OBEY SERVERROOT SETTINGS","CLASS":1}
{"ID_DEFECT":"8122","DESCRIPTION":"WITH THE SSLMUTEX OPTION THE USER COULD (IN 1.3.X) ASK FOR FILE BASED ORSEMAPHORE BASED LOCKING. NOW MOD_SSL ASKS APR FOR THE DEFAULT MECHANISM. WHICHIS NOT A BAD THING, BUT THE OPTION VALUES SHOULD REFLECT WHAT IS PROVIDED.I SUGGEST USING THE SAME OPTIONS AS FOR THE ACCEPTMUTEX OPTION OR USING ABACKWARD COMPATIBLE STYLE:SEM = SYSVSEMFILE: = FLOCK | FCNTL (WHATEVER IS PREFERRED ON THE PLATFORM)","SUMMARY":"SSLMUTEX OPTION SETTINGS NOT HONOURED","CLASS":1}
{"ID_DEFECT":"8124","DESCRIPTION":"ON MY LINUX (REDHAT 7.2) MOD_SSL LOGS AN ERROR WHENEVER IT TRIES TO ACCESS ASYSTEM V SEMAPHORE BASED MUTEX. FOR WHATEVER REASON, IT DOES NOT COMPLAIN WHENCREATING THE MUTEX. IT LOOKS LIKE A PERMISSION PROBLEM TO ME (I ADDED ERRORNUMBER REPORTING TO MOD_SSL), BUT I DONT KNOW WHY. APACHE ITSELF CREATES THESHARED MEM AND THE SEMAPHORES AS ROOT AND NOBODY WITH THE PERMISSIONS SET TO 600.AFTER FORCING FILE BASED LOCKING BY HACKING(SEE BUG #8122) THE ERRORS DISAPPEARED.","SUMMARY":"MOD_SSL FAILS TO GET AND RELEASE SEMAPHORE MUTEX","CLASS":1}
{"ID_DEFECT":"8165","DESCRIPTION":"THIS IS WEIRD. APACHE-2.0.35 COMPILED WITH SSL AND --WITH-MPM=WORKER ON LINUX.STARTING IT WITH SSL WORKS FINE, BOTH PORT 80 AND 443 ARE OPEN AND SERVINGREQUESTS. THE FUNNY THING IS THAT IF I MAKE A HTTPS: REQUEST WITH LYNX,EVERYTHING WORKS JUST FINE, THE PAGE IS SERVED VIA SSL. BUT IF I MAKE THE SAMEREQUEST WITH CURL (CURL HTTPS:LOCALHOST, IT JUST SENDS BACK MY SMALLINDEX.HTML FILE), HTTPD GOES UP TO 100% CPU USAGE, EVEN *AFTER* THE REQUEST HASBEEN SERVED. THAT IS, THERE ARE NO MORE ESTABLISHED CONNECTIONS TO THE WEBSERVER. BTW, CURL DOWNLOADS AND DISPLAYS THE INDEX.HTML FILE WITHOUT PROBLEMS,JUST THE SERVER GETS REALLY SLOW AFTER THIS SINGLE CONNECTION.IM USING A SELF-SIGNED CERTIFICATE.MOZILLA DOESNT PROMPT THIS BEHAVIOUR IN THE WEB SERVER. THIS IS WEIRD, I HOPEIM DOING SOMETHING WRONG.I ALSO TRIED CURL AND LYNX FROM ANOTHER MACHINE (NOT LOCALHOST), AND IT HAPPENEDAGAIN.","SUMMARY":"WEIRD: 100% CPU USAGE AFTER A SIMPLE SINGLE SSL CONNECTION","CLASS":1}
{"ID_DEFECT":"8389","DESCRIPTION":"WHENEVER SOMEBODY VISITS A PAGE IN HTTPS REGION OF MY SERVER, (USINGBASIC PASSWORD AUTHENTICATION), ONE OF THE HTTPD PROCESSES ON THE SERVERGOES INTO AN INFINITE LOOP, PEGGED AT 100% CPU.  IVE TRACKED THE PROBLEM DOWNTO THE LOOP IN SSL_IO_INPUT_GETLINE AT ABOUT LINE 704 IN SSL_ENGINE_IO.C.IT APPEARS THAT THERE ARE CIRCUMSTANCES IN WHICH SSL_READ ON AN SSL STREAMCAN PERSISTENLY RETURN 0.  THE CODE IN SSL_IO_INPUT_GETLINE DOESNT RECOGNIZE0 AS AN ERROR, SO IT JUST KEEPS TRYING, FOREVER, IN AN INFINITE LOOP.IM USING OPENSSL 0.9.6C.  THE MAN PAGE FOR SSL_READ IS--SHALL WE SAY--CHALLENGING, SO IM NOT SURE WHETHER THIS PERSISTENT 0 BEHAVIOR IS A BUG ORA FEATURE, BUT IT IS QUITE REPEATABLE IN MY SETUP.  WHEN IT OCCURS,SSL_GET_ERROR RETURNS SSL_ERROR_ZERO_RETURN.FORTUNATELY, THERES A ONE-LINE FIX TO SSL_IO_INPUT_GETLINE:    WHILE (TMPLEN > 0)         STATUS = SSL_IO_INPUT_READ(CTX, BUF + OFFSET, &TMPLEN);        IF (STATUS != APR_SUCCESS)             RETURN STATUS;                IF (TMPLEN == 0) BREAK;  * <---- ADD THIS LINE *        *LEN += TMPLEN;I CANT BE SURE THIS ISNT SIMPLY PLASTERING OVER SOME MORE SERIOUS PROBLEM,BUT IT SEEMS TO WORK FOR ME.IF YOU NEED ANY ADDITIONAL INFO (VERSION OF SOLARIS, HTTPD.CONF FILE, PHASEOF THE MOON ...) JUST ASK.","SUMMARY":"SERVER GOES INTO INFINITE LOOP","CLASS":1}
{"ID_DEFECT":"8572","DESCRIPTION":"THIS IS THE SESSION CONTEXTID TOO LONG PROBLEM WHICH APPARENTLY HAS ALREADY BEEN FIXED BY THE MOD_SSL FOLKS.  IM FIXING IT TEMPORARILY BY SUMMARILY TRUNCATING THE NAME SINCE MY UNDERSTANDING IS THAT THE KEY JUST NEEDS TO BE UNIQUE AND DOES NOT HAVE TO MATCH THE NAME OF THE WEBSITE.  MOD_SSL HAS A MORE ELEGANT SOLUTION USING AN MD5 HASH.  IM REQUESTING THAT YOU INCORPORATE THEIR CURRENT VERSION OF MOD_SSL WITH APACHE 2.0.35 OR 2.0.36 OR WHATEVER OR PLEASE EXPLAIN WHY IT ISNT THERE ALREADY.THANKS!","SUMMARY":"THIS URL IS TOO LONG FOR MOD_SSL TO HAVE AS THE NAME OF A WEBSITE","CLASS":1}
{"ID_DEFECT":"8601","DESCRIPTION":"HI!,I HAVE DISCOVERED (OR AT LEAST I THINK I HAVE) THAT WHENEVER A HYPHEN IS PRESENT IN THE SERVER NAME DIRECTIVE LOCATED IN THE SSL.CONF FILE, THE SSL CONNECTION WILL BOMB OUT AFTER THE FIRST SSL REQUEST.THE ERROR REPORTED IN THE SSL ENGINE FILE IS:[ERROR] MOD_SSL: UNABLE TO SET THE SESSION ID CONTEXT TO `MACHINENAME-1:443 (OPENSSL LIBARY ERROR FOLLOWS)[ERROR] OPENSSL: ERROR:140DA111:LIB(20):FUNC(218):REASON(273)I HAVE CHECKED THIS AGAINST, OPENSSL 0.96B,0.96C,0.96D (BETA).  THE PROBLEM APPEARS IN THE RECENT RELEASES OF OPENSSL, HOWEVER THE SYSTEM WORKS FINE IF I REMOVE THE HYPHEN FROM THE SERVERNAME DIRECTIVE.I SUSPECT THERE MAY BE ISSUES WITH SOMETHING SEEING THE HYPEN AND THINKING THERE ARE OPTIONS THERE TO PROCESS, RATHER THAN THE ENTIRE SERVER NAME.","SUMMARY":"MOD_SSL INABILITY TO HANDLE HYPHENS","CLASS":1}
{"ID_DEFECT":"9234","DESCRIPTION":"SETTING:MY TEST HTTP.CONF HAS 3 VIRTUAL HOST ENTRIES:<VIRTUALHOST *>SERVERNAME SSL.HOST.COM:443SSLENGINE ON<VIRTUALHOST *><VIRTUALHOST *>SERVERNAME OLDBOX.HOST.COMREDIRECT  HTTP:NEWBOX.HOST.COM<VIRTUALHOST *><VIRTUALHOST *>SERVERNAME NEWBOX.HOST.COM...<VIRTUALHOST *>PROBLEM 1:WHEN I TRY TO HIT IT LIKE THIS:# TELNET 127.0.0.1 80TRYING 127.0.0.1...CONNECTED TO LOCALHOST (127.0.0.1).ESCAPE CHARACTER IS ^].GET  HTTP1.0HOST: OLDBOX.HOST.COMI GET THIS RESPONSE (NOTE THE INCORRECT URL IN THE LOCATION FIELD):HTTP1.1 302 FOUNDDATE: SUN, 19 MAY 2002 12:28:11 GMTSERVER: APACHE2.0.36 (UNIX) MOD_SSL2.0.36 OPENSSL0.9.6B DAV2LOCATION: HTTP:NEWBOX.HOST.COMMOD_SSL:ERROR:HTTP-REQUESTCONTENT-LENGTH: 321CONTENT-TYPE: TEXTHTML; CHARSET=ISO-8859-1...PROBLEM 2:IF I CHANGE THE REDIRECT DIRECTIVE TO THIS:REDIRECT TEST.HTML HTTP:NEWBOX.HOST.COMTEST.HTMLI GET A DIFFERENT RESPONSE:HTTP1.1 400 BAD REQUESTDATE: SUN, 19 MAY 2002 12:36:33 GMTSERVER: APACHE2.0.36 (UNIX) MOD_SSL2.0.36 OPENSSL0.9.6B DAV2VARY: ACCEPT-LANGUAGEACCEPT-RANGES: BYTESCONTENT-LENGTH: 725CONNECTION: CLOSECONTENT-TYPE: TEXTHTML; CHARSET=ISO-8859-1EXPIRES: SUN, 19 MAY 2002 12:36:33 GMTAND THE ERROR-LOG HAS THESE ENTRIES:[SUN MAY 19 08:36:33 2002] [ERROR] MOD_SSL: SSL HANDSHAKE FAILED: HTTP SPOKEN ON HTTPS PORT; TRYING TO SEND HTML ERROR PAGE (OPENSSL LIBRARY ERROR FOLLOWS)[SUN MAY 19 08:36:33 2002] [ERROR] OPENSSL: ERROR:1407609C:LIB(20):FUNC(118):REASON(156)PROBLEM 3:HOWEVER, IF I CHANGE THE ORDER OF THE VIRTUAL HOST SECTIONS IN THE HTTP.CONF AND MOVE THE FIRST VIRTUAL HOST (SSL) TO BE THE LAST OF THE THREE, THEN THE REDIRECT WORKS PERFECTLY.I TRIED ISSUING SSLENGINE OFF FOR THE OTHER VIRTUAL HOSTS, BUT THAT DOES NOT FIX THE PROBLEM.-LAWRENCE","SUMMARY":"REDIRECT URL INCORRECTLY CONTAINS EXTRA CHARACTERS WHEN THERE IS A SSL VIRTUAL HOST","CLASS":1}
{"ID_DEFECT":"9488","DESCRIPTION":"IF A SOFTWARE SEND THE COMMAND GET TO THE SERVER, APACHE MAKES A FATAL ERROR.I HAVE THE MESSAGE :THE INSTRUCTION TO 0X6FED2BD0 USES THE MEMORY ADRESS 0X00000000X. THE MEMORY ADRESS CANT BE READ.WHEN I CHOOSE OK, APACHE IS RESTARTED.","SUMMARY":"HTTP0.9 REQUESTS SPOKEN ON HTTPS PORT RETURNS HTTP1.0 RESPONSE","CLASS":1}
{"ID_DEFECT":"9689","DESCRIPTION":"APACHE 2.0.36 CORE DUMPS ON CERTAIN CONFIGURATION ERRORS.PLATFORM:    SUNOS CONCEPT 5.7 GENERIC_106541-14 SUN4U SPARC SUNW,ULTRA-60CONFIGURED WITH    .CONFIGURE --ENABLE-SSLIN SSL.CONF, I MISTAKENLY HAD TWO SSLCERTIFICATEFILE LINES.    SSLCERTIFICATEFILE USRLOCALAPACHE2CONFWWW.CRT    SSLCERTIFICATEFILE USRLOCALAPACHE2CONFWWW.KEY(THE SECOND ONE WAS SUPPOSED TO BE SSLCERTIFICATEKEYFILE).I STARTED IT FROM APACHECTL VIA STARTSSL WHICH INVOKES HTTPD WITH -DSSLAND IT CORE-DUMPED.HERES THE STACK TRACE:#0  APR_FILE_WRITE (THEFILE=0X0, BUF=0X1427C8, NBYTES=0XFFBED71C)    AT READWRITE.C:225#1  0XFF33FB14 IN APR_FILE_PUTS (    STR=0X1427C8 APACHE:MOD_SSL:ERROR: PRIVATE KEY NOT FOUND., THEFILE=0X0)    AT READWRITE.C:340#2  0XFF33FC94 IN APR_FILE_PRINTF (FPTR=0X0,     FORMAT=0X2D <ADDRESS 0X2D OUT OF BOUNDS>) AT READWRITE.C:409#3  0X3C9E0 IN SSL_PPHRASE_HANDLE (S=0XB76D0, P=0XEE110)    AT SSL_ENGINE_PPHRASE.C:442#4  0X36AA8 IN SSL_INIT_MODULE (P=0XB4028, PLOG=0XEC108, PTEMP=0XEE110,     BASE_SERVER=0XB76D0) AT SSL_ENGINE_INIT.C:281#5  0X5DD24 IN AP_RUN_POST_CONFIG (PCONF=0XB4028, PLOG=0XEC108, PTEMP=0XEE110,     S=0XB76D0) AT CONFIG.C:129#6  0X62918 IN MAIN (ARGC=2, ARGV=0XFFBEFA24) AT MAIN.C:579IGNORE THE <ADDRESS 0X2D OUT OF BOUNDS>, WHICH APPEARS TO BE GDB CONFUSED BYVARARGS.  THE KEY POINT IS THE CALL AT SSL_ENGINE_PPHRASE.C:442:    APR_FILE_PRINTF(WRITETTY,        APACHE:MOD_SSL:ERROR: PASS PHRASE INCORRECT.);AT THIS PONIT, WRITETTY IS NULL.  THE ONLY ASSIGNMENT TO WRITETTY IS AT LINE581 IN SSL_PIPE_CHILD_CREATE, AND THIS FUNCTION HAS NEVER BEEN CALLED.THE ONLY CALL TO SSL_PIPE_CHILD_CREATE IS IN SSL_PPHRASE_HANDLE_CB.THERE ARE NO DIRECT CALLS TO THIS FUNCTION, BUT ITS PASSED AS AN ARGUMENTTO SSL_READ_PRIVATEKEY AND THENCE TO MODSSL_PEM_READ_BIO_PRIVATEKEYWHICH IS A MACRO FOR PEM_READ_BIO_PRIVATEKEY, WHICH IS ALSO A MACRO (IN SSL)FOR PEM_ASN1_READ_BIO.  BURRIED DEEP IN THE FILE SSLEAY.TXT, WHICH IS INCLUDEDWITH THE OPENSSL SOURCES, I FOUND THIS:    IF THE DATA IS ENCRYPTED, CB WILL BE CALLED TO PROMPT FOR A PASSWORD.APPARENTLY, IN MY CASE, THE DATA IS NOT ENCRYPTED, SO CB (IN THIS CASESSL_PPHRASE_HANDLE_CB) IS NEVER CALLED, SO WRITETTY IS NEVER INITIALIZED.FIX:  IM NOT EXACTLY SURE.  THIS LOGIC IS TOO CONVOLUTED FOR ME TO FOLLOW.WORK-AROUND:  DONT MAKE MISTAKES IN THE .CONF FILES :-).","SUMMARY":"HTTPD CORE DUMPS ON CERTAIN CONFIGURATION ERRORS.","CLASS":1}
{"ID_DEFECT":"10216","DESCRIPTION":"WHEN I USE ISAPI EXTENSTION AND SSL, APACHE ATTACH AFTER CORRECT ISAPI REPLY PAGE WITH TITLE: 200 OK------------------------------------------------------------------------OKTHE SERVER ENCOUNTERED AN INTERNAL ERROR OR MISCONFIGURATION AND WAS UNABLE TO COMPLETE YOUR REQUEST.PLEASE CONTACT THE SERVER ADMINISTRATOR, JIRA.NOVAK@GECAPITAL.COM AND INFORM THEM OF THE TIME THE ERROR OCCURRED, AND ANYTHING YOU MIGHT HAVE DONE THAT MAY HAVE CAUSED THE ERROR.MORE INFORMATION ABOUT THIS ERROR MAY BE AVAILABLE IN THE SERVER ERROR LOG.APACHE2.0.39 SERVER AT SSL666CGCFGE PORT 443------------------------------------------------------------------------THIS IS MESSAGE FOR STATUS 500, BUT IT IS STATUS 200!ANY IDEA?THANXJIRI","SUMMARY":"ISAPI + SSL = STATUS 200 AS 500 AFTER CORRECT REPLY","CLASS":1}
{"ID_DEFECT":"10324","DESCRIPTION":"--- HOMEAUSRCLDAPHTTPD-LDAPLDAP-CACHEUTIL_LDAP.C TUE MAY 28 21:32:30 2002+++ UTIL_LDAP.C FRI JUN 28 17:14:02 2002@@ -274,7 +274,7 @@  #IFDEF APU_HAS_LDAP_NETSCAPE_SSL         IF (LDC->NETSCAPESSL) -            IF (!LDC->CERTDB) +            IF (!LDC->CERTTDB)                 * SECURE LDAP REQUESTED, BUT NO CA CERT DEFINED *                 LDC->REASON = SECURE LDAP REQUESTED, BUT NO CA CERT DEFINED;                 RETURN -1;","SUMMARY":"TYPO PREVENTS 2.0.39 W CVS LDAP MODULES TO BUILD","CLASS":1}
{"ID_DEFECT":"11310","DESCRIPTION":"THE VC6 MOD_SSL BUILD DOESNT WORK UNLESS I DO ONE OF TWO THINGS:1) PLACE BOTH D:CODE3RDPARTYOPENSSL-0.9.6CINCLUDE ANDD:CODE3RDPARTYOPENSSL-0.9.6CINCLUDEOPENSSL IN MY INCLUDE PATH.OR 2) UPDATE MOD_SSL.H AS FOLLOWS:* OPENSSL HEADERS *#INCLUDE <OPENSSLSSL.H>#INCLUDE <OPENSSLERR.H>#INCLUDE <OPENSSLX509.H>#INCLUDE <OPENSSLPEM.H>#INCLUDE <OPENSSLCRYPTO.H>#INCLUDE <OPENSSLEVP.H>#INCLUDE <OPENSSLRAND.H>#IFDEF SSL_EXPERIMENTAL_ENGINE#INCLUDE <ENGINE.H>   * NOT SURE, <OPENSSLENGINE.H>?#ENDIF#INCLUDE SSL_TOOLKIT_COMPAT.H#IFDEF HAVE_SSL_X509V3_H#INCLUDE <OPENSSLX509V3.H>#ENDIFRECOMMEND THE LATTER (#2) AS THIS IS THE CONVENTION USED BY OPENSSL ITSELF AND, THEREFORE, MOST OPENSSL APPS.THANKS,CHARLIE","SUMMARY":"#INCLUDE <SSL.H> SB #INCLUDE <OPENSSLSSL.H>","CLASS":1}
{"ID_DEFECT":"12705","DESCRIPTION":"MOD_SSL APPEARS TO BE STUCK FOREVER INSIDE APR_POOL_CLEANUP_KILL WHEN CLOSINGTHE SESSION CACHE (I HAVE A SSLMUTEX SEM IN THE CONFIG). BACKTRACE (FULL DUMP AVAILABLE ON REQUEST):LIBAPR!APR_POOL_CLEANUP_KILL+0X24 [.MEMORYUNIXAPR_POOLS.C @ 1920]LIBAPR!APR_FILE_CLOSE+0X2D [.FILE_IOWIN32OPEN.C @ 420]LIBAPRUTIL!DATABASE_CLEANUP+0X31 [.DBMSDBMSDBM.C @ 122]LIBAPR!APR_POOL_CLEANUP_RUN+0X1B [.MEMORYUNIXAPR_POOLS.C @ 1959]LIBAPRUTIL!APR_SDBM_CLOSE+0X18 [.DBMSDBMSDBM.C @ 225]LIBAPRUTIL!VT_SDBM_CLOSE+0XF [.DBMAPR_DBM_SDBM.C @ 171]LIBAPRUTIL!APR_DBM_CLOSE+0X10 [.DBMAPR_DBM.C @ 121]WARNING: STACK UNWIND INFORMATION NOT AVAILABLE. FOLLOWING FRAMES MAY BE WRONG.MOD_SSL+0XF837MOD_SSL+0XF154MOD_SSL+0X924DSSLEAY32!SSL_SESSION_NEW+0X609","SUMMARY":"MOD_SSL STUCK IN INFINITE LOOP","CLASS":1}
{"ID_DEFECT":"14560","DESCRIPTION":"I FOUND THAT THE SSLCERTIFICATECHAINFILE DIRECTIVE WAS NOT BEHAVING THE SAME ASIT HAS IN APACHE V1.3.ACCORDING TO THE VERISIGN, WHEN USING A GLOBAL CERTIFICATE, YOU NEED TO USE THEABOVE DIRECTIVE TO PROVIDE THE CLIENT WITH THE INTERMEDIATE CA.  SO, IN MY OLDV1.3 CONFIGURATION I HAD THE FOLLOWING 3 DIRECTIVES:SSLCERTIFICATECHAINFILE SSL.CRTCA.CRTSSLCERTIFICATEFILE SSL.CRTSERVER.CRTSSLCERTIFICATEKEYFILE SSL.KEYSERVER.KEYTHIS DOESNT WORK UNDER APACHE2 HOWEVER.  THE CERTIFICATE IN THE CHAINFILE NEVERSEEMS TO BE PRESENTED TO THE CLIENT.  CLIENTS WERE GETTING PRESENTED WITH THEUNRECOGNIZED SIGNING AUTHORITY ERROR.ACCORDING TO THE COMMENTS IN THE SSL.CONF SAMPLE CONFIG FILE, YOU CAN ALSO POINTIT TO THE SSLCERTIFICATEFILE IF THE INTERMEDIATE CA IS DIRECTLY APPENDED TO THEBOTTOM OF THE FILE. THIS DID FIX THE PROBLEM.HERES MY SPECS:RH V7.3OPENSSL-0.9.6B-28.CONFIGURE --PREFIX=A01APPDPXDEMOAPACHE_2.0.43 --ENABLE-MODS-SHARED=ALL--ENABLE-SSLTHANKS,JOHN","SUMMARY":"SSLCERTIFICATECHAINFILE BEHAVIOUR DIFFERENT OR BROKEN VS. APACHE V1.3.X","CLASS":1}
{"ID_DEFECT":"15057","DESCRIPTION":"WHILE WORKING ON AN APACHE 2.0 CONNECTION HANDLER TO IMPLEMENT EPP WITHIN APACHE(SEE HTTPS:SOURCEFORGE.NETPROJECTSAEPPS) I NOTICED THE FOLLOWING:IF I TURN ON STDENVVARS HTTPD WILL DUMP CORE IN SSL_VAR_LOOKUP_SSL ASSSL_GET_SESSION RETURNS A NULL POINTER. AFTER SPENDING AN AFTERNOON WITH GDB,ETHERREAL AND SSL-TELNET I HAVE NO CLUE WHY CONNECTING WITH SSL-TELNET TO AN SSLHTTP PORT GIVES ME A NON-NULL SESSION VARIABLE WHEREAS USING THE SAMECLIENT TO CONNECT TO MY CONNECTION-HANDLER RETURNS A NULL VALUE.IM USING OPENSSL 0.9.6G.TO WORK AROUND THE ISSUE UNTIL I EVENTUALLY FIND THE REAL CAUSE, I APPLIEDTHE FOLLLOWING PATCH TO MY 2.0.43 SOURCE-TREE:--- SSL_ENGINE_VARS.C   20021204 11:27:14     1.1+++ SSL_ENGINE_VARS.C   20021204 11:27:34@@ -280,7 +280,8 @@     ELSE IF (SSL != NULL && STRCEQ(VAR, SESSION_ID))          CHAR BUF[SSL_SESSION_ID_STRING_LEN];         SSL_SESSION *PSESSION = SSL_GET_SESSION(SSL);-        RESULT = APR_PSTRDUP(P, SSL_SESSION_ID2SZ(+       IF (PSESSION)+               RESULT = APR_PSTRDUP(P, SSL_SESSION_ID2SZ(                                 SSL_SESSION_GET_SESSION_ID(PSESSION),                                 SSL_SESSION_GET_SESSION_ID_LENGTH(PSESSION),                                 BUF, SIZEOF(BUF)));IM NOT SURE WHETHER THIS IS AN ISSUE WITH MOD_SSL, MY CONNECTION-HANDLER OROPENSSL. AS THE PATCH IS SIMPLE ENOUGH, I WOULD RECOMMEND TO APPLY IT TOTHE OFFCIAL TREE IN ANY CASE.CHEERS,OL","SUMMARY":"SSL_VAR_LOOKUP_SSL DOES NOT HANDLE SSL_GET_SESSION RETURNING NULL","CLASS":1}
{"ID_DEFECT":"16275","DESCRIPTION":"WHILE TRYING TO TRACK DOWN A PROBLEM IM HAVING USING SSL, I ENABLE ERROR LOGGING AT THE DEBUG LEVEL.  THE LOG SHOWED:[MON JAN 20 16:07:03 2003] [DEBUG] SSL_ENGINE_IO.C(1027): OPENSSL: READ 132132 BYTES FROM BIO#BOGUS %P[MEM: BOGUS %P                                      K@U00A9I@[MON JAN 20 16:07:03 2003] [DEBUG] SSL_ENGINE_IO.C(974): +-------------------------------------------------------------------------THE BOGUS %P MESSAGES ARE CAUSED BY THE FACT THAT APR_SNPRINTF ENHANCES THE PRINTF STANDARD IN THAT IT REQUIRES A MODIFIER OF P, A, OR I AFTER A %P.SSL_ENGINE_IO.C(1027) SHOULD BE MODIFIED TO CHANGE %P TO %PP IN TWO PLACES, I BELIEVE.","SUMMARY":"ERROR IN LOGGING CODE IN SSL_ENGINE_IO.C LINE 1027","CLASS":1}
{"ID_DEFECT":"17864","DESCRIPTION":"MOD_SSLS TABLE_CLEAR() CLEARS ONE BUCKET PAST THE BUCKET ARRAY.THIS IS CAUSES BY AN INCORRECT LOOP CONDITION ( <= INSTEAD OF < ).SURPRISINGLY, THIS BUG DOES NOT EXIST IN 1.3.27.CORRECT (AS IN 1.3.27)   FOR (BUCKET_P = TABLE_P->TA_BUCKETS; BUCKET_P < BOUNDS_P; BUCKET_P++) WRONG ( 2.0.44)  FOR (BUCKET_P = TABLE_P->TA_BUCKETS; BUCKET_P <= BOUNDS_P; BUCKET_P++) ","SUMMARY":"TABLE_CLEAR() CORRUPTS MEMORY","CLASS":1}
{"ID_DEFECT":"18339","DESCRIPTION":"IM DEVELOPING AN APACHE 2.0 MODULE FOR EPP (SEEHTTP:SOURCEFORGE.NETPROJECTSAEPPS), WHICH ALSO UTILIZES MOD_SSL. THE CALLINGPATTERS THUS ARE LIKELY TO BE DIFFERENT THAN WITH HTTP. PROBLEM DESCRIPTION: WHEN THE SSL-NEGOTIATION FAILS (MISSING CLIENT CERT, SERVERCONFIG ERROR, ...), THE CONNECTION IS CLOSED TCP-WISE, BUT THIS IS NOTCOMMUNICATED TO THE CONNECTION HANDLER, AND ANY FURTHER READS (I.E.AP_GET_BRIGADE) WILL CAUSE A CORE DUMP.IVE NAILED THE PROBLEM DOWN TO THE STATE-HANDLING OF AN ABANDONED CONNECTION.IN SSL_IO_FILTER_INPUT THERE IS THE FOLLOWING CODE-FRAGMENT:    IF (F->C->ABORTED)         * XXX: OK, IF WE ABORTED, WE ARE AT THE EOS.  WE ALSO HAVE         * ABORTED.  THIS DOUBLE PROTECTION IS PROBABLY REDUNDANT,         * BUT ALSO EFFECTIVE AGAINST JUST ABOUT ANYTHING.         *WHICH MAKES A LOT OF SENSE. I SEEM TO RUN INTO A CASE WHERE C->ABORTED IS NOTSET EVEN THOUGH THE CONNECTION HAS BEEN ABORTED. THE ERROR SEEMS TO BE WITHINSSL_FILTER_IO_SHUTDOWN, WHERE C->ABORTED IS *NOT* TOUCHED (IN MY CASE, NOBODY ISSETTING C->ABORTED TO TRUE). THE FOLLOWING PATCH SEEMS TO FIX THE PROBLEM FOR ME:--- HTTPD-2.0.44MODULESSSLSSL_ENGINE_IO.C    MON JAN 13 18:35:22 2003+++ HTTPD-2.0.44MODULESSSLSSL_ENGINE_IO.C.NEW        TUE MAR 25 21:07:47 2003@@ -997,6 +997,7 @@     SSL_FREE(SSL);     SSLCONN->SSL = NULL;     FILTER_CTX->PSSL = NULL; * SO FILTERS KNOW WEVE BEEN SHUTDOWN *+    C->ABORTED = 1;     RETURN APR_SUCCESS; PLEASE APPLY IT (OR ANYTHING YOU THINK IS MORE APPROPRIATE) AGAINST THE CVS.THANKS.OL","SUMMARY":"[PATCH] HANDLING OF SSL ERRORS ON NON-HTTP CONNECTIONS","CLASS":1}
{"ID_DEFECT":"20166","DESCRIPTION":"MODULESSSLMOD_SSL.MAK NEEDS TO BE FIXED TO WORK WITH THE LATEST OPENSSL SOURCES.   COMPILE OPTIONS NEED TO BE CHANGED FROM:D NO_IDEA D NO_RC5 D NO_MDC2TO:D OPENSSL_NO_IDEA D OPENSSL_NO_RC5 D OPENSSL_NO_MDC2SUPPORTABS.MAK NEEDS TO HAVE THE SAME CHANGES MADE TO THE COMPILE OPTIONS.","SUMMARY":"WIN32 COMPILATION PROBLEM WITH OPENSSL 0.9.7X","CLASS":1}
{"ID_DEFECT":"20852","DESCRIPTION":"WHEN INVOKING SSL_VAR_LOOKUP THROUGH APR_RETRIEVE_OPTIONAL_FN(SSL_VAR_LOOKUP),IT CRASHES WHEN THE CONNECTION IS NOT AN SSL CONNECTION, AND THE VARIABLE ISSSL_CLIENT_S_DN. IN THAT CASE, SSL_VAR_LOOKUP_SSL RETRIEVES MYCONNCONFIG(C),WHICH RETURNS NULL, AND THEN ACCESSES SSL = SSLCONN->SSL; WHICH CRASHES.THERE IS APPARENTLY NO WAY FOR THE CALLER TO FIND OUT WHETHER THE CURRENTCONNECTION IS AN SSL CONNECTION (E.G. QUERYING FOR HTTPS CAUSES THE SAMECRASH). THEREFORE, I THINK MOD_SSL SHOULD HANDLE SUCH CALLS GRACEFULLY,RETURNING NULL IF AN SSL_ VARIABLE IS REQUESTED BUT NO SSL CONNECTION ISESTABLISHED.","SUMMARY":"SSL_VAR_LOOKUP NEEDS TO CHECK FOR SSLCONN","CLASS":1}
{"ID_DEFECT":"21370","DESCRIPTION":"DESCRIPTION: IF SSLVERIFYCLIENT IS CONFIGURED FOR SOME LOCATION, MOD_SSL IS STARTING ARE-NEGOTIATION OF THE SSLCONNECTION IN THE FUNCTION SSL_IO_FILTER_CONNECT(..)A MSIE INTERNET EXPLORER IS HANDLING THAT KIND OF RE-NEGOTIATION IN THE FOLLOWING WAY:A) HE IS FINISHING THE CURRENT HANDSHAKE (SEE LOGFILE)B) AFTERWARDS HE IS STARTING A NEW HANDSHAKE, NOW PRESENTING A    CLIENT CERTIFICATESO THE WHOLE SITUATION IS HANDELD BY MOD_SSL IN THE FOLLOWING WAY:1) MOD_SSL IS STARTING A RE-NEGOTIATION2) THE CLIENT DOES NOT FINISH THE HANDSHAKE (SEE A) )3) MOD_SSL IS FREEING THE SSL STRUCT USING SSLFREE(..)   (BY THAT ALSO THE ALLOCATED BIOS WILL BE FREED)4) THE BROWSER IS STARTING A NEW HANDSHAKE (SEE B) ), USING THE SAME   TCP CONNECTION (KEEP-ALIVE IS ENABLED) AND SO THE ALREADY    FREED SSL STRUCT AND BIOS WILL BE USED BY MOD_SSL   (DUE TO THE FACT THAT IT IS BOUND TO THE CONN_REC STRUCT)I.E. MOD_SSL IS READING ALREADY FREED MEMORY. WE HAVE PROVEN IS USING A (PURIFY VERSION 2002A.06.00 AN SOLARIS 2.8)FIX:IF THE HANDSHAKE IS FAILING IN SSL_IO_FILTER_CONNECT(..) THE CONNECTION WILL BE ABORTED. DUE TO STABILITY THE POINTERS TO THE BIOS WILL BE RESET IN IN SSL_FILTER_IO_SHUTDOWN(..) AND CHECK IN SSL_FILTER_WRITE(..)WE HAVE TESTED THE FIX AGAIN WITH THE SAME MEMORY ACCESS CHECKER.LOG-MESSAGE:[WED JUL 02 19:07:21 2003] [INFO] REQUESTING CONNECTION RE-NEGOTIATION[WED JUL 02 19:07:21 2003] [INFO] AWAITING RE-NEGOTIATION HANDSHAKE[WED JUL 02 19:07:21 2003] [ERROR] RE-NEGOTIATION HANDSHAKE FAILED: NOT ACCEPTEDBY CLIENT!?DIFF:DIFF -C -R1.2 -R1.3*** SSL_ENGINE_IO.C     20030416 14:14:39     1.2--- SSL_ENGINE_IO.C     20030703 11:36:24     1.3****************** 780,789 ****                                       APR_SIZE_T LEN)        SSL_FILTER_CTX_T *FILTER_CTX = F->CTX;!     BIO_FILTER_OUT_CTX_T *OUTCTX = !            (BIO_FILTER_OUT_CTX_T *)(FILTER_CTX->PBIOWRITE->PTR);!     INT RES;        * WRITE SSL *      IF (FILTER_CTX->PSSL == NULL)           RETURN APR_EGENERAL;--- 780,795 ----                                       APR_SIZE_T LEN)        SSL_FILTER_CTX_T *FILTER_CTX = F->CTX;!       BIO_FILTER_OUT_CTX_T *OUTCTX = NULL;!       INT RES;  +       * 2.7.2003HK,MV: BIOS HAS BEEN FREED*+       IF (FILTER_CTX->PBIOWRITE == NULL) +               RETURN APR_EGENERAL;+       + +     OUTCTX = (BIO_FILTER_OUT_CTX_T *)(FILTER_CTX->PBIOWRITE->PTR);+       * WRITE SSL *      IF (FILTER_CTX->PSSL == NULL)           RETURN APR_EGENERAL;****************** 999,1004 ****--- 1005,1014 ----      SSLCONN->SSL = NULL;      FILTER_CTX->PSSL = NULL; * SO FILTERS KNOW WEVE BEEN SHUTDOWN *  +       * 2.7.2003HK,MV: BIOS IS FREED RESET THE POINTERS*+       FILTER_CTX->PBIOREAD = NULL;+       FILTER_CTX->PBIOWRITE = NULL;+       RETURN APR_SUCCESS;    ****************** 1112,1117 ****--- 1122,1129 ----              INCTX->RC = APR_EGENERAL;            +               * 2.7.2003HK,MV: HANDSHAKE FAILED, CLOSE THE CONNECTION *+               C->ABORTED=1;          RETURN SSL_FILTER_IO_SHUTDOWN(FILTER_CTX, C, 1);        ****************** 1153,1158 ****--- 1165,1172 ----                           ERROR ? ERROR : UNKNOWN);              SSL_LOG_SSL_ERROR(APLOG_MARK, APLOG_INFO, C->BASE_SERVER);  +                       * 2.7.2003HK,MV: NO CLIENT CERT, CLOSE THE CONNECTION*+                       C->ABORTED=1;              RETURN SSL_FILTER_IO_SHUTDOWN(FILTER_CTX, C, 1);                ","SUMMARY":"IF SSLVERIFYCLIENT IS CONFIGURED A FREEMEMORYREAD OCCURS IN THE CASE OF A MSI5.0 BROWSER AND ENABLED KEEP-ALIVE","CLASS":1}
{"ID_DEFECT":"21371","DESCRIPTION":"I HAVE BEEN WORKING ON A SITE THAT ENFORCES MUTUALLY AUTHENTICATED SSLUSING APACHE 2.0.46. I HAVE COMPILED IT FROM SOURCE USING THE FOLLOWINGCOMMANDS PASSED TO THE .CONFIGURE SCRIPT:.CONFIGURE --ENABLE-SO --ENABLE-SSL --WITH-SSL=USRLOCALSSLUSRLOCALSSL CONTAINS OPENSSL VERSION 0.9.7B WHICH I COMPILED FROMSOURCE USING THE DEFAULT BUILD CONFIGURATION.I HAVE TRIED BOTH SERVLETS AND CGI AND ALL I CAN GET IS THE USERCERTIFICATE, NOT THE CERTIFICATE CHAIN.  I HAVE TRIED LOOKING AT THEMOD_SSL CODE, AND CANNOT FIGURE OUT WHY THE +EXPORTCERTDATA DIRECTIVEWILL ONLY TELL APACHE TO FORWARD ON THE USER CERTIFICATE, NOT THE CHAIN.","SUMMARY":"APACHE NOT PASSING CERTIFICATE CHAIN TO SERVLET OR CGI","CLASS":1}
{"ID_DEFECT":"21944","DESCRIPTION":"IVE GOT TROUBLE TO GET CGI:IRC RUNNING WITH SSL. WITHOUT SSL IT WORKS FINE, BUTIF I USE HTTPS: THE STREAMING IS BROKEN.FOR NORMAL HTTP: (WITHOUT SSL) THIS WAS FIXED IN #8482(HTTP:NAGOYA.APACHE.ORGBUGZILLASHOW_BUG.CGI?ID=8482)MAYBE ITS THE SAME KIND OF PROBLEM IN A DIFFERENT PART OF THE CODE?  HTTP:WWW.SCHOKO.ORGCGI-BINCGIIRCIRC.CGI --> WORKS  HTTPS:WWW.SCHOKO.ORGCGI-BINCGIIRCIRC.CGI --> DOESNT WORKWITH APACHE 1.3X BOTH WORKED FINE.","SUMMARY":"NPH- STREAMING NOT WORKING PROPERLY WITH SSL","CLASS":1}
{"ID_DEFECT":"22741","DESCRIPTION":"I GET A SEG FAULT IN SSL_ENGINE_VARS.C LINE 658.HERE IS PART OF THE GDB BACK TRACE:(GDB) RUN -XSTARTING PROGRAM: U3LOCALAPACHE2BINHTTPD -X[NEW THREAD 16384 (LWP 1777)]PROGRAM RECEIVED SIGNAL SIGSEGV, SEGMENTATION FAULT.[SWITCHING TO THREAD 16384 (LWP 1777)]SSL_VAR_LOG_HANDLER_C (R=0X83ED8D0, A=0X8274400 VERSION) AT SSL_ENGINE_VARS.C:658658         IF (SSLCONN->SSL == NULL)(GDB) BT#0  SSL_VAR_LOG_HANDLER_C (R=0X83ED8D0, A=0X8274400 VERSION) ATSSL_ENGINE_VARS.C:658#1  0X08085046 IN PROCESS_ITEM (R=0X83ED8D0, ORIG=0X83ED8D0, ITEM=0X82741C8)    AT MOD_LOG_CONFIG.C:856#2  0X080851C6 IN CONFIG_LOG_TRANSACTION (R=0X83ED8D0, CLS=0X8274D98,DEFAULT_FORMAT=0X8214CC8)    AT MOD_LOG_CONFIG.C:919THE FIX IS SIMPLE IN SSL_ENGINE_VARS.C:  STATIC CONST CHAR *SSL_VAR_LOG_HANDLER_C(REQUEST_REC *R, CHAR *A)        SSLCONNREC *SSLCONN = MYCONNCONFIG(R->CONNECTION);      CHAR *RESULT;+     IF (SSLCONN == NULL)  CHECK FOR BAD RETURN+        RETURN NULL;             IF (SSLCONN->SSL == NULL)         RETURN NULL;","SUMMARY":"SEG FAULT AT SSL_ENGINE_VARS.C LINE 658","CLASS":1}
{"ID_DEFECT":"23956","DESCRIPTION":"MOD_SSL (BOTH 1.3.X AND 2.X) CURRENTLY USES THE SSL_LIBRARY_TEXT DEFINE INSTEAD OF THE SSLEAY_VERSION() FUNCTION TO DETERMINE THE VERSION NUMBER OF OPENSSL WHICH IT IS USING.THIS IS BAD BECAUSE HERE THE MOD_SSL BINARY IS CARRYING THE OPENSSL VERSION NUMBER INSTEAD OF QUERYING THE VERSION OF OPENSSL ITS USING.  THIS CAN LEAD TO CONFUSION (ESPECAILLY SECURITY RELATED), IF FOR EXAMPLE AN ADMINISTRATOR PATCHES OPENSSL TO BE 3.4.D INSTEAD OF 3.4.A, TO WORK AROUND KNOWN MOD_SSL RELATED VULNERABILITIES IN OPENSSL.EVEN THOUGH THE SYSTEM HAS BEEN PROPERLY PATCHED, IT WILL STILL REPORT THE OLD (MOD_SSL COMPILED IN) VERSION NUMBER TO SCANNING SOFTWARE ETC.OUR CUSTOMERS COMPLAINED, AND WE HAVE FIXED THE FOLLOWING IN OUR VERSION OF APACHE... HOWEVER I FEEL THIS CHANGE WOULD MAKE SENSE UP-STREAM AS WELL.IVE ATTACHED A DIFF AGAINST 1.3.28:THE 2.1.X DIFF IS NEARLY IDENTICAL, ONLY DIFFERENT LINE NUMBERS.  SIMPLY REPLACE THE ONE INSTANCE OF SSL_LIBRARY_TEXT IN SSL_ENGINE_VARS.C  WITH SSLEAY_VERSION(SSLEAY_VERSION).THANKS FOR YOUR TIME.RCS FILE: CVSROOTAPACHE_MOD_SSLMOD_SSLPKG.SSLMODSSL_ENGINE_VARS.C,VRETRIEVING REVISION 1.1.1.8DIFF -U -R1.1.1.8 SSL_ENGINE_VARS.C--- SSL_ENGINE_VARS.C   20030725 02:32:10     1.1.1.8+++ SSL_ENGINE_VARS.C   20031020 20:36:34@@ -617,7 +617,7 @@         RESULT = AP_PSPRINTF(P, MOD_SSL%S, MOD_SSL_VERSION);          ELSE IF (STREQ(VAR, LIBRARY)) -        RESULT = AP_PSTRDUP(P, SSL_LIBRARY_TEXT);+        RESULT = AP_PSTRDUP(P, SSLEAY_VERSION(SSLEAY_VERSION));         IF ((CP = STRCHR(RESULT,  )) != NULL)              *CP = ;             IF ((CP2 = STRCHR(CP,  )) != NULL)CVS SERVER: DIFFING MOD_SSLPKG.SSLSUP","SUMMARY":"MOD_SSL SHOULD REPORT ACTUAL OPENSSL VERSION","CLASS":1}
{"ID_DEFECT":"24030","DESCRIPTION":"WHEN FIRING A REQUEST, THE REVERSE PROXY CHILD PROCESS SEGFAULTS.THE SEGFAULT OCCURS IN THE SSL_CALLBACK_PROXY_CERT() FUNCTION(SSL_ENGINE_KERNEL.C) WHEN CALLING THE MODSSL_SET_CERT_INFO() MACRO.THIS MACRO IS DEFINED AS FOLLOWS:   #DEFINE MODSSL_SET_CERT_INFO(INFO, CERT, PKEY)        *CERT = INFO->X509;        X509_REFERENCE_INC(*CERT);        *PKEY = INFO->X_PKEY->DEC_PKEY;        EVP_PKEY_REFERENCE_INC(*PKEY)WHEN TRACING TROUGH THE CODE WITH GDB THE FOLLOWING VALUES AREPRESENT IN THE LOCAL VARIABLES:   (GDB) P INFO   $4 = (STRUCT X509_INFO_ST *) 0X8236688   (GDB) P CERT   NO SYMBOL CERT IN CURRENT CONTEXT.   (GDB) P PKEY   $5 = (STRUCT EVP_PKEY_ST **) 0XBFFFF26C   (GDB) P *INFO   $6 = X509 = 0X8236BF0, CRL = 0X0, X_PKEY = 0X0, ENC_CIPHER = CIPHER = 0X0,       IV = U00FA024KJH207U00A7, ENC_LEN = 0, ENC_DATA = 0X0, REFERENCES = 1   (GDB) C   CONTINUING.   PROGRAM RECEIVED SIGNAL SIGSEGV, SEGMENTATION FAULT.   0X08095B9D IN SSL_CALLBACK_PROXY_CERT (SSL=0X0, X509=0XBFFFF268,       PKEY=0XBFFFF26C) AT SSL_ENGINE_KERNEL.C:1592   1592                    MODSSL_SET_CERT_INFO(INFO, X509, PKEY);THE PROBLEM IS THAT THE X_PKEY FIELD IN THE INFO STRUCTURE IS NULL(THE THIRD LINE IN THE MACRO TRIES TO ACCESS A FIELD IN THIS X_PKEYSTRUCTURE).MOD_PROXYMOD_SSL SHOULD ENSURE THAT THERE IS A PRIVATE KEY FOR EVERYCERTIFICATE IN SSLPROXYMACHINECERTIFICATEFILE (AND VICE VERSA).(SEE ALSO THE FOLLOWING THREAD:HTTP:MARC.THEAIMSGROUP.COM?L=APACHE-HTTPD-DEV&M=106629032008685&W=2)(RELATED TO BUG 24029)","SUMMARY":"MISSING PRIVATE KEY IN SSLPROXYMACHINECERTIFICATEFILE CAUSES SEGV","CLASS":1}
{"ID_DEFECT":"27428","DESCRIPTION":"THE SSL SHUTDOWN IS HANDELD IN SSL_FILTER_IO_SHUTDOWN(..),WICH WILL BE INVOKED AS A CLEANUP HANDLER. BUT THE CLEANUP HANDLERSWILL BY INVOKED _AFTER_ SHUTDOWN() IS CALLED FOR THE SOCKET, DISABLING ANY FURTHER WRITE OPERATION. SO THE CLIENT DOES NOT RECIEVE ANY SSL SHUTDOWN MESSAGE.(THE MOD_SSL DEFAULT IS SSL_RECEIVED_SHUTDOWN)THAT BEHAVIOUR CAN BE VERIFIED USING SSLDUMP.","SUMMARY":"SSL SHUTDOWN DOES NOT WORK","CLASS":1}
{"ID_DEFECT":"27945","DESCRIPTION":"SITUATIONREPRODUCING:A CLIENT IS SENDING A REQUEST OVER SSL. BEFORE THE FIRST BYTE OF THE RESPONSE IS WRITEN THE CLIENT IS CLOSING THE CONNECTION (STOP BUTTONPRESSED).(ERROR_LOG: [INFO] (32)BROKEN PIPE: CORE_OUTPUT_FILTER: WRITING DATA TO THENETWORK)IF IN THAT SITUATION THE SSL_IO_FILTER_CLEANUP HANDLER WILL BE INVOKED, HE IS TRYING TO SEND A SSL SHUTDOWN MESSAGE. BY THAT A MEMORY VIOLATIONS OCCURS. SEETHE FOLLOWING STACK:   DUMMY_WORKER(OPAQUE = 0X170FC0)   WORKER_THREAD(THD = 0X170FC0, DUMMY = 0X1B1110)   APR_POOL_CLEAR(POOL = 0X255CC0)   RUN_CLEANUPS(CREF = 0X255CD0)   SSL_IO_FILTER_CLEANUP(DATA = 0X256148)   SSL_FILTER_IO_SHUTDOWN(FILTER_CTX = 0X256148, C = 0X255DE8, ABORTIVE = 0)   SSL_SMART_SHUTDOWN(SSL = 0X279268)   SSL3_SHUTDOWN(0X279268, 0X0, 0XFE3562E0, 0XFDBF8000, 0XFFFFFFF8, 0X274B50)   SSL3_SEND_ALERT(0X279268, 0X279BA8, 0X1, 0X3, 0X0, 0X2)   SSL3_WRITE_PENDING(0X279268, 0X15, 0X15, 0X2, 0X0, 0X279CF4)   BIO_WRITE(0X260070, 0X27F790, 0X17, 0XFF33AC84, 0XFF1F655C, 0X0)   BIO_FILTER_OUT_WRITE(BIO = 0X260070, IN = 0X27F790 ^U^C^A, INL = 23)   BIO_FILTER_OUT_FLUSH(BIO = 0X260070)   AP_PASS_BRIGADE(NEXT = 0X25C118, BB = 0X25F098)   CORE_OUTPUT_FILTER(F = 0X25C118, B = 0X260108)   APR_POOL_CLEAR(POOL = 0X2600D0)   ALLOCATOR_FREE(ALLOCATOR = 0X1B3E50, NODE = (NIL)) <-!!!!!!!!!                                        FIXES:THERE ARE TWO POSSIBLE FIXES: A) POINT FIX IN SSL_IO_FILTER_CLEANUP:    FREE ONLY THE SSL STRUCT, BUT DO NOT SEND ANY SSL SHUTDOWN.B) GENEREL FIX IN ALLOCATOR_FREE:   CHECK IF THE PARAMETER APR_MEMNODE_T *NODE IS NULL  PATCHES:A)INDEX: MODULESSSLSSL_ENGINE_IO.C===================================================================RCS FILE:OPTPROJECTSCVSROOTNAVAJOSRCORGAPACHEHTTPD-2.XMODULESSSLSSL_ENGINE_IO.C,VRETRIEVING REVISION 1.8DIFF -R1.8 SSL_ENGINE_IO.C1080,1084C1080,1081<     C = (CONN_REC *)SSL_GET_APP_DATA(FILTER_CTX->PSSL);<     IF ((RET = SSL_FILTER_IO_SHUTDOWN(FILTER_CTX, C, 0)) != APR_SUCCESS) <         AP_LOG_ERROR(APLOG_MARK, APLOG_INFO, RET, NULL,<                      SSL FILTER ERROR SHUTTING DOWN IO);<     --->       SSL_FREE(FILTER_CTX->PSSL);>       FILTER_CTX->PSSL = NULL;1086C1083<     RETURN RET;--->     RETURN APR_SUCCESS;B) INDEX: SRCLIBAPRMEMORYUNIXAPR_POOLS.C===================================================================RCS FILE:OPTPROJECTSCVSROOTNAVAJOSRCORGAPACHEHTTPD-2.XSRCLIBAPRMEMORYUNIXAPR_POOLS.C,VRETRIEVING REVISION 1.3DIFF -R1.3 APR_POOLS.C309A310,312>       IF(!NODE)>               RETURN;>","SUMMARY":"MEMORY VIOLATIONS IN SSL_IO_FILTER_CLEANUP(..) CRASHES THE SERVER","CLASS":1}
{"ID_DEFECT":"28665","DESCRIPTION":"THIS HAS BEEN KICKING AROUND THE NET FOR YEARS, SO I HAVE A PATCH TO FIX IT. THIS PATCH NEEDS TO BE APPLIED IN THE MODULESSSL DIRECTORY, AND IT CREATES ANEW CONFIGURATION DIRECTIVE - SSLHONORCIPHERORDER, WHICH TAKES A BOOLEANVALUE.  IF SSLHONORCIPHERORDER IS TRUE, THE SERVER PREFERS ITS OWN ORDERINGFOR CIPHER SELECTION (AS SET BY THE SSLCIPHERSUITE DIRECTIVE).  IF ITS SET TOFALSE (OR ABSENT), THE HISTORICAL BEHAVIOR OF PREFERING THE CLIENT CIPHERORDERING IS USED.  NOTE THAT THE PATCH CHECKS FOR THE AVAILABILITY OF THESSL_OP_CIPHER_SERVER_PREFERENCE DEFINE, SO ITS SAFE TO USE (BUT IGNORED) EVENIF   YOURE USING AN ANCIENT VERSION OF OPENSSL THAT DOESNT SUPPORT THIS.PATCH FOLLOWS:--<CUT HERE>--INDEX: MODULESSSLMOD_SSL.C===================================================================--- MODULESSSLMOD_SSL.C       20030410 19:09:56     1.1.1.2+++ MODULESSSLMOD_SSL.C       20040428 15:57:20@@ -167,6 +167,10 @@     SSL_CMD_SRV(PROTOCOL, RAW_ARGS,                 ENABLE OR DISABLE VARIOUS SSL PROTOCOLS                 (`[+-][SSLV2|SSLV3|TLSV1] ... - SEE MANUAL))+    SSL_CMD_SRV(HONORCIPHERORDER, FLAG,+                USE THE SERVERS CIPHER ORDERING PREFERENCE)     *      * PROXY CONFIGURATION FOR REMOTE SSL CONNECTIONSINDEX: MODULESSSLMOD_SSL.H===================================================================--- MODULESSSLMOD_SSL.H       20030605 20:51:17     1.1.1.3+++ MODULESSSLMOD_SSL.H       20040428 15:57:21@@ -514,6 +514,9 @@     SSLMODCONFIGREC *MC;     BOOL             ENABLED;     BOOL             PROXY_ENABLED;+#IFDEF SSL_OP_CIPHER_SERVER_PREFERENCE+    BOOL             BHONORCIPHERORDER;+#ENDIF     CONST CHAR      *VHOST_ID;     INT              VHOST_ID_LEN;     INT              SESSION_CACHE_TIMEOUT;@@ -574,6 +577,9 @@ CONST CHAR  *SSL_CMD_SSLVERIFYDEPTH(CMD_PARMS *, VOID *, CONST CHAR *); CONST CHAR  *SSL_CMD_SSLSESSIONCACHE(CMD_PARMS *, VOID *, CONST CHAR *); CONST CHAR  *SSL_CMD_SSLSESSIONCACHETIMEOUT(CMD_PARMS *, VOID *, CONST CHAR *);+CONST CHAR  *SSL_CMD_SSLHONORCIPHERORDER(CMD_PARMS *, VOID *, INT); CONST CHAR  *SSL_CMD_SSLPROTOCOL(CMD_PARMS *, VOID *, CONST CHAR *); CONST CHAR  *SSL_CMD_SSLOPTIONS(CMD_PARMS *, VOID *, CONST CHAR *); CONST CHAR  *SSL_CMD_SSLREQUIRESSL(CMD_PARMS *, VOID *);INDEX: MODULESSSLSSL_ENGINE_CONFIG.C===================================================================--- MODULESSSLSSL_ENGINE_CONFIG.C     20030410 19:09:56     1.1.1.2+++ MODULESSSLSSL_ENGINE_CONFIG.C     20040428 15:57:21@@ -212,7 +212,9 @@     SC->VHOST_ID               = NULL;  * SET DURING MODULE INIT *     SC->VHOST_ID_LEN           = 0;     * SET DURING MODULE INIT *     SC->SESSION_CACHE_TIMEOUT  = UNSET;-+#IFDEF SSL_OP_CIPHER_SERVER_PREFERENCE+    SC->BHONORCIPHERORDER      = UNSET;+#ENDIF     MODSSL_CTX_INIT_PROXY(SC, P);     MODSSL_CTX_INIT_SERVER(SC, P);@@ -296,6 +298,9 @@     CFGMERGEBOOL(ENABLED);     CFGMERGEBOOL(PROXY_ENABLED);     CFGMERGEINT(SESSION_CACHE_TIMEOUT);+#IFDEF SSL_OP_CIPHER_SERVER_PREFERENCE+    CFGMERGEBOOL(BHONORCIPHERORDER);+#ENDIF     MODSSL_CTX_CFG_MERGE_PROXY(BASE->PROXY, ADD->PROXY, MRG->PROXY);@@ -662,6 +667,18 @@     RETURN NULL; ++CONST CHAR *SSL_CMD_SSLHONORCIPHERORDER(CMD_PARMS *CMD, VOID *DCFG, INT FLAG)++#IFDEF SSL_OP_CIPHER_SERVER_PREFERENCE+    SSLSRVCONFIGREC *SC = MYSRVCONFIG(CMD->SERVER);+    AP_LOG_ERROR(APLOG_MARK, APLOG_DEBUG, 0, CMD->SERVER,+        SSL_CMD_SSLHONORCIPHERORDER: SETTING BHONORCIPHERORDER TO %S,+       FLAG?TRUE:FALSE);+    SC->BHONORCIPHERORDER = FLAG?TRUE:FALSE;+#ENDIF+    RETURN NULL;+ CONST CHAR *SSL_CMD_SSLCIPHERSUITE(CMD_PARMS *CMD,                                    VOID *DCFG,INDEX: MODULESSSLSSL_ENGINE_INIT.C===================================================================--- MODULESSSLSSL_ENGINE_INIT.C       20030605 20:51:17     1.1.1.3+++ MODULESSSLSSL_ENGINE_INIT.C       20040428 15:57:21@@ -416,6 +416,9 @@     SSL_METHOD *METHOD = NULL;     CHAR *CP;     INT PROTOCOL = MCTX->PROTOCOL;+#IFDEF SSL_OP_CIPHER_SERVER_PREFERENCE+    SSLSRVCONFIGREC *SC = MYSRVCONFIG(S);+#ENDIF     *      *  CREATE THE NEW PER-SERVER SSL CONTEXT@@ -464,6 +467,11 @@     IF (!(PROTOCOL & SSL_PROTOCOL_TLSV1))          SSL_CTX_SET_OPTIONS(CTX, SSL_OP_NO_TLSV1);     +#IFDEF SSL_OP_CIPHER_SERVER_PREFERENCE+    IF(TRUE == SC->BHONORCIPHERORDER) +        SSL_CTX_SET_OPTIONS(CTX, SSL_OP_CIPHER_SERVER_PREFERENCE);+    +#ENDIF     SSL_CTX_SET_APP_DATA(CTX, S);--<CUT HERE>--","SUMMARY":"MOD_SSL IGNORES SERVER CIPHER PREFERENCES","CLASS":1}
{"ID_DEFECT":"29964","DESCRIPTION":"IM SEEING A NON-TERMINATING LOOP IN SSL_IO_INPUT_GETLINE().WE USED A 3RD PARTY TOOL TO SEND A REQUEST TO OUR APACHE SERVER. THE TOOL TRIED TO PRESENT AN EXPIRED CERTIFICATE TO A SSL ENABLED VHOST AND APACHE CORRECTLY REFUSED THE CORRECTION. BUT, IT SET APACHE TO SPIN OUT OF CONTROL.IM A COMPLETE OUTSIDER OF THE APACHEMOD_SSL CODE. BUT THIS IS WHAT I FOUND. AS MENTIONED, APACHE DID SHUTDOWN THE FILTERS SSL CONNECTION. HOWEVER, IT CONTINUED TO READ IN GETLINEBLOCKING MODE THE REST OF THE REQUEST. HERE COMES THE PROBLEM. SSL_IO_INPUT_GETLINE() CALLS SSL_IO_INPUT_READ() TO READ TO A LF OR THE MAX. OF THE BUFFER CAN HANDLE, WHICHEVER COMES FIRST. BUT, SSL_IO_INPUT_READ() REALIZES THE FILTERS SSL CONNECTION HAS BEEN SHUTDOWN, IT RETURNS WITH THE LAST KNOWN STATUS OF THE BIO WHICH WAS CREATED TO READ FROM THIS SSL CONNECTION. IT ALSO SET THE RETURNED LENGTH TO 0. UNFORTUNATELY, THE CALLER GET APR_SUCCESS RETURN CODE AND BECAUSE THE RETURNED LENGTH IS 0, THE REMAINING BUFFER LENGTH DOES NOT GET CHANGED AT ALL. BECAUSE THE RETURN CODE IS ALWAYS APR_SUCCESS AND BECAUSE THE RETURNED LENGTH IS ALWAYS 0 AND THE BUFFER IS NOT FULL, SSL_IO_INPUT_GETLINE() KEEPS CALLING SSL_IO_INPUT_READ(). IT GOES ON FOREVER!","SUMMARY":"NON-TERMINATING IO","CLASS":1}
{"ID_DEFECT":"30134","DESCRIPTION":"OVERVIEW DESCRIPTION:INTERMITTENT SEGMENTATION FAULTS OCCUR IN CHAR_BUFFER_READ ATSSL_ENGINE_IO.C:348 WHEN USING A REWRITERULE TO DO REVERSE PROXYING TO AN SSLORIGIN SERVER RUNNING IIS.    STEPS TO REPRODUCE:1) SET UP AN IIS SERVER USING SSL AND RUNNING EROOM 6.2) ADD THE FOLLOWING DIRECTIVES TO HTTPD.CONF:LISTEN 47290SSLPROXYENGINE ONREWRITEENGINE ONREWRITERULE (.*) HTTPS:SOME.EROOM6.IIS.SERVER.COM$1 [P]3) VISIT A URL SIMILAR TO THE FOLLOWING:HTTP:REVERSE.PROXY.COM:47290EROOMASPCOOKIETEST.ASP?FACILITY=FACILITY&URL=%2FEROOM%2FFACILITY%2FROOM%2F0_4242IF THAT DOESNT CAUSE THE SEGFAULT, CLICK AROUND FOR A WHILE.(YES, REVERSE PROXYING FROM NON-SSL TO SSL IS NOT A GOOD IDEA, BUT IT KEEPS THEEXAMPLE SIMPLER.)    ACTUAL RESULTS:SEGMENTATION FAULT IN ERROR_LOG:[THU JUL 15 19:38:36 2004] [NOTICE] CHILD PID 42 EXIT SIGNAL SEGMENTATION FAULT(11), POSSIBLE COREDUMP IN USRLOCALHTTPD-2.0.50    BUILD DATE & PLATFORM:2004-07-14 BUILD ON SUNOS 5.8 SUNW,ULTRAAX-I2    ADDITIONAL INFORMATION:HERE IS A STACK TRACE FROM GDB:#0  0XFEF5060C IN MEMCPY ()   FROM USRPLATFORMSUNW,ULTRAAX-I2LIBLIBC_PSR.SO.1#1  0XFEAFEF54 IN CHAR_BUFFER_READ (BUFFER=0X1649AC,    IN=0X2000 <ADDRESS 0X2000 OUT OF BOUNDS>, INL=8192) AT SSL_ENGINE_IO.C:348#2  0XFEAFF388 IN SSL_IO_INPUT_READ (INCTX=0X164990,    BUF=0X1649B8 CONTENT-LENGTH: 121CORTMARTONIA0_2615CONTENT-LENGTH:121CENT-LENGTH: 121CMEPORTMARTONIA0_2615CONTENT-LENGTH:121CMEPORTMARTONIA0_2615CONTENT-LENGTH:121CRTONIA0_2615CONTENT-LE..., LEN=0XFFBEA8CC) AT SSL_ENGINE_IO.C:561#3  0XFEAFF624 IN SSL_IO_INPUT_GETLINE (INCTX=0X164990,    BUF=0X1649B8 CONTENT-LENGTH: 121CORTMARTONIA0_2615CONTENT-LENGTH:121CENT-LENGTH: 121CMEPORTMARTONIA0_2615CONTENT-LENGTH:121CMEPORTMARTONIA0_2615CONTENT-LENGTH:121CRTONIA0_2615CONTENT-LE..., LEN=0XFFBEA944) AT SSL_ENGINE_IO.C:712#4  0XFEB00118 IN SSL_IO_FILTER_INPUT (F=0X1669C0, BB=0X158F98,    MODE=4290685252, BLOCK=APR_BLOCK_READ, READBYTES=0) AT SSL_ENGINE_IO.C:1226#5  0X42978 IN AP_GET_BRIGADE (NEXT=0X1669C0, BB=0X158F98,    MODE=AP_MODE_GETLINE, BLOCK=APR_BLOCK_READ, READBYTES=0)    AT UTIL_FILTER.C:474#6  0X4AAB4 IN NET_TIME_FILTER (F=0X158E20, B=0X158F98, MODE=AP_MODE_GETLINE,    BLOCK=APR_BLOCK_READ, READBYTES=0) AT CORE.C:3600#7  0X42978 IN AP_GET_BRIGADE (NEXT=0X158E20, BB=0X158F98,    MODE=AP_MODE_GETLINE, BLOCK=APR_BLOCK_READ, READBYTES=0)    AT UTIL_FILTER.C:474#8  0X43E0C IN AP_RGETLINE_CORE (S=0XFFBEAB94, N=8192, READ=0XFFBEAB90,    R=0X1671B8, FOLD=1, BB=0X158F98) AT PROTOCOL.C:214#9  0X441A4 IN AP_GETLINE (S=0XFFBECCD8 CONTENT-LENGTH, N=8192, R=0X1671B8,    FOLD=1) AT PROTOCOL.C:478#10 0XFE8552D4 IN AP_PROXY_READ_HEADERS (R=0X1821D0, RR=0X1671B8,    BUFFER=0XFFBECCD8 CONTENT-LENGTH, SIZE=8192, C=0X1671B8)    AT PROXY_UTIL.C:457#11 0XFE833014 IN AP_PROXY_HTTP_PROCESS_RESPONSE (P=0X157960, R=0X1821D0,    P_CONN=0X157EE8, ORIGIN=0X158168, BACKEND=0X157F00, CONF=0XF0268,    BB=0X157E98, SERVER_PORTSTR=0XFFBEED68 :47290) AT PROXY_HTTP.C:755#12 0XFE833BA4 IN AP_PROXY_HTTP_HANDLER (R=0X1821D0, CONF=0XF0268,    URL=0X158038EROOMASPCOOKIETEST.ASP?FACILITY=MEMEPORT&URL=%2FEROOM%2FMEMEPORT%2FMARTONIA%2F0_2615,PROXYNAME=0X0, PROXYPORT=60776) AT PROXY_HTTP.C:1121#13 0XFE85435C IN PROXY_RUN_SCHEME_HANDLER (R=0X1821D0, CONF=0XF0268,    URL=0X1839CEHTTPS:EROOMHOST.AAA.BBB.COMEROOMASPCOOKIETEST.ASP?FACILITY=MEMEPORT&URL=%2FEROOM%2FMEMEPORT%2FMARTONIA%2F0_2615,PROXYHOST=0X0,    PROXYPORT=0) AT MOD_PROXY.C:1113#14 0XFE852ED8 IN PROXY_HANDLER (R=0X1821D0) AT MOD_PROXY.C:418#15 0X359A8 IN AP_RUN_HANDLER (R=0X1821D0) AT CONFIG.C:151#16 0X35FA4 IN AP_INVOKE_HANDLER (R=0X1821D0) AT CONFIG.C:358#17 0X32C44 IN AP_PROCESS_REQUEST (R=0X1821D0) AT HTTP_REQUEST.C:246#18 0X2DF14 IN AP_PROCESS_HTTP_CONNECTION (C=0X157A70) AT HTTP_CORE.C:250#19 0X40090 IN AP_RUN_PROCESS_CONNECTION (C=0X157A70) AT CONNECTION.C:42#20 0X403A4 IN AP_PROCESS_CONNECTION (C=0X157A70, CSD=0X157998)    AT CONNECTION.C:175#21 0X3422C IN CHILD_MAIN (CHILD_NUM_ARG=5) AT PREFORK.C:609#22 0X343AC IN MAKE_CHILD (S=0X8EDB0, SLOT=5) AT PREFORK.C:703#23 0X345FC IN PERFORM_IDLE_SERVER_MAINTENANCE (P=0X8C690) AT PREFORK.C:838#24 0X34A34 IN AP_MPM_RUN (_PCONF=0X0, PLOG=0X63400, S=0X83000)    AT PREFORK.C:1039#25 0X3AD44 IN MAIN (ARGC=3, ARGV=0XFFBEF4AC) AT MAIN.C:617","SUMMARY":"SEGMENTATION FAULT IN CHAR_BUFFER_READ WHEN REVERSE PROXYING SSL","CLASS":1}
{"ID_DEFECT":"30585","DESCRIPTION":"(INITIALLY REPORTED AS SITIC VULNERABILITY ADVISORY SA04-001, REDEFINED AS BUG AFTER DISCUSSION WITH ASF HTTPD SECURITY TEAM)APACHES MOD_SSL MODULE SUFFERS FROM A FORMAT STRING BUG WHEN LOGGINGINFORMATION ABOUT CRLS. IF AN ADMINISTRATOR INSTALLS A MALICIOUS CRL FILE,THIS BUG CAN LEAD TO THE EXECUTION OF ARBITRARY CODE.THE FUNCTION SSL_CALLBACK_SSLVERIFY_CRL() IN MODULESSSLSSL_ENGINE_KERNEL.CCALLS AP_LOG_ERROR() WITH DATA FROM THE CRL AS THE FORMAT STRING INSTEAD OFUSING THE DATA AS PARAMETERS, LEADING TO A SECURITY BREACH.THIS BUG WAS DISCOVERED BY ULF HARNHAMMAR FOR SITIC, SWEDISH IT INCIDENT CENTRE.THE INCLUDED PATCH ISSUE1.PATCH IS OUR ATTEMPT AT CORRECTING THIS ISSUE:--- MODULESSSLSSL_ENGINE_KERNEL.CT2004-06-07 12:18:37.000000000 +0200+++ MODULESSSLSSL_ENGINE_KERNEL.C.ULFT2004-08-02 12:49:18.000000000 +0200@@ -1372,7 +1372,7 @@              BIO_FREE(BIO); -            AP_LOG_ERROR(APLOG_MARK, APLOG_DEBUG, 0, S, BUFF);+            AP_LOG_ERROR(APLOG_MARK, APLOG_DEBUG, 0, S, %S, BUFF);                   *","SUMMARY":"APACHE MOD_SSL CRL FORMAT STRING BUG","CLASS":1}
{"ID_DEFECT":"31083","DESCRIPTION":"SSL_ENGINE_IO.C LINE 1029WHEN HTTP1.0 HTTPS PROXY REQUEST (NOT HTTP1.1 CONNECT),AND SSL_CONNECTFAIL(BECAUSE OF INVALID CERT ETC.), SSL_IO_FILTER_CONNECT RETURNS SUCCESS.THEN NEXT PHASE,APACHE SEND REQUEST FAIL,AND HTTP STAUS INTERNAL SERVER ERROR.IN THIS CASE,SSL_IO_FILTER_CONNECT MIGHT RETURNS HTTP_BAD_GATEWAY.","SUMMARY":"INTERNAL SERVER ERROR WHEN HTTP1.0 PROXY REQUEST AND SERVER RETURNS INVALID CERT","CLASS":1}
{"ID_DEFECT":"31505","DESCRIPTION":"OVERVIEW: FOR A LOCATION A SSL CIPHERSUITE IS CONFIGURED, LETS SAY DES-CBC3-SHA.AND THAT CIPHERSUITE IS NOT CONTAINED IN THE CIPHERSUITES CONFIGURED FOR THE SERVER OR VIRTUAL HOST, LETS SAY RC4-MD5:DES-CBC3-SHA.IF THAT LOCATION WILL BE ACCESSED A RENEGOTIATION IS TRIGGERED IN SSL_ENGINE_KERNEL.C LINE 283 FF ABOUT THE CHANGED CIPHERSUITE.BUT IF THE CLIENT WANTS TO RESUME THE PREVIOUS SESSION THE SERVER I.E WILL ACCEPT THAT. THAT MEANS A REDUCED HANDSHAKE WILL BE MADE, AND THE CURRENT CIPHER REMAINS UNCHANGED!FROM A OPENSSL POINT OF VIEW IT IS CORRECT, BECAUSE OPENSSL CAN NOTKNOW THE REASON FOR THAT RENEGOTIATION. (SEE ALSO THE SSL SPEC.)BUT AWARE OF THAT IN OPENSSL 0.9.7 A NEW FLAGSSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION HAS BEEN INTRODUCED.STEPS TO REPRODUCE:O SETUP A APACHE AS DESCRIPED ABOVE:  SSL CACHING ENABLED, AND FOR EXAMPLE RC4-MD5,DES-CBC3-SHA  CONFIGURED FOR THE VIRTUAL HOST, AND DES-CBC3-SHA CONFIGURED  FOR THE  LOCATIONO CONNECT WITH A JAVA CLIENT USING JSSE 1.4O IN THE ERROR_LOG CAN BE SEEN THAT THERE IS STILL THE INITIAL  CIPHER RC4-MD5 USED AFTER THE RENEGOTIATION.(A SSLDUMP IS ATTACHED BELLOW)THAT SCENARIO HAS BEEN TESTED WITH DIFFERENT NON-JAVA CLIENTS(MSIE, MOZILLA). THE DESCRIBED PROBLEM DOES NOT ARISE, BECAUSE THESE CLIENT ARE NOT TRYING TO RESUME DURING THE RENEGOTIATION.PATCH:*** SSL_ENGINE_INIT.C.PATCHED   FRI OCT  1 14:15:46 2004--- SSL_ENGINE_INIT.C   MON JUN  7 12:18:37 2004****************** 439,450 ****       * CONFIGURE ADDITIONAL CONTEXT INGREDIENTS       *      SSL_CTX_SET_OPTIONS(CTX, SSL_OP_SINGLE_DH_USE);--     * NO RESUMTION FOR A ACTIVE RENEGOTIATION *- #IF (OPENSSL_VERSION_NUMBER >= 0X00907000)-       SSL_CTX_SET_OPTIONS(CTX, SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION);- #ENDIF-    STATIC VOID SSL_INIT_CTX_SESSION_CACHE(SERVER_REC *S,--- 439,444 ----SSLDUMP:NEW TCP CONNECTION #1: ADNPOOL01.ZH.ADNOVUM.CH(36320) <-> DOUG.ADNOVUM.CH(44300)1 1  0.0119 (0.0119)  C>S SSLV2 COMPATIBLE CLIENT HELLO  VERSION 3.1  CIPHER SUITES  TLS_RSA_WITH_RC4_128_MD5  SSL2_CK_RC4  TLS_RSA_WITH_RC4_128_SHA  UNKNOWN VALUE 0X2F  UNKNOWN VALUE 0X33  UNKNOWN VALUE 0X32  TLS_RSA_WITH_3DES_EDE_CBC_SHA  SSL2_CK_3DES  TLS_DHE_RSA_WITH_3DES_EDE_CBC_SHA  TLS_DHE_DSS_WITH_3DES_EDE_CBC_SHA  TLS_RSA_WITH_DES_CBC_SHA  SSL2_CK_DES  TLS_DHE_RSA_WITH_DES_CBC_SHA  TLS_DHE_DSS_WITH_DES_CBC_SHA  TLS_RSA_EXPORT_WITH_RC4_40_MD5  SSL2_CK_RC4_EXPORT40  TLS_RSA_EXPORT_WITH_DES40_CBC_SHA  TLS_DHE_RSA_EXPORT_WITH_DES40_CBC_SHA  TLS_DHE_DSS_EXPORT_WITH_DES40_CBC_SHA1 2  0.0153 (0.0034)  S>C  HANDSHAKE      SERVERHELLO        VERSION 3.1        SESSION_ID[32]=          0E 5E DE 9D 66 47 36 ED 52 AD 43 E5 3F E8 4B 65          96 D4 47 F2 E7 00 F0 0F 81 4F 91 54 3C 55 97 F4        CIPHERSUITE         TLS_RSA_WITH_RC4_128_MD5        COMPRESSIONMETHOD                   NULL1 3  0.0153 (0.0000)  S>C  HANDSHAKE      CERTIFICATE1 4  0.0153 (0.0000)  S>C  HANDSHAKE      SERVERHELLODONE1 5  0.1112 (0.0959)  C>S  HANDSHAKE      CLIENTKEYEXCHANGE1 6  0.1175 (0.0062)  C>S  CHANGECIPHERSPEC1 7  0.1252 (0.0076)  C>S  HANDSHAKE      FINISHED1 8  0.1905 (0.0653)  S>C  CHANGECIPHERSPEC1 9  0.1905 (0.0000)  S>C  HANDSHAKE      FINISHED1 10 0.2025 (0.0120)  C>S  APPLICATION_DATA    ---------------------------------------------------------------    GET INDEX.HTML HTTP1.1    USER-AGENT: HTTPUNIT-CLIENT    ACCEPT-ENCODING: GZIP    CACHE-CONTROL: NO-CACHE    PRAGMA: NO-CACHE    HOST: DOUG.ADNOVUM.CH:44300    ACCEPT: TEXTHTML, IMAGEGIF, IMAGEJPEG, *; Q=.2, **; Q=.2    CONNECTION: KEEP-ALIVE    ---------------------------------------------------------------1 11 0.2051 (0.0025)  S>C  HANDSHAKE      HELLOREQUEST1 12 0.2071 (0.0019)  C>S  HANDSHAKE      CLIENTHELLO        VERSION 3.1        RESUME [32]=          0E 5E DE 9D 66 47 36 ED 52 AD 43 E5 3F E8 4B 65          96 D4 47 F2 E7 00 F0 0F 81 4F 91 54 3C 55 97 F4        CIPHER SUITES        TLS_RSA_WITH_RC4_128_MD5        TLS_RSA_WITH_RC4_128_SHA        UNKNOWN VALUE 0X2F        UNKNOWN VALUE 0X33        UNKNOWN VALUE 0X32        TLS_RSA_WITH_3DES_EDE_CBC_SHA        TLS_DHE_RSA_WITH_3DES_EDE_CBC_SHA        TLS_DHE_DSS_WITH_3DES_EDE_CBC_SHA        TLS_RSA_WITH_DES_CBC_SHA        TLS_DHE_RSA_WITH_DES_CBC_SHA        TLS_DHE_DSS_WITH_DES_CBC_SHA        TLS_RSA_EXPORT_WITH_RC4_40_MD5        TLS_RSA_EXPORT_WITH_DES40_CBC_SHA        TLS_DHE_RSA_EXPORT_WITH_DES40_CBC_SHA        TLS_DHE_DSS_EXPORT_WITH_DES40_CBC_SHA        COMPRESSION METHODS                  NULL1 13 0.2113 (0.0042)  S>C  HANDSHAKE      SERVERHELLO        VERSION 3.1        SESSION_ID[32]=          0E 5E DE 9D 66 47 36 ED 52 AD 43 E5 3F E8 4B 65          96 D4 47 F2 E7 00 F0 0F 81 4F 91 54 3C 55 97 F4        CIPHERSUITE         TLS_RSA_WITH_RC4_128_MD5        COMPRESSIONMETHOD                   NULL1 14 0.2113 (0.0000)  S>C  CHANGECIPHERSPEC1 15 0.2113 (0.0000)  S>C  HANDSHAKE      FINISHED1 16 0.2190 (0.0076)  C>S  CHANGECIPHERSPEC1 17 0.2195 (0.0005)  C>S  HANDSHAKE      FINISHED1 18 0.3120 (0.0925)  S>C  APPLICATION_DATA    ---------------------------------------------------------------    HTTP1.1 200 OK    DATE: FRI, 01 OCT 2004 12:27:19 GMT    SERVER: APACHE    CONTENT-TYPE: TEXTHTML    CONTENT-LENGTH: 383    CONNECTION: CLOSE    ---------------------------------------------------------------1 19 0.3120 (0.0000)  S>C  APPLICATION_DATA    ---------------------------------------------------------------    <!DOCTYPE HTML PUBLIC -W3CDTD HTML 4.0 TRANSITIONALENHTTP:WWW.W3.ORGTRREC-HTML40LOOSE.DTD>    <HTML>    <HEAD>    <TITLE>WELCOME<TITLE>    <LINK REL=STYLESHEET HREF=CSSSTYLES.CSS TYPE=TEXTCSS><HEAD>    <BODY BGCOLOR=#FFFFFF>    <CENTER><H2>    <DIV ALIGN=RIGHT><IMG SRC=IMGNEVIS_F2.GIF BORDER=0 ><DIV>    WELCOME TO THE NEVISWEB REVERSE PROXY    <H2><CENTER>    <BODY><HTML>    ---------------------------------------------------------------1 20 0.3134 (0.0014)  S>C  ALERT    LEVEL           WARNING    VALUE           CLOSE_NOTIFY1    0.3142 (0.0007)  S>C  TCP FIN1 21 0.3173 (0.0031)  C>S  ALERT    LEVEL           WARNING    VALUE           CLOSE_NOTIFY1    0.3176 (0.0003)  C>S  TCP FIN","SUMMARY":"SSLCIPHERSUITE CAN BE BYPASSED DURING RENEGOTIATION","CLASS":1}
{"ID_DEFECT":"31848","DESCRIPTION":"APACHE 2 (SELF-COMPILED) ON OPENBSD 3.5THE CHILD PROCESS CRASHES WHEN I TRY TO ACCESS A PASSWORD-PROTECTED (AUTHTYPE DIGEST, REQUIRE VALID-USER) AREA ON A VIRTUAL HOST WHICH ALSO HAS SSLENGINE ON. THE REQUEST THAT CAUSES THE CRASH NEED NOT BE OVER SSL. AFTER THE REQUEST, I GET TONS OF THE FOLLOWING MESSAGES IN MY ERROR_LOG:[WED OCT 20 23:33:02 2004] [NOTICE] CHILD PID 748 EXIT SIGNAL SEGMENTATION FAULT (11)[WED OCT 20 23:33:02 2004] [NOTICE] CHILD PID 21686 EXIT SIGNAL SEGMENTATION FAULT (11)[WED OCT 20 23:33:02 2004] [NOTICE] CHILD PID 11754 EXIT SIGNAL SEGMENTATION FAULT (11)[WED OCT 20 23:33:02 2004] [NOTICE] CHILD PID 25724 EXIT SIGNAL SEGMENTATION FAULT (11)...I STARTED APACHE UNDER GDB IN -X MODE AND GOT THE FOLLOWING BACK TRACE:PROGRAM RECEIVED SIGNAL SIGSEGV, SEGMENTATION FAULT.0X1C0441D0 IN SSL_HOOK_USERCHECK (R=0X3C19C050) AT SSL_ENGINE_KERNEL.C:848848         IF (!(SC->ENABLED && SSLCONN->SSL && SSLCONN->CLIENT_CERT) ||(GDB) BT#0  0X1C0441D0 IN SSL_HOOK_USERCHECK (R=0X3C19C050) AT SSL_ENGINE_KERNEL.C:848#1  0X1C099C5B IN AP_RUN_CHECK_USER_ID (R=0X3C19C050) AT REQUEST.C:69#2  0X1C09A5ED IN AP_PROCESS_REQUEST_INTERNAL (R=0X3C19C050) AT REQUEST.C:192#3  0X1C056D0F IN AP_PROCESS_REQUEST (R=0X3C19C050) AT HTTP_REQUEST.C:244#4  0X1C051C3C IN AP_PROCESS_HTTP_CONNECTION (C=0X3C196128) AT HTTP_CORE.C:250#5  0X1C08DE1B IN AP_RUN_PROCESS_CONNECTION (C=0X3C196128) AT CONNECTION.C:42#6  0X1C08E18D IN AP_PROCESS_CONNECTION (C=0X3C196128, CSD=0X3C196050)    AT CONNECTION.C:175#7  0X1C081084 IN CHILD_MAIN (CHILD_NUM_ARG=0) AT PREFORK.C:609#8  0X1C081148 IN MAKE_CHILD (S=0X3C0469E8, SLOT=0) AT PREFORK.C:649#9  0X1C081257 IN STARTUP_CHILDREN (NUMBER_TO_START=5) AT PREFORK.C:721#10 0X1C0815D2 IN AP_MPM_RUN (_PCONF=0X3C042018, PLOG=0X3C088018, S=0X3C0469E8)    AT PREFORK.C:940#11 0X1C087E81 IN MAIN (ARGC=3, ARGV=0XCFBF7DE8) AT MAIN.C:617#12 0X1C022671 IN ___START ()#13 0X1C0225E7 IN __START ()#14 0XCFBF7F5C IN ?? ()APACHE WAS CONFIGURED LIKE THIS:.CONFIGURE --PREFIX=USRLOCALAPACHE2 --ENABLE-EXT-FILTER --ENABLE-EXP --ENABLE-HEADERS --ENABLE-UNIQUE-ID --ENABLE-SSL --ENABLE-DAV --ENABLE-SPELING --ENABLE-REWRITE --ENABLE-INFO --ENABLE-AUTH-DIGEST --ENABLE-DEFLATE --ENABLE-PROXY --ENABLE-EXPIRES --ENABLE-SO","SUMMARY":"SEGV SSL_HOOK_USERCHECK (R=0X3C19C050) AT SSL_ENGINE_KERNEL.C:848","CLASS":1}
{"ID_DEFECT":"34520","DESCRIPTION":"CONFIGURE:==========CONFIGURE_OPTIONS=--PREFIX=$(DIR_PROD) --ENABLE-SSL--WITH-SSL=$(OPENSSL_DIRECTORY)                     --ENABLE-MODS-SHARED=MOST --WITH-MPM=WORKER--WITHOUT-BERKELEY-DB                    --WITH-EXPAT=$(DIR_SRC)$(CURRENT_DISTRO)SRCLIBAPR-UTILXMLEXPAT   ENVIRONMENT:============OSLEVEL -R5200-02OROSLEVEL -R4330-11BOTH ENVIRONMENTS USING VISUAL AGE CC++ AT V6 WITH FEBRUARY 2005 PTFS APPLIED(IE. FAIRLY UP-TO-DATE ...).LSLPP -L VAC*  FILESET                      LEVEL  STATE  TYPE  DESCRIPTION (UNINSTALLER)  ----------------------------------------------------------------------------  VAC.C                     6.0.0.11    A     F    C FOR AIX COMPILER  VAC.C.README.IBM           6.0.0.1    A     F    C FOR AIX IFORLS INFORMATION  VAC.DT.COMMON              6.0.0.0    C     F    C FOR AIX DESKTOP INTEGRATION                                                   COMMON FILES  VAC.DT.HELP                6.0.0.0    C     F    C FOR AIX HELP DESKTOP                                                   INTEGRATION  VAC.HTML.DBCS.SEARCH       6.0.0.0    C     F    C FOR AIX COMPILER                                                   DOCUMENTATION SEARCH DOUBLE                                                   BYTE COMMON FILES  VAC.HTML.EN_US             6.0.0.0    C     F    C FOR AIX COMPILER                                                   DOCUMENTATION (HTML)--U.S.                                                   ENGLISH UTF  VAC.HTML.JA_JP             6.0.0.0    C     F    C FOR AIX COMPILER                                                   DOCUMENTATION (HTML)--JAPANESE                                                   UTF  VAC.HTML.JA_JP.C           6.0.0.0    C     F    C FOR AIX COMPILER                                                   DOCUMENTATION (HTML)--JAPANESE  VAC.HTML.JA_JP.SEARCH      6.0.0.0    C     F    C FOR AIX COMPILER                                                   DOCUMENTATION SEARCH--JAPANESE  VAC.HTML.SBCS.SEARCH       6.0.0.0    C     F    C FOR AIX COMPILER                                                   DOCUMENTATION SEARCH SINGLE                                                   BYTE COMMON FILES  VAC.HTML.ZH_CN             6.0.0.0    C     F    C FOR AIX COMPILER                                                   DOCUMENTATION                                                   (HTML)--SIMPLIFIED CHINESE UTF  VAC.HTML.COMMON.SEARCH     6.0.0.0    C     F    C FOR AIX COMPILER                                                   DOCUMENTATION SEARCH COMMON                                                   FILES  VAC.HTML.EN_US.C           6.0.0.0    C     F    C FOR AIX COMPILER                                                   DOCUMENTATION (HTML)--U.S.                                                   ENGLISH  VAC.HTML.EN_US.SEARCH      6.0.0.0    C     F    C FOR AIX COMPILER                                                   DOCUMENTATION SEARCH--U.S.                                                   ENGLISH  VAC.HTML.JA_JP             6.0.0.0    C     F    C FOR AIX COMPILER                                                   DOCUMENTATION (HTML)--JAPANESE                                                   IBM-EUCJP  VAC.HTML.ZH_CN.C           6.0.0.0    C     F    C FOR AIX COMPILER                                                   DOCUMENTATION                                                   (HTML)--SIMPLIFIED CHINESE  VAC.HTML.ZH_CN.SEARCH      6.0.0.0    C     F    C FOR AIX COMPILER                                                   DOCUMENTATION                                                   SEARCH--SIMPLIFIED CHINESE  VAC.LIC                    6.0.0.0    C     F    C FOR AIX LICENCE FILES  VAC.MSG.EN_US.C            6.0.0.2    A     F    C FOR AIX COMPILER MESSAGES -                                                   EN_US  VAC.NDI                    6.0.0.7    A     F    C FOR AIX NON-DEFAULT                                                   INSTALLATION SCRIPT  VAC.PDF.EN_US.C            6.0.0.0    C     F    C FOR AIX DOCUMENTATION                                                   (PDF)--U.S. ENGLISH  VACPP.DT.COMMON            6.0.0.0    C     F    VISUALAGE C++ DESKTOP                                                   INTEGRATION COMMON FILES  VACPP.DT.HELP              6.0.0.0    C     F    VISUALAGE C++ HELP DESKTOP                                                   INTEGRATION  VACPP.CMP.AIX50.LIB       6.0.0.10    A     F    VISUALAGE C++ LIBRARIES FOR                                                   AIX 5.0  VACPP.CMP.AIX50.TOOLS      6.0.0.1    A     F    VISUALAGE C++ TOOLS FOR AIX                                                   5.0  VACPP.CMP.CORE            6.0.0.12    A     F    VISUALAGE C++ COMPILER  VACPP.CMP.INCLUDE         6.0.0.10    A     F    VISUALAGE C++ COMPILER INCLUDE                                                   FILES  VACPP.CMP.LIB              6.0.0.0    C     F    VISUALAGE C++ LIBRARIES  VACPP.CMP.RTE              6.0.0.0    C     F    VISUALAGE C++ COMPILER                                                   APPLICATION RUNTIME  VACPP.CMP.TOOLS           6.0.0.10    A     F    VISUALAGE C++ TOOLS  VACPP.HTML.DBCS            6.0.0.0    C     F    VISUALAGE C++ DOCUMENTATION                                                   (HTML)--DOUBLE BYTE COMMON                                                   FILES  VACPP.HTML.EN_US           6.0.0.0    C     F    VISUALAGE C++ DOCUMENTATION                                                   (HTML)--U.S. ENGLISH UTF  VACPP.HTML.JA_JP           6.0.0.0    C     F    VISUALAGE C++ DOCUMENTATION                                                   (HTML)--JAPANESE UTF  VACPP.HTML.JA_JP           6.0.0.0    C     F    VISUALAGE C++ DOCUMENTATION                                                   (HTML)--JAPANESE  VACPP.HTML.SBCS            6.0.0.0    C     F    VISUALAGE C++ DOCUMENTATION                                                   (HTML)--SINGLE BYTE COMMON                                                   FILES  VACPP.HTML.ZH_CN           6.0.0.0    C     F    VISUALAGE C++ DOCUMENTATION                                                   (HTML)--SIMPLIFIED CHINESE UTF  VACPP.HTML.COMMON          6.0.0.0    C     F    VISUALAGE C++ DOCUMENTATION                                                   (HTML)--COMMON FILES  VACPP.HTML.EN_US           6.0.0.0    C     F    VISUALAGE C++ DOCUMENTATION                                                   (HTML)--U.S. ENGLISH  VACPP.HTML.HELP            6.0.0.0    C     F    VISUALAGE C++ HTML HELP ENGINE  VACPP.HTML.JA_JP           6.0.0.0    C     F    VISUALAGE C++ DOCUMENTATION                                                   (HTML)--JAPANESE IBM-EUCJP  VACPP.HTML.ZH_CN           6.0.0.0    C     F    VISUALAGE C++ DOCUMENTATION                                                   (HTML)--SIMPLIFIED CHINESE  VACPP.LIC                  6.0.0.0    C     F    VISUALAGE C++ LICENCE FILES  VACPP.MEMDBG.AIX50.LIB     6.0.0.7    A     F    VA C++ USER HEAPMEMORY DEBUG                                                   AIX 5.0 LIBRARIES  VACPP.MEMDBG.AIX50.RTE    6.0.0.10    A     F    VA C++ USER HEAPMEMORY DEBUG                                                   AIX 5.0 RUNTIME  VACPP.MEMDBG.LIB           6.0.0.0    C     F    VISUALAGE C++ USER HEAP AND                                                   MEMORY DEBUG STATIC LIBRARIES  VACPP.MEMDBG.RTE           6.0.0.0    C     F    VISUALAGE C++ USER HEAP AND                                                   MEMORY DEBUG RUNTIME  VACPP.MSG.EN_US.CMP.CORE   6.0.0.7    A     F    VISUALAGE COMPILER C++                                                   MESSAGES--U.S. ENGLISH  VACPP.MSG.EN_US.CMP.TOOLS  6.0.0.0    C     F    VISUALAGE C++ TOOLS                                                   MESSAGES--U.S. ENGLISH  VACPP.MSG.EN_US.HTML.HELP  6.0.0.0    C     F    VISUALAGE C++ HELP ENGINE                                                   MESSAGES--U.S. ENGLISH  VACPP.NDI                  6.0.0.7    A     F    VISUALAGE C++ NON-DEFAULT                                                   INSTALLATION SCRIPT  VACPP.PDF.JA_JP            6.0.0.0    C     F    VISUALAGE C++ DOCUMENTATION                                                   (PDF)--JAPANESE  VACPP.PDF.COMMON           6.0.0.0    C     F    VISUALAGE C++ DOCUMENTATION                                                   (PDF)--COMMON FILES  VACPP.PDF.EN_US            6.0.0.0    C     F    VISUALAGE C++ DOCUMENTATION                                                   (PDF)--U.S. ENGLISH  VACPP.PDF.ZH_CN            6.0.0.0    C     F    VISUALAGE C++ DOCUMENTATION                                                   (PDF)--SIMPLIFIED CHINESE  VACPP.SAMPLES.ANSICL       6.0.0.6    A     F    ANSI CLASS LIBRARY SAMPLESCAUSE:======  SIGNATURE:  VOBSOPENSSLPRODINCLUDEOPENSSLSSL2.H:  SSL_SESSION *D2I_SSL_SESSION(SSL_SESSION **A,CONST UNSIGNED CHAR * CONST *PP,TTT     LONG LENGTH);  CODE:    PSESSION = D2I_SSL_SESSION(NULL, &PTR, SSL_SESSION_MAX_DER);  PRE-PROCESSED:  UNSIGNED CHAR *PTR;  ...  PSESSION = D2I_SSL_SESSION(0, &PTR, 1024*10);                  CC=XLC_RBUG:====GMAKE[4]: ENTERING DIRECTORY `VOBSAPACHESRCHTTPD-2.0.54MODULESSSLVOBSAPACHESRCHTTPD-2.0.54SRCLIBAPRLIBTOOL --SILENT --MODE=COMPILE XLC_R -G -QHALT=E    -U__STR__ -D_THREAD_SAFE -D_USE_IRS   -IVOBSAPACHESRCHTTPD-2.0.54SRCLIBAPRINCLUDE-IVOBSAPACHESRCHTTPD-2.0.54SRCLIBAPR-UTILINCLUDE-IVOBSAPACHESRCHTTPD-2.0.54SRCLIBAPR-UTILXMLEXPATLIB -I.-IVOBSAPACHESRCHTTPD-2.0.54OSUNIX-IVOBSAPACHESRCHTTPD-2.0.54SERVERMPMWORKER-IVOBSAPACHESRCHTTPD-2.0.54MODULESHTTP-IVOBSAPACHESRCHTTPD-2.0.54MODULESFILTERS-IVOBSAPACHESRCHTTPD-2.0.54MODULESPROXY-IVOBSAPACHESRCHTTPD-2.0.54INCLUDE-IVOBSAPACHESRCHTTPD-2.0.54MODULESGENERATORS-IVOBSOPENSSLPRODINCLUDEOPENSSL -IVOBSOPENSSLPRODINCLUDE-IVOBSAPACHESRCHTTPD-2.0.54MODULESDAVMAIN -PREFER-PIC -CSSL_SCACHE_SHMCB.C && TOUCH SSL_SCACHE_SHMCB.SLOSSL_SCACHE_SHMCB.C, LINE 1248.46: 1506-280 (E) FUNCTION ARGUMENT ASSIGNMENTBETWEEN TYPES CONST UNSIGNED CHAR* CONST* AND UNSIGNED CHAR** IS NOT ALLOWED.SSL_SCACHE_SHMCB.C, LINE 1327.46: 1506-280 (E) FUNCTION ARGUMENT ASSIGNMENTBETWEEN TYPES CONST UNSIGNED CHAR* CONST* AND UNSIGNED CHAR** IS NOT ALLOWED.GMAKE[4]: *** [SSL_SCACHE_SHMCB.SLO] ERROR 1GMAKE[4]: LEAVING DIRECTORY `VOBSAPACHESRCHTTPD-2.0.54MODULESSSLGMAKE[3]: *** [SHARED-BUILD-RECURSIVE] ERROR 1GMAKE[3]: LEAVING DIRECTORY `VOBSAPACHESRCHTTPD-2.0.54MODULESSSLGMAKE[2]: *** [SHARED-BUILD-RECURSIVE] ERROR 1GMAKE[2]: LEAVING DIRECTORY `VOBSAPACHESRCHTTPD-2.0.54MODULESGMAKE[1]: *** [SHARED-BUILD-RECURSIVE] ERROR 1GMAKE[1]: LEAVING DIRECTORY `VOBSAPACHESRCHTTPD-2.0.54GMAKE: *** [ALL-RECURSIVE] ERROR 1","SUMMARY":"COPE WITH OPENSSL 0.9.7G API CHANGES","CLASS":1}
{"ID_DEFECT":"35081","DESCRIPTION":"I FOUND A BUFFER OVERRUN IN SSL_CALLBACK_SSLVERIFY_CRL( ) - SSL_ENGINE_KERNEL.C: CHAR BUFF[512]; * SHOULD BE PLENTY *[...]N = BIO_READ(BIO, BUFF, SIZEOF(BUFF));BUFF[N] = 0; IF THERE ARE MORE THAN 512 BYTES, N=512, THUS WE WRITE IN BUFF[512].WE SHOULD USE    N = BIO_READ(BIO, BUFF, SIZEOF(BUFF) - 1);THIS COULD LEAD TO A SYSTEM CRASH.","SUMMARY":"BUFFER OVERRUN IN SSL_CALLBACK_SSLVERIFY_CRL( ) (SSL_ENGINE_KERNEL.C)","CLASS":1}
{"ID_DEFECT":"35469","DESCRIPTION":"THIS MIGHT BE RELATED TO BUG# 34520I WAS ABLE TO BUILD APACHE 2.0.54 WITH MOD_SSL ON SOLAIS 9 USING OPENSSL 0.9.7G.HTTPD WILL START WITH ANY CLEAR TEXT KEY CREATED USING:OPENSSL GENRSA -OUT CLR.RSA 1024 OROPENSSL PKCS8 -NOCRYPT -TOPK8 -IN CLR.RSA -OUT CLR.PKCS8ALSO STARTS FINE, PROMPTING FOR PASS PHRASE, IF KEY WAS CREATED WITH:OPENSSL RSA -IN CLR.RSA -DES -OUT ENC.RSAHOWEVER, IT WILL NOT ACCEPT THE PASS PHRASE FOR ANY KEY CREATED USING:OPENSSL PKCS8 -V1 PBE-MD5-DES -IN CLR.RSA -TOPK8 -OUT ENC.DES.V1.PKCS8 OROPENSSL PKCS8 -V2 DES -IN CLR.RSA -TOPK8 -OUT ENC.DES.V2.PKCS8 OROPENSSL PKCS8 -V2 DES3 -IN CLR.RSA -TOPK8 -OUT ENC.DES3.V2.PKCS8ALL OF THE CREATED KEYS ARE READABLE AND RESULTS IDENTICAL WHEN THE COMMAND:OPENSSL RSA -IN <KEYFILE> -NOOUT -TEXTIS ISSUED AGAINST THEM.ONE OF THE CORE OPENSSL DEVELOPERS SUGGESTS THAT:THEY MAY BE MISSING SOME CALLS TO ADD THE PBE ALGORITHMS. THIS IS AUTOMATIC IFYOU CALL OPENSSL_ADD_ALL_ALGORITHMS() BUT NEEDS TO BE HANDLED IF ALGORITHMSARE BEING ADDED MANUALLY.ADDITIONAL INFORMATION:MOD_JK AND MPM_WORKER ARE ALSO BUILT-IN. WHEN STARTED WITH A CLEAR TEXT KEY OR AENCRYPTED KEY IN THE OLD FORMAT, THE SERVER RUNS FLAWLESSLY.","SUMMARY":"FAILS TO DECRYPT PKCS#8 KEYFILE","CLASS":1}
{"ID_DEFECT":"35757","DESCRIPTION":"I HAVE UPDATED THE BRAND NEW OPENSSL 0.9.8 FROM SOURCES AS I DO USUALLY :.CONFIGURE --PREFIX=OPTOPENSSL-0.9.8 LINUX-ELFMAKE && MAKE INSTALLTHEN IVE TRIED TO UPDATE MY APACHE :.CONFIGURE --PREFIX=OPTAPACHE --MANDIR=USRSHAREMAN --ENABLE-SSL--ENABLE-DAV --ENABLE-DAV-FS U2013-ENABLE-SO --ENABLE-REWRITE--WITH-SSL=OPTOPENSSL-0.9.8HOMEKERMITA_SAUVERHTTPD-2.0.54SRCLIBAPRLIBTOOL --SILENT--MODE=COMPILE GCC  -G -O2 -PTHREAD    -DLINUX=2 -D_REENTRANT-D_XOPEN_SOURCE=500 -D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE-DAP_HAVE_DESIGNATED_INITIALIZER-IHOMEKERMITA_SAUVERHTTPD-2.0.54SRCLIBAPRINCLUDE-IHOMEKERMITA_SAUVERHTTPD-2.0.54SRCLIBAPR-UTILINCLUDE-IHOMEKERMITA_SAUVERHTTPD-2.0.54SRCLIBAPR-UTILXMLEXPATLIB -I.-IHOMEKERMITA_SAUVERHTTPD-2.0.54OSUNIX-IHOMEKERMITA_SAUVERHTTPD-2.0.54SERVERMPMPREFORK-IHOMEKERMITA_SAUVERHTTPD-2.0.54MODULESHTTP-IHOMEKERMITA_SAUVERHTTPD-2.0.54MODULESFILTERS-IHOMEKERMITA_SAUVERHTTPD-2.0.54MODULESPROXY-IHOMEKERMITA_SAUVERHTTPD-2.0.54INCLUDE-IHOMEKERMITA_SAUVERHTTPD-2.0.54MODULESGENERATORS-IOPTOPENSSL-0.9.8INCLUDEOPENSSL -IOPTOPENSSL-0.9.8INCLUDE-IHOMEKERMITA_SAUVERHTTPD-2.0.54MODULESDAVMAIN -PREFER-NON-PIC-STATIC -C SSL_ENGINE_PPHRASE.C && TOUCH SSL_ENGINE_PPHRASE.LOSSL_ENGINE_PPHRASE.C: IN FUNCTION `SSL_PPHRASE_HANDLE_CB:SSL_ENGINE_PPHRASE.C:684: `PEM_F_DEF_CALLBACK UNDECLARED (FIRST USE INTHIS FUNCTION)SSL_ENGINE_PPHRASE.C:684: (EACH UNDECLARED IDENTIFIER IS REPORTED ONLY ONCESSL_ENGINE_PPHRASE.C:684: FOR EACH FUNCTION IT APPEARS IN.)MAKE[3]: *** [SSL_ENGINE_PPHRASE.LO] ERREUR 1MAKE[3]: LEAVING DIRECTORY `HOMEKERMITA_SAUVERHTTPD-2.0.54MODULESSSLMAKE[2]: *** [ALL-RECURSIVE] ERREUR 1MAKE[2]: LEAVING DIRECTORY `HOMEKERMITA_SAUVERHTTPD-2.0.54MODULESSSLMAKE[1]: *** [ALL-RECURSIVE] ERREUR 1MAKE[1]: LEAVING DIRECTORY `HOMEKERMITA_SAUVERHTTPD-2.0.54MODULESMAKE: *** [ALL-RECURSIVE] ERREUR 1APACHE COMPILES FINE WITH OPENSSL 0.9.7E OR EVEN 0.9.7G BUT FAILS WHEN I SWITCHTO THE 0.9.8.THIS BUG SEEMS TO HAVE A SOLUTION :HTTP:MAIL-ARCHIVES.APACHE.ORGMOD_MBOXHTTPD-DEV200507.MBOX%3C20050705123248.GE23007@2SCALE.NET%3E","SUMMARY":"DOESNT COMPILE WITH OPENSSL 0.9.8 (WORKS WITH OLDERS)","CLASS":1}
{"ID_DEFECT":"37051","DESCRIPTION":"I AM BUILDING 64BIT APACHE 2.0.54, WITH SHARED LIBRARIES, AND SSL ENABLED, THE APPLICATION BUILDS WITHOUT ANY PROBLEMS, BUT WHEN RUNNING THE SERVER THE FOLLOWING ERRORS APPEAR IN THE ERROR LOG.MY OPENSSL IS 0.9.8, BUT I HAVE APPLIED THE PATCH TO MOD_SSL WHICH ALLOWS THIS VERSION OF OPENSSL TO WORK.[WED OCT 12 16:24:19 2005] [WARN] INIT: SSL SERVER IPPORT CONFLICT: WWW.PHILIPMORRIS.UK.COM:443 (ETCHTTPDCONFSSL.CONF:280) VS. WWW.QUEENSWOOD.CO.UK:443 (ETCHTTPDCONFSSL.CONF:306)[WED OCT 12 16:24:19 2005] [WARN] INIT: SSL SERVER IPPORT CONFLICT: WWW.CROWSFEET.NET:443 (ETCHTTPDCONFSSL.CONF:254) VS. WWW.QUEENSWOOD.CO.UK:443 (ETCHTTPDCONFSSL.CONF:306)[WED OCT 12 16:24:19 2005] [WARN] INIT: YOU SHOULD NOT USE NAME-BASED VIRTUAL HOSTS IN CONJUNCTION WITH SSL!![WED OCT 12 16:24:19 2005] [NOTICE] APACHE2.0.54 (UNIX) PHP5.0.5 MOD_SSL2.0.54 OPENSSL0.9.8 DAV2 CONFIGURED -- RESUMING NORMAL OPERATIONSI HAVE COMPILED APACHE UNDER SOLARIS 9, WITH GCC 3.4.2, AND ALSO IN SOLARIS 10 WITH GCC 3.4.2, AND WITH SUN STUDIO 10, AND IN EVERY INSTANCE IVE HAD THE ERRORS IN THE LOG. (SYSTEM IS A NETRA T1AC200 WITH A 500MHZ ULTRASPARC III CPU)ITS A MINOR PROBLEM, AS THE SERVER CONTINUES, AND IT CORRECTLY LINKS MY IP VIRTUAL SSL SITES TO THEIR CORRECT CERTIFICATES WITHOUT ANY PROBLEMS, IT APPEARS TO JUST BE A LOGGING ISSUE.IF I SWITCH TO A 32BIT BUILD, THEN THERE IS NO PROBLEM, THE SSL WARNING IS GONE, AND EVERYTHING WORKS FINE, BUT I WISH TO USE THE 64BIT BUILD TO GET AROUND THE STDIO LIMIT OF 255 OPEN FILES THAT SOLARIS HAS.","SUMMARY":"MOD_SSL WARNING INIT: SSL SERVER IPPORT CONFLICT.","CLASS":1}
{"ID_DEFECT":"43738","DESCRIPTION":"THESE LOGS SHOW A CONNECTION TO A FASTCGI SERVER IN A DIRECTORY WHICH REQUIRESSSL RENEGOTIATION.  MOD_FASTCGI USES THE DEPRECATED AP_GET_CLIENT_BLOCK() FAMILY TO READ POST DATA FROM THE CLIENT, BUT REWRITING IT TO USE THE UNDERLYINGAPACHE 2 APIS SHOWS IDENTICAL RESULTS.  IVE DELETED A FEW LINES THAT ARENTRELEVANT TO THIS ANALYSIS...[TUE OCT 30 16:41:47 2007] [INFO] [CLIENT 128.30.28.20] CONNECTION TO CHILD 9ESTABLISHED (SERVER COURSES.CSAIL.MIT.EDU:443)...[TUE OCT 30 16:41:47 2007] [DEBUG] SSL_ENGINE_IO.C(1478): [CLIENT 128.30.28.20]FILLING BUFFER[TUE OCT 30 16:41:47 2007] [DEBUG] SSL_ENGINE_IO.C(1529): [CLIENT 128.30.28.20]TOTAL OF 525 BYTES IN BUFFER, EOS=1...MY ANALYSIS CONCENTRATES HERE...[TUE OCT 30 16:42:21 2007] [ERROR] [CLIENT 128.30.28.20] FASTCGI: COMM WITHSERVER USRBINPHP5-CGI ABORTED: IDLE TIMEOUT (30 SEC), REFERER: [URI DELETED][TUE OCT 30 16:42:21 2007] [DEBUG] SSL_ENGINE_IO.C(1561): [CLIENT 128.30.28.20]READ FROM BUFFERED SSL BRIGADE, MODE 0, 8192 BYTES[TUE OCT 30 16:42:21 2007] [DEBUG] SSL_ENGINE_IO.C(1623): [CLIENT 128.30.28.20]BUFFERED SSL BRIGADE NOW EXHAUSTED; REMOVING FILTERTHE REASON FOR THE TIMEOUT IS THAT THE FASTCGI SERVER IS WAITING TO READ POSTDATA FROM THE SERVER WHICH NEVER ARRIVES.  IN FACT, THE SERVER THINKS IT SHOULDBE PASSING CLIENT DATA, BUT WHEN AP_GET_CLIENT_BLOCK() ATTEMPTS TO READ THECLIENT DATA, IT GETS AN EOS.  MORE INTERESTINGLY, AN EXAMINATION OF THEINPUT_FILTER CHAIN AT THAT POINT SHOWS HTTP_IN FOLLOWED BY SSLTLS FILTER; IBELIEVE THE SECOND (OR MAYBE THE FIRST) FILTER HERE SHOULD BE SSLTLS BUFFERINSTEAD.  (WE KNOW FROM THE TWO PREVIOUS LINES THAT THE POST CONTENT HAS BEENSUCCESSFULLY BUFFERED.)  THE BUFFER DOES EVENTUALLY GET READ, AS THE FOLLOWINGLOG ENTRIES SHOW -- BUT NOT BY MOD_FASTCGI.  THE VERY LAST THING THATSSL_IO_BUFFER_FILL() DOES IS ADD THE SSLTLS BUFFER FILTER, SO I DONTUNDERSTAND WHY IT DOESNT APPEAR AT THE HEAD OF THE INPUT FILTER LIST WHENAP_GET_CLIENT_BLOCK() IS RUNNING, NOR WHY IT DOES GET READ (AND PRESUMABLY IS INTHE FILTER CHAIN) AFTER THE REQUEST IS ABORTED.","SUMMARY":"WHO IS HIDING MY BUFFERED POST DATA FROM MOD_SSL AFTER RENEGOTIATION?","CLASS":1}
